var fa=Object.defineProperty;var pa=(a,o,e)=>o in a?fa(a,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[o]=e;var It=(a,o,e)=>pa(a,typeof o!="symbol"?o+"":o,e);(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const n of t)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function e(t){const n={};return t.integrity&&(n.integrity=t.integrity),t.referrerPolicy&&(n.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?n.credentials="include":t.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(t){if(t.ep)return;t.ep=!0;const n=e(t);fetch(t.href,n)}})();class tt{constructor(o,e,r){It(this,"rows");It(this,"cols");It(this,"_data");if(this.rows=o,this.cols=e,this._data=r??new Array(o*e).fill(0),this._data.length!==o*e)throw new Error(`Matrix data length ${this._data.length} does not match ${o}×${e}`)}static fromArray(o){const e=o.length;if(e===0)throw new Error("Matrix cannot have 0 rows");const r=o[0].length,t=[];for(const n of o){if(n.length!==r)throw new Error("All rows must have equal length");for(const i of n)t.push(i)}return new tt(e,r,t)}static identity(o){const e=new Array(o*o).fill(0);for(let r=0;r<o;r++)e[r*o+r]=1;return new tt(o,o,e)}static zeros(o,e){return new tt(o,e,new Array(o*e).fill(0))}get(o,e){const r=this._data[o*this.cols+e];if(r===void 0)throw new Error(`Index (${o},${e}) out of bounds for ${this.rows}×${this.cols}`);return r}toArray(){return Array.from({length:this.rows},(o,e)=>Array.from({length:this.cols},(r,t)=>this.get(e,t)))}toFlat(){return[...this._data]}transpose(){const o=new Array(this.rows*this.cols);for(let e=0;e<this.rows;e++)for(let r=0;r<this.cols;r++)o[r*this.rows+e]=this.get(e,r);return new tt(this.cols,this.rows,o)}multiply(o){if(this.cols!==o.rows)throw new Error(`Dimension mismatch: ${this.rows}×${this.cols} × ${o.rows}×${o.cols}`);const e=new Array(this.rows*o.cols).fill(0);for(let r=0;r<this.rows;r++)for(let t=0;t<this.cols;t++){const n=this.get(r,t);for(let i=0;i<o.cols;i++)e[r*o.cols+i]+=n*o.get(t,i)}return new tt(this.rows,o.cols,e)}scale(o){return new tt(this.rows,this.cols,this._data.map(e=>e*o))}add(o){if(this.rows!==o.rows||this.cols!==o.cols)throw new Error("Matrix dimensions must match for addition");return new tt(this.rows,this.cols,this._data.map((e,r)=>e+(o._data[r]??0)))}subtract(o){if(this.rows!==o.rows||this.cols!==o.cols)throw new Error("Matrix dimensions must match for subtraction");return new tt(this.rows,this.cols,this._data.map((e,r)=>e-(o._data[r]??0)))}cholesky(){if(this.rows!==this.cols)throw new Error("Cholesky requires square matrix");const o=this.rows,e=new Array(o*o).fill(0);for(let r=0;r<o;r++)for(let t=0;t<=r;t++){let n=this.get(r,t);for(let i=0;i<t;i++)n-=(e[r*o+i]??0)*(e[t*o+i]??0);if(r===t){if(n<=0)throw new Error(`Matrix is not positive definite (diagonal became ${n} at position ${r})`);e[r*o+t]=Math.sqrt(n)}else{const i=e[t*o+t];if(!i||i===0)throw new Error("Zero diagonal in Cholesky");e[r*o+t]=n/i}}return new tt(o,o,e)}logDet(){const o=this.cholesky();let e=0;for(let r=0;r<this.rows;r++){const t=o.get(r,r);if(t<=0)throw new Error("Non-positive diagonal in Cholesky");e+=Math.log(t)}return 2*e}inverse(){if(this.rows!==this.cols)throw new Error("Inverse requires square matrix");const o=this.rows,e=new Array(o*2*o);for(let t=0;t<o;t++)for(let n=0;n<o;n++)e[t*2*o+n]=this.get(t,n),e[t*2*o+o+n]=t===n?1:0;for(let t=0;t<o;t++){let n=t,i=Math.abs(e[t*2*o+t]??0);for(let d=t+1;d<o;d++){const l=Math.abs(e[d*2*o+t]??0);l>i&&(i=l,n=d)}if(i<1e-12)throw new Error("Matrix is singular or near-singular");if(n!==t)for(let d=0;d<2*o;d++){const l=e[t*2*o+d]??0;e[t*2*o+d]=e[n*2*o+d]??0,e[n*2*o+d]=l}const s=e[t*2*o+t]??0;for(let d=0;d<o;d++){if(d===t)continue;const l=(e[d*2*o+t]??0)/s;for(let f=0;f<2*o;f++)e[d*2*o+f]-=l*(e[t*2*o+f]??0)}for(let d=0;d<2*o;d++)e[t*2*o+d]/=s}const r=new Array(o*o);for(let t=0;t<o;t++)for(let n=0;n<o;n++)r[t*o+n]=e[t*2*o+o+n]??0;return new tt(o,o,r)}svd(){const o=this.rows,e=this.cols,r=this.toArray(),t=Array.from({length:e},(g,w)=>Array.from({length:e},(u,F)=>w===F?1:0)),n=200*e*e;for(let g=0;g<n;g++){let w=!0;for(let u=0;u<e-1;u++)for(let F=u+1;F<e;F++){let v=0,h=0,k=0;for(let m=0;m<o;m++)v+=(r[m][u]??0)**2,h+=(r[m][F]??0)**2,k+=(r[m][u]??0)*(r[m][F]??0);if(Math.abs(k)<1e-15*Math.sqrt(v*h))continue;w=!1;const x=(h-v)/(2*k),p=Math.sign(x)/(Math.abs(x)+Math.sqrt(1+x*x)),b=1/Math.sqrt(1+p*p),S=p*b;for(let m=0;m<o;m++){const M=r[m][u]??0,z=r[m][F]??0;r[m][u]=b*M+S*z,r[m][F]=-S*M+b*z}for(let m=0;m<e;m++){const M=t[m][u]??0,z=t[m][F]??0;t[m][u]=b*M+S*z,t[m][F]=-S*M+b*z}}if(w)break}const i=Array.from({length:e},(g,w)=>{let u=0;for(let F=0;F<o;F++)u+=(r[F][w]??0)**2;return Math.sqrt(u)}),s=Array.from({length:o},()=>new Array(e).fill(0));for(let g=0;g<e;g++){const w=i[g]??0;for(let u=0;u<o;u++)s[u][g]=w>1e-15?(r[u][g]??0)/w:0}const d=i.map((g,w)=>w).sort((g,w)=>(i[w]??0)-(i[g]??0)),l=Math.min(o,e),f=d.slice(0,l).map(g=>i[g]??0),c=Array.from({length:o},(g,w)=>d.slice(0,l).map(u=>s[w][u]??0)),y=Array.from({length:e},(g,w)=>d.slice(0,l).map(u=>t[w][u]??0));return{U:tt.fromArray(c),S:f,V:tt.fromArray(y)}}pseudoInverse(o=1e-10){const{U:e,S:r,V:t}=this.svd(),n=Math.max(...r),i=o*n,s=r.map(l=>l>i?1/l:0);return tt.fromArray(Array.from({length:t.rows},(l,f)=>Array.from({length:t.cols},(c,y)=>t.get(f,y)*(s[y]??0)))).multiply(e.transpose())}trace(){const o=Math.min(this.rows,this.cols);let e=0;for(let r=0;r<o;r++)e+=this.get(r,r);return e}diagonal(){const o=Math.min(this.rows,this.cols);return Array.from({length:o},(e,r)=>this.get(r,r))}static colVec(o){return new tt(o.length,1,[...o])}static rowVec(o){return new tt(1,o.length,[...o])}eigen(){if(this.rows!==this.cols)throw new Error("eigen() requires square matrix");const o=this.rows,e=this.toArray(),r=Array.from({length:o},(i,s)=>Array.from({length:o},(d,l)=>s===l?1:0));for(let i=0;i<100*o*o;i++){let s=0,d=1,l=Math.abs(e[0][1]??0);for(let h=0;h<o;h++)for(let k=h+1;k<o;k++)Math.abs(e[h][k]??0)>l&&(l=Math.abs(e[h][k]??0),s=h,d=k);if(l<1e-12)break;const f=e[s][s]??0,c=e[d][d]??0,y=e[s][d]??0,g=.5*Math.atan2(2*y,f-c),w=Math.cos(g),u=Math.sin(g),F=w*w*f+2*u*w*y+u*u*c,v=u*u*f-2*u*w*y+w*w*c;e[s][s]=F,e[d][d]=v,e[s][d]=0,e[d][s]=0;for(let h=0;h<o;h++){if(h===s||h===d)continue;const k=e[h][s]??0,x=e[h][d]??0;e[h][s]=w*k+u*x,e[s][h]=e[h][s],e[h][d]=-u*k+w*x,e[d][h]=e[h][d]}for(let h=0;h<o;h++){const k=r[h][s]??0,x=r[h][d]??0;r[h][s]=w*k+u*x,r[h][d]=-u*k+w*x}}const t=Array.from({length:o},(i,s)=>e[s][s]??0),n=t.map((i,s)=>s).sort((i,s)=>t[s]-t[i]);return{values:n.map(i=>t[i]),vectors:tt.fromArray(Array.from({length:o},(i,s)=>n.map(d=>r[s][d]??0)))}}}function Tt(a){if(a<=0)throw new Error(`logGamma: z must be positive, got ${a}`);if(a<.5)return Math.log(Math.PI/Math.sin(Math.PI*a))-Tt(1-a);const o=7,e=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],r=a-1;let t=e[0];for(let i=1;i<o+2;i++)t+=(e[i]??0)/(r+i);const n=r+o+.5;return .5*Math.log(2*Math.PI)+(r+.5)*Math.log(n)-n+Math.log(t)}function ua(a,o){return Tt(a)+Tt(o)-Tt(a+o)}function qt(a,o,e){if(a<0||a>1)throw new Error(`incompleteBeta: x must be in [0,1], got ${a}`);if(a===0)return 0;if(a===1)return 1;if(a>(o+1)/(o+e+2))return 1-qt(1-a,e,o);const r=ua(o,e),t=Math.exp(Math.log(a)*o+Math.log(1-a)*e-r)/o,n=200,i=3e-7,s=1e-30;let d=1,l=1,f=1-(o+e)*a/(o+1);Math.abs(f)<s&&(f=s),f=1/f,d=f;for(let c=1;c<=n;c++){let y=c*(e-c)*a/((o+2*c-1)*(o+2*c));f=1+y*f,Math.abs(f)<s&&(f=s),l=1+y/l,Math.abs(l)<s&&(l=s),f=1/f,d*=l*f,y=-(o+c)*(o+e+c)*a/((o+2*c)*(o+2*c+1)),f=1+y*f,Math.abs(f)<s&&(f=s),l=1+y/l,Math.abs(l)<s&&(l=s),f=1/f;const g=l*f;if(d*=g,Math.abs(g-1)<i)break}return t*d}function se(a,o){const e=o/(o+a*a);return qt(e,o/2,.5)}function xa(a,o){const e=o/(o+a*a),r=.5*qt(e,o/2,.5);return a>=0?1-r:r}function Ot(a,o){if(a<=0||a>=1)throw new Error(`tDistQuantile: p must be in (0,1), got ${a}`);let e=-50,r=50;for(let t=0;t<100;t++){const n=(e+r)/2;if(xa(n,o)<a?e=n:r=n,r-e<1e-10)break}return(e+r)/2}function ga(a,o,e){if(a<=0)return 0;const r=o*a/(o*a+e);return qt(r,o/2,e/2)}function De(a,o,e){return 1-ga(a,o,e)}function ie(a){return .5*(1+ya(a/Math.SQRT2))}function Nt(a){if(a<=0||a>=1)throw new Error(`normalQuantile: p must be in (0,1), got ${a}`);const o=-39.69683028665376,e=220.9460984245205,r=-275.9285104469687,t=138.357751867269,n=-30.66479806614716,i=2.506628277459239,s=-54.47609879822406,d=161.5858368580409,l=-155.6989798598866,f=66.80131188771972,c=-13.28068155288572,y=-.007784894002430293,g=-.3223964580411365,w=-2.400758277161838,u=-2.549732539343734,F=4.374664141464968,v=2.938163982698783,h=.007784695709041462,k=.3224671290700398,x=2.445134137142996,p=3.754408661907416,b=.02425,S=1-b;if(a<b){const m=Math.sqrt(-2*Math.log(a));return(((((y*m+g)*m+w)*m+u)*m+F)*m+v)/((((h*m+k)*m+x)*m+p)*m+1)}else if(a<=S){const m=a-.5,M=m*m;return(((((o*M+e)*M+r)*M+t)*M+n)*M+i)*m/(((((s*M+d)*M+l)*M+f)*M+c)*M+1)}else{const m=Math.sqrt(-2*Math.log(1-a));return-(((((y*m+g)*m+w)*m+u)*m+F)*m+v)/((((h*m+k)*m+x)*m+p)*m+1)}}function ya(a){const o=1/(1+.3275911*Math.abs(a)),r=1-o*(.254829592+o*(-.284496736+o*(1.421413741+o*(-1.453152027+o*1.061405429))))*Math.exp(-a*a);return a>=0?r:-r}function Le(a,o,e={}){const r=o.length,t=e.maxIter??1e3*r,n=e.tol??1e-8,i=e.alpha??1,s=e.beta??.5,d=e.gamma??2,l=e.delta??.5,f=Array.from({length:r+1},(u,F)=>{const v=[...o];return F>0&&(v[F-1]=(v[F-1]??0)+(Math.abs(v[F-1]??0)>1e-8?.05*(v[F-1]??0):25e-5)),v});let c=f.map(u=>a(u)),y=0,g=!1;for(;y<t;y++){const u=c.map((b,S)=>S).sort((b,S)=>c[b]-c[S]),F=u.map(b=>f[b]);c=u.map(b=>c[b]);for(let b=0;b<=r;b++)f[b]=F[b];if((c[r]??0)-(c[0]??0)<n){g=!0;break}const h=Array.from({length:r},(b,S)=>f.slice(0,r).reduce((m,M)=>m+(M[S]??0),0)/r),k=f[r],x=h.map((b,S)=>b+i*(b-(k[S]??0))),p=a(x);if(p<(c[0]??0)){const b=h.map((m,M)=>m+d*(x[M]-m)),S=a(b);f[r]=S<p?b:x,c[r]=S<p?S:p}else if(p<(c[r-1]??0))f[r]=x,c[r]=p;else{const b=h.map((m,M)=>m+s*((k[M]??0)-m)),S=a(b);if(S<(c[r]??0))f[r]=b,c[r]=S;else{const m=f[0];for(let M=1;M<=r;M++)f[M]=f[M].map((z,E)=>(m[E]??0)+l*(z-(m[E]??0))),c[M]=a(f[M])}}}const w=c.map((u,F)=>F).sort((u,F)=>c[u]-c[F]);return{x:f[w[0]],fval:c[w[0]],iterations:y,converged:g}}function ct(a){if(a.length===0)throw new Error("mean: empty array");return a.reduce((o,e)=>o+Number(e),0)/a.length}function le(a){if(a.length<2)throw new Error("variance: need at least 2 observations");const o=ct(a);return isFinite(o)?a.reduce((e,r)=>e+(r-o)**2,0)/(a.length-1):NaN}function Lt(a){return Math.sqrt(le(a))}function Te(a){return Lt(a)/Math.sqrt(a.length)}function ba(a){if(a.length===0)throw new Error("median: empty array");const o=[...a].sort((r,t)=>r-t),e=Math.floor(o.length/2);return o.length%2===0?(o[e-1]+o[e])/2:o[e]}function ft(a,o){if(o<0||o>1)throw new Error(`quantile: p must be in [0,1], got ${o}`);const e=[...a].sort((s,d)=>s-d),t=(e.length-1)*o,n=Math.floor(t),i=Math.ceil(t);return n===i?e[n]:e[n]+(t-n)*(e[i]-e[n])}function Rt(a){return[...a].sort((o,e)=>o-e)}function Fe(a){const o=a.length,e=a.map((n,i)=>({v:n,i})).sort((n,i)=>n.v-i.v),r=new Array(o);let t=0;for(;t<o;){let n=t;for(;n<o&&e[n].v===e[t].v;)n++;const i=(t+n-1)/2+1;for(let s=t;s<n;s++)r[e[s].i]=i;t=n}return r}function wa(a,o){if(a.length!==o.length)throw new Error("cov: arrays must have equal length");if(a.length<2)throw new Error("cov: need at least 2 observations");const e=ct(a),r=ct(o);return a.reduce((t,n,i)=>t+(n-e)*((o[i]??0)-r),0)/(a.length-1)}function N(a,o){const e=10**o;return Math.round(a*e)/e}function Gt(a){return a<.001?"p < .001":`p = ${N(a,3).toFixed(3).replace("0.",".")}`}function pt(a,o=2){return N(a,o).toFixed(o)}function va(a,o=2){return`[${N(a[0],o).toFixed(o)}, ${N(a[1],o).toFixed(o)}]`}function ce(a){if(typeof a=="number")return Number.isInteger(a)?String(a):a.toFixed(2);const[o,e]=a,r=Number.isInteger(o)?String(o):o.toFixed(2),t=Number.isInteger(e)?String(e):e.toFixed(2);return`${r}, ${t}`}function Ma(a,o,e,r,t,n="η²"){return`F(${ce([o,e])}) = ${pt(a)}, ${Gt(r)}, ${n} = ${pt(t)}`}function de(a,o,e,r,t="r",n=.95){const i=Math.round(n*100);return`${t}(${ce(o)}) = ${pt(a)}, ${Gt(e)}, ${i}% CI ${va(r)}`}function Sa(a,o,e,r,t,n){return`R² = ${pt(a)}, adj. R² = ${pt(o)}, F(${ce([r,t])}) = ${pt(e)}, ${Gt(n)}`}function ka(a,o,e,r){return`ICC = ${pt(a)}, AIC = ${pt(o,1)}, BIC = ${pt(e,1)}, logLik = ${pt(r,1)}`}function La(a){return a<.01?"negligible":a<.06?"small":a<.14?"medium":"large"}function He(a){const o=Math.abs(a);return o<.1?"negligible":o<.3?"small":o<.5?"medium":o<.7?"large":"very large"}function Fa(a){const o=new Map;for(const t of a)o.set(t,(o.get(t)??0)+1);const e=Math.max(...o.values()),r=[];for(const[t,n]of o)n===e&&r.push(t);return r.sort((t,n)=>t-n)}function $a(a,o=.05){const e=Rt(a),r=e.length,t=Math.floor(r*o),n=e.slice(t,r-t);if(n.length===0)throw new Error("trimmedMean: too much trimming, no data remains");return ct(n)}function za(a){const o=a.length;if(o<3)throw new Error("skewness: need at least 3 observations");const e=ct(a),r=Lt(a);if(r===0)return 0;const t=a.reduce((n,i)=>n+((i-e)/r)**3,0);return o/((o-1)*(o-2))*t}function Aa(a){const o=a.length;if(o<4)throw new Error("kurtosis: need at least 4 observations");const e=ct(a),r=Lt(a);if(r===0)return 0;const t=a.reduce((s,d)=>s+((d-e)/r)**4,0),n=o*(o+1)/((o-1)*(o-2)*(o-3))*t,i=3*(o-1)**2/((o-2)*(o-3));return n-i}function Ea(a,o=.95){const e=a.length;if(e<2)throw new Error("ciMean: need at least 2 observations");const r=ct(a),t=Te(a),n=Ot(1-(1-o)/2,e-1);return[r-n*t,r+n*t]}const _a=[0,.221157,-.147981,-2.07119,4.434685,-2.706056],Ca=[0,.042981,-.293762,-1.752461,5.682633,-3.582633];function $e(a,o){let e=0;for(let r=a.length-1;r>=0;r--)e=e*o+(a[r]??0);return e}function Pa(a){const o=a.length;if(o<3)throw new Error("shapiroWilk: need at least 3 observations");if(o>5e3)throw new Error("shapiroWilk: n > 5000 not supported");const e=Rt(a),r=Math.floor(o/2),t=new Array(r).fill(0);if(o===3)t[0]=Math.SQRT1_2;else if(o===4)t[0]=.6872,t[1]=.1677;else if(o===5)t[0]=.6646,t[1]=.2413;else{for(let u=0;u<r;u++)t[u]=Nt((u+1-.375)/(o+.25));let l=0;for(let u=0;u<r;u++)l+=t[u]*t[u];l*=2;const f=Math.sqrt(l),c=1/Math.sqrt(o),y=t[0],g=t[1],w=$e(_a,c)-y/f;if(o>5){const u=-g/f+$e(Ca,c),F=l-2*y*y-2*g*g,v=1-2*w*w-2*u*u,h=F>0&&v>0?Math.sqrt(F/v):1;t[0]=w,t[1]=u;for(let k=2;k<r;k++)t[k]=(t[k]??0)/-h}else{const u=l-2*y*y,F=1-2*w*w,v=u>0&&F>0?Math.sqrt(u/F):1;t[0]=w;for(let h=1;h<r;h++)t[h]=(t[h]??0)/-v}}let n=0;for(let l=0;l<r;l++)n+=(t[l]??0)*((e[o-1-l]??0)-(e[l]??0));const i=le(e)*(o-1),s=i>0?Math.min(1,n*n/i):1,d=Ra(s,o);return{statistic:N(s,4),pValue:N(d,4)}}function _t(a,o){return a.reduce((e,r)=>e*o+r,0)}function Ra(a,o){let e=Math.log(1-a),r;if(o<=11){const t=_t([.459,-2.273],1/o);if(e>=t)return 5e-7;e=-Math.log(t-e);const n=_t([-1.2725,1.0521,-.0895],1/o),i=Math.exp(_t([-6714e-7,.025054,-.6714,.724],1/o));r=(e-n)/i}else{const t=_t([.0038915,-.083751,-.31082,-1.5861],Math.log(o)),n=Math.exp(_t([.0030302,-.082676,-.4803],Math.log(o)));r=(e-t)/n}return Math.max(0,Math.min(1,1-ie(r)))}function We(a,o=.95){if(a.length===0)throw new Error("describe: empty array");const e=a.length,r=ct(a),t=ba(a),n=Fa(a),i=$a(a,.05),s=Lt(a),d=Te(a),l=le(a),f=Rt(a),c=f[0],y=f[e-1],g=ft(a,.25),w=ft(a,.75),u=w-g,F=e>=3?za(a):0,v=e>=4?Aa(a):0,h=Ea(a,o),k=e>=3?Pa(a):{statistic:NaN,pValue:NaN},x=Math.round(o*100),p=[`n = ${e}`,`M = ${N(r,2)}, SD = ${N(s,2)}, SE = ${N(d,2)}`,`Mdn = ${N(t,2)}, IQR = ${N(u,2)}`,`Skew = ${N(F,2)}, Kurt = ${N(v,2)}`,`${x}% CI [${N(h[0],2)}, ${N(h[1],2)}]`,e>=3?`Shapiro-Wilk W = ${N(k.statistic,3)}, ${Gt(k.pValue)}`:""].filter(Boolean).join("; ");return{n:e,mean:N(r,6),median:N(t,6),mode:n,trimmedMean:N(i,6),sd:N(s,6),se:N(d,6),variance:N(l,6),min:c,max:y,range:y-c,iqr:N(u,6),q1:N(g,6),q3:N(w,6),skewness:N(F,6),kurtosis:N(v,6),ci:h,ciLevel:o,shapiroWilk:k,formatted:p}}function Va(a,o,e,r){const t=o+r;if(t<=0)return{value:0,name:"ω²",interpretation:"negligible"};const n=Math.max(0,(a-e*r)/t);return{value:n,name:"ω²",interpretation:La(n)}}function Ba(a){if(a.length<2)throw new Error("oneWayANOVA: need at least 2 groups");const o=a.length,e=a.flatMap(v=>[...v.values]),r=e.length,t=ct(e);let n=0,i=0;const s=a.map(v=>{const h=ct(v.values),k=v.values.length;return n+=k*(h-t)**2,i+=v.values.reduce((x,p)=>x+(p-h)**2,0),{label:v.label,n:k,mean:h,sd:Lt(v.values)}}),d=n+i,l=o-1,f=r-o,c=n/l,y=i/f,g=y===0?1/0:c/y,w=De(g,l,f),u=Va(n,d,l,y),F=Ma(g,l,f,w,u.value,"ω²");return{testName:"One-way ANOVA",statistic:g,df:[l,f],pValue:w,effectSize:u,ci:[NaN,NaN],ciLevel:.95,n:r,formatted:F,groups:s,ssBetween:n,ssWithin:i,ssTotal:d,msBetween:c,msWithin:y,dfBetween:l,dfWithin:f}}function Ia(a,o,e,r=.95){const t=[],n=1-r,i=a.length;for(let s=0;s<i;s++)for(let d=s+1;d<i;d++){const l=a[s],f=a[d],c=l.values.length,y=f.values.length,g=ct(l.values),w=ct(f.values),u=g-w,F=Math.sqrt(o/2*(1/c+1/y)),v=F===0?0:Math.abs(u)/F,h=Ot(1-n/(i*(i-1)),e),k=Da(v,i),x=h*F,p=[u-x,u+x];t.push({group1:l.label,group2:f.label,meanDiff:u,se:F,statistic:v,pValue:k,pValueAdj:k,ci:p,significant:k<n})}return t}function Da(a,o,e){const r=a/Math.SQRT2,t=2*(1-Ta(r));return Math.min(1,o*(o-1)/2*t)}function Ta(a){const o=Math.abs(a)/Math.SQRT2,e=1/(1+.3275911*o),t=1-e*(.254829592+e*(-.284496736+e*(1.421413741+e*(-1.453152027+e*1.061405429))))*Math.exp(-o*o);return .5*(1+(a>=0?t:-t))}function me(a,o,e=.95){if(a.length!==o.length)throw new Error("pearsonCorrelation: arrays must have equal length");const r=a.length;if(r<3)throw new Error("pearsonCorrelation: need at least 3 observations");const t=Lt(a),n=Lt(o);if(t===0||n===0)throw new Error("pearsonCorrelation: zero variance in input");const i=wa(a,o)/(t*n),s=Math.max(-1,Math.min(1,i)),d=r-2,l=Math.abs(s)===1?1/0:s*Math.sqrt(d/(1-s*s)),f=se(l,d),c=je(s,r,e);return{testName:"Pearson r",statistic:N(s,4),df:d,pValue:N(f,4),effectSize:{value:s,name:"Pearson r",interpretation:He(s)},ci:c,ciLevel:e,n:r,formatted:de(s,d,f,c,"r",e)}}function je(a,o,e){const r=Math.log((1+a)/(1-a))/2,t=1/Math.sqrt(o-3),n=Nt(1-(1-e)/2),i=r-n*t,s=r+n*t;return[Math.tanh(i),Math.tanh(s)]}function Ha(a,o,e=.95){if(a.length!==o.length)throw new Error("spearmanCorrelation: arrays must have equal length");if(a.length<3)throw new Error("spearmanCorrelation: need at least 3 observations");const t=Fe(a),n=Fe(o),i=me(t,n,e);return{...i,testName:"Spearman's ρ",effectSize:{...i.effectSize,name:"Spearman's ρ"},formatted:de(i.statistic,typeof i.df=="number"?i.df:0,i.pValue,i.ci,"ρ",e)}}function Wa(a,o,e=.95){if(a.length!==o.length)throw new Error("kendallTau: arrays must have equal length");const r=a.length;if(r<3)throw new Error("kendallTau: need at least 3 observations");let t=0,n=0,i=0,s=0;for(let u=0;u<r;u++)for(let F=u+1;F<r;F++){const v=(a[u]??0)-(a[F]??0),h=(o[u]??0)-(o[F]??0),k=Math.sign(v*h);k>0?t++:k<0&&n++,v===0&&i++,h===0&&s++}const d=r*(r-1)/2,l=(t-n)/Math.sqrt((d-i)*(d-s)),f=2*(2*r+5)/(9*r*(r-1)),c=l/Math.sqrt(f),y=2*(1-ie(Math.abs(c))),g=je(l,r,e),w=r-2;return{testName:"Kendall's τ",statistic:N(l,4),df:w,pValue:N(y,4),effectSize:{value:l,name:"Kendall's τ",interpretation:He(l)},ci:g,ciLevel:e,n:r,formatted:de(l,w,y,g,"τ",e)}}function ja(a,o,e="pearson"){const r=a.length;if(r<2)throw new Error("correlationMatrix: need at least 2 variables");const t=a[0].length,n=e==="pearson"?me:e==="spearman"?Ha:Wa,i=Array.from({length:r},(d,l)=>Array.from({length:r},(f,c)=>{if(l===c)return 1;if(c<l)return 0;try{return n(a[l],a[c]).statistic}catch{return NaN}})),s=Array.from({length:r},(d,l)=>Array.from({length:r},(f,c)=>{if(l===c)return NaN;if(c<l)return 0;try{return n(a[l],a[c]).pValue}catch{return NaN}}));for(let d=0;d<r;d++)for(let l=0;l<d;l++)i[d][l]=i[l][d],s[d][l]=s[l][d];return{r:i,pValues:s,n:t,labels:o??Array.from({length:r},(d,l)=>`Var${l+1}`)}}function qe(a,o,e,r=.95){const t=o.length,n=a.cols,i=a.transpose(),s=i.multiply(a),d=i.multiply(tt.colVec(o)),l=s.inverse(),f=l.multiply(d),c=Array.from({length:n},(D,P)=>f.get(P,0)),y=Array.from({length:t},(D,P)=>{let C=0;for(let R=0;R<n;R++)C+=a.get(P,R)*(c[R]??0);return C}),g=o.map((D,P)=>D-(y[P]??0)),w=ct(o),u=g.reduce((D,P)=>D+P*P,0),F=o.reduce((D,P)=>D+(P-w)**2,0),v=F>0?Math.max(0,1-u/F):0,h=1-(1-v)*(t-1)/(t-n),k=t-n;if(k<=0)throw new Error("fitOLS: not enough degrees of freedom");const x=u/k,p=l.scale(x),b=Ot(1-(1-r)/2,k),S=c.map((D,P)=>{const C=Math.sqrt(Math.max(0,p.get(P,P))),R=C===0?0:D/C,T=se(R,k),I=[D-b*C,D+b*C];return{name:e[P]??`β${P}`,estimate:N(D,6),se:N(C,6),tValue:N(R,4),pValue:N(T,4),ci:I}}),m=n-1,M=F-u,z=x===0||m===0?0:M/m/x,E=De(z,m,k),$=Math.max(u,1e-15),L=-t/2*(Math.log(2*Math.PI)+Math.log($/t)+1),_=-2*L+2*(n+1),A=-2*L+Math.log(t)*(n+1),B=Sa(v,h,z,m,k,E);return{coefficients:S,r2:N(v,6),adjR2:N(h,6),fStatistic:N(z,4),fDf:[m,k],fPValue:N(E,4),aic:N(_,2),bic:N(A,2),residuals:g,fitted:y,n:t,formatted:B}}function qa(a,o,e=.95){if(a.length!==o.length)throw new Error("linearRegression: arrays must have equal length");if(a.length<3)throw new Error("linearRegression: need at least 3 observations");const r=a.length,t=tt.fromArray(Array.from({length:r},(n,i)=>[1,a[i]??0]));return qe(t,o,["(Intercept)","x"],e)}function Oe(a,o,e=.95){if(o.length===0)throw new Error("multipleRegression: need at least 1 predictor");const r=a.length;for(const i of o)if(i.values.length!==r)throw new Error(`multipleRegression: predictor '${i.name}' length mismatch`);const t=tt.fromArray(Array.from({length:r},(i,s)=>[1,...o.map(d=>d.values[s]??0)])),n=["(Intercept)",...o.map(i=>i.name)];return qe(t,a,n,e)}function Oa(a,o){const e=a.n,r=a.coefficients.length,t=tt.fromArray(Array.from({length:e},(g,w)=>[1,...o.map(u=>u.values[w]??0)])),n=t.transpose();let i;try{i=n.multiply(t).inverse()}catch{i=tt.identity(r)}const s=t.multiply(i).multiply(n),d=Array.from({length:e},(g,w)=>s.get(w,w)),l=a.residuals.reduce((g,w)=>g+w*w,0)/(e-r),f=a.residuals.map((g,w)=>{const u=Math.sqrt(l*(1-(d[w]??0)));return u===0?0:g/u}),c=a.residuals.map((g,w)=>{const u=d[w]??0;return g*g*u/(r*l*(1-u)**2)}),y=o.map((g,w)=>{const u=o.filter((h,k)=>k!==w);if(u.length===0)return 1;const F=o[w].values,v=u.map(h=>({name:h.name,values:h.values}));try{const h=Oe(F,v);return 1/Math.max(1e-10,1-h.r2)}catch{return NaN}});return{leverage:d,cooksDistance:c,standardizedResiduals:f,vif:y}}function Na(a,o){const e=a.length;if(e===0)throw new Error("preprocessData: data cannot be empty");const r=a[0].length,t=(o==null?void 0:o.method)??"none";if(t==="log"){for(let y=0;y<e;y++)for(let g=0;g<r;g++)if(a[y][g]<=0)throw new Error(`preprocessData: log requires all values > 0, found ${a[y][g]} at row ${y}, col ${g}`);const l=a.map(y=>y.map(g=>Math.log(g))),f=ee(l,e,r),c=ae(l,f,e,r);return{data:l,colMeans:f,colSDs:c,method:t,centered:!1,scaled:!1}}if(t==="sqrt"){for(let y=0;y<e;y++)for(let g=0;g<r;g++)if(a[y][g]<0)throw new Error(`preprocessData: sqrt requires all values >= 0, found ${a[y][g]} at row ${y}, col ${g}`);const l=a.map(y=>y.map(g=>Math.sqrt(g))),f=ee(l,e,r),c=ae(l,f,e,r);return{data:l,colMeans:f,colSDs:c,method:t,centered:!1,scaled:!1}}const n=ee(a,e,r),i=ae(a,n,e,r);if(t==="none")return{data:a,colMeans:n,colSDs:i,method:t,centered:!1,scaled:!1};if(t==="center")return{data:a.map(f=>f.map((c,y)=>c-n[y])),colMeans:n,colSDs:i,method:t,centered:!0,scaled:!1};const s=i.map(l=>l===0?1:l);return{data:a.map(l=>l.map((f,c)=>(f-n[c])/s[c])),colMeans:n,colSDs:s,method:t,centered:!0,scaled:!0}}function ee(a,o,e){return Array.from({length:e},(r,t)=>{let n=0;for(let i=0;i<o;i++)n+=a[i][t];return n/o})}function ae(a,o,e,r){return e<2?new Array(r).fill(0):Array.from({length:r},(t,n)=>{let i=0;for(let s=0;s<e;s++){const d=a[s][n]-o[n];i+=d*d}return Math.sqrt(i/(e-1))})}function Ga(a,o,e=!0){if(a.length<2)throw new Error("runPCA: need at least 2 observations");const r=a.length,t=a[0].length;if(t<2)throw new Error("runPCA: need at least 2 variables");const n=Na(a,{method:e?"standardize":"center"}),i=tt.fromArray(n.data),s=i.scale(1/Math.sqrt(r-1)),{U:d,S:l,V:f}=s.svd(),c=o,y=l.slice(0,c).map(x=>x*x),g=l.reduce((x,p)=>x+p*p,0),w=Array.from({length:t},(x,p)=>Array.from({length:c},(b,S)=>f.get(p,S))),u=tt.fromArray(Array.from({length:t},(x,p)=>Array.from({length:c},(b,S)=>f.get(p,S)))),F=i.multiply(u),v=Array.from({length:r},(x,p)=>Array.from({length:c},(b,S)=>F.get(p,S))),h=y.map(x=>g>0?x/g:0),k=h.reduce((x,p,b)=>(x.push((x[b-1]??0)+p),x),[]);return{loadings:w,scores:v,eigenvalues:y.map(x=>N(x,6)),varianceExplained:h.map(x=>N(x,6)),cumulativeVariance:k.map(x=>N(x,6)),nComponents:c}}function ze(a,o,e,r){const t=Math.exp(a),n=o.length,i=r.cols,s=e.cols,l=r.transpose().multiply(r).add(tt.identity(i).scale(1/t));let f,c;try{f=l.inverse(),c=l.logDet()}catch{return{negLogLik:1/0,sigmae2:0,sigmab2:0}}const y=r.multiply(f).multiply(r.transpose()),g=tt.fromArray(Array.from({length:n},($,L)=>Array.from({length:n},(_,A)=>(L===A?1:0)-y.get(L,A)))),w=i*Math.log(t)+c,u=e.transpose().multiply(g),F=u.multiply(e);let v,h;try{v=F.inverse(),h=F.logDet()}catch{return{negLogLik:1/0,sigmae2:0,sigmab2:0}}const k=u.multiply(tt.colVec(o)),x=v.multiply(k),p=e.multiply(x),b=Array.from({length:n},($,L)=>(o[L]??0)-p.get(L,0)),S=tt.colVec(b),m=S.transpose().multiply(g).multiply(S).get(0,0),M=Math.max(1e-8,m/(n-s)),z=t*M;return{negLogLik:-(-.5*((n-s)*Math.log(M)+w+h)),sigmae2:M,sigmab2:z}}function Xa(a){const{outcome:o,fixedPredictors:e,groupId:r,ciLevel:t=.95}=a,n=o.length;if(n<5)throw new Error("runLMM: need at least 5 observations");if(r.length!==n)throw new Error("runLMM: groupId must have same length as outcome");const i=[...new Set(r)],s=i.length;if(s<2)throw new Error("runLMM: need at least 2 groups");const d=Object.keys(e),l=d.length+1,f=tt.fromArray(Array.from({length:n},(j,W)=>[1,...d.map(O=>(e[O]??[])[W]??0)])),c=tt.fromArray(Array.from({length:n},(j,W)=>i.map(O=>r[W]===O?1:0))),y=j=>ze(j[0]??0,o,f,c).negLogLik,g=[-4,-2,0,2,4];let w=Le(y,[g[0]],{maxIter:1e3,tol:1e-8});for(let j=1;j<g.length;j++){const W=Le(y,[g[j]],{maxIter:1e3,tol:1e-8});W.fval<w.fval&&(w=W)}const u=ze(w.x[0]??0,o,f,c),F=u.sigmab2,v=u.sigmae2,h=F/v,k=c.transpose().multiply(c);let x;if(h<1e-10)x=tt.identity(n);else{const j=k.add(tt.identity(s).scale(1/h));let W;try{W=j.inverse();const O=c.multiply(W).multiply(c.transpose());x=tt.fromArray(Array.from({length:n},(X,et)=>Array.from({length:n},(rt,st)=>(et===st?1:0)-O.get(et,st))))}catch{x=tt.identity(n)}}const p=x.scale(1/v),S=f.transpose().multiply(p),m=S.multiply(f);let M;try{M=m.inverse()}catch{M=tt.identity(l)}const z=S.multiply(tt.colVec([...o])),E=M.multiply(z),$=Array.from({length:l},(j,W)=>E.get(W,0)),L=Math.max(1,n-l-s+1),_=Ot(1-(1-t)/2,L),A=M.scale(v),B=["(Intercept)",...d],D=$.map((j,W)=>{const O=Math.sqrt(Math.max(0,A.get(W,W))),X=O===0?0:j/O,et=se(X,L);return{name:B[W]??`β${W}`,estimate:N(j,6),se:N(O,6),tValue:N(X,4),pValue:N(et,4),ci:[N(j-_*O,6),N(j+_*O,6)]}}),P=F/(F+v),C=.5*(n-l)*(1+Math.log(2*Math.PI)),R=-u.negLogLik-C,T=-2*R+2*(l+2),I=-2*R+Math.log(n)*(l+2),q=ka(P,T,I,R);return{fixedEffects:D,varianceComponents:{intercept:N(F,6),residual:N(v,6)},icc:N(P,6),logLik:N(R,4),aic:N(T,2),bic:N(I,2),nObs:n,nGroups:s,formatted:q}}function Qa(a,o){const{outcome:e,fixedPredictors:r,groupId:t}=a,n=e.length,i=[...new Set(t)],s=Object.keys(r),d=o.varianceComponents.intercept,l=o.varianceComponents.residual,f=tt.fromArray(Array.from({length:n},(u,F)=>[1,...s.map(v=>(r[v]??[])[F]??0)])),c=o.fixedEffects.map(u=>u.estimate),y=f.multiply(tt.colVec(c)),g=Array.from({length:n},(u,F)=>(e[F]??0)-y.get(F,0)),w=d/l;return i.map(u=>{const F=Array.from({length:n},(x,p)=>p).filter(x=>t[x]===u),v=F.reduce((x,p)=>x+(g[p]??0),0),h=F.length,k=w/(1+w*h)*v;return{group:u,blup:N(k,6)}})}const Ya=["#4e79a7","#f28e2b","#e15759","#76b7b2","#59a14f","#af7aa1","#ff9da7","#9c755f"],G={background:"#ffffff",surface:"#f8f9fa",text:"#1a1a2e",textMuted:"#6c757d",textAnnotation:"#495057",gridLine:"#eaeef3",axisLine:"#c4cdd6",colors:Ya,fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",fontFamilyMono:"'JetBrains Mono', 'Fira Code', 'Cascadia Code', Menlo, Consolas, monospace",fontSize:12,fontSizeSmall:11,fontSizeTitle:16,marginTop:58,marginRight:32,marginBottom:84,marginLeft:64,pointOpacity:.55,violinOpacity:.72,ciOpacity:.15};({...G});function Q(a,o=G){const e={"--js-bg":o.background,"--js-surface":o.surface,"--js-text":o.text,"--js-text-muted":o.textMuted,"--js-text-annotation":o.textAnnotation,"--js-grid":o.gridLine,"--js-axis":o.axisLine,"--js-font":o.fontFamily,"--js-font-mono":o.fontFamilyMono,"--js-font-size":`${o.fontSize}px`,"--js-font-size-sm":`${o.fontSizeSmall}px`,"--js-font-size-title":`${o.fontSizeTitle}px`};o.colors.forEach((r,t)=>{e[`--js-color-${t}`]=r});for(const[r,t]of Object.entries(e))a.style.setProperty(r,t);a.style.background=o.background}function H(a,o=G){return o.colors[a%o.colors.length]}let yt=null;function Ua(){return yt||(yt=document.createElement("div"),yt.id="carm-tooltip",yt.style.cssText=`
      position: fixed;
      pointer-events: none;
      z-index: 9999;
      padding: 8px 12px;
      border-radius: 6px;
      font-size: 12px;
      line-height: 1.5;
      max-width: 240px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      opacity: 0;
      transition: opacity 0.15s ease;
    `,document.body.appendChild(yt)),yt}function U(a,o,e=G){const r=Ua();r.innerHTML=o,r.style.background=e.surface,r.style.color=e.text,r.style.border=`1px solid ${e.gridLine}`,r.style.fontFamily=e.fontFamily;const t=a.clientX+14,n=a.clientY-28,i=window.innerWidth,s=240;r.style.left=`${Math.min(t,i-s-8)}px`,r.style.top=`${Math.max(n,8)}px`,r.style.opacity="1"}function Y(){yt&&(yt.style.opacity="0")}function V(a,o){return`<div style="display:flex;justify-content:space-between;gap:12px">
    <span style="opacity:0.7">${a}</span>
    <strong>${typeof o=="number"?o.toFixed(3):o}</strong>
  </div>`}function Z(a,o,e,r,t=G){a.append("rect").attr("x",20).attr("y",10).attr("width",3).attr("height",22).attr("rx",1.5).attr("fill",t.colors[0]??"#4e79a7"),a.append("text").attr("class","plot-title").attr("x",30).attr("y",26).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeTitle).attr("font-weight","700").attr("letter-spacing","-0.3").attr("fill",t.text).text(o),e&&a.append("text").attr("class","plot-subtitle").attr("x",30).attr("y",45).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-style","italic").attr("fill",t.textAnnotation).text(e)}function J(a,o,e,r,t=G){a.append("text").attr("x",20).attr("y",r-8).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textMuted).style("font-style","italic").text(o)}function Ka(a,o,e,r,t,n,i=G){const s=e>=0?"+":"−",d=`ŷ = ${o.toFixed(2)} ${s} ${Math.abs(e).toFixed(2)}x   R² = ${r.toFixed(3)}`,l=8,f=4,c=d.length*6.2+l*2,y=14+f*2;a.append("rect").attr("x",t-l).attr("y",n-y+f).attr("width",c).attr("height",y).attr("rx",4).attr("fill",i.surface).attr("stroke",i.gridLine).attr("stroke-width",1),a.append("text").attr("x",t).attr("y",n).attr("font-family",i.fontFamilyMono).attr("font-size",i.fontSizeSmall-1).attr("fill",i.textAnnotation).text(d)}function Ne(a,o,e,r,t=G){a.append("text").attr("x",e).attr("y",r).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textMuted).text(`n = ${o}`)}function Za(a,o){return o?a<.001?"p < .001":`p = ${a.toFixed(3).replace(/^0\./,".")}`:a<.001?"***":a<.01?"**":a<.05?"*":"ns"}function Ja(a,o,e,r=G){const t=e.significantOnly?o.filter(s=>s.significant):o;if(t.length===0)return;const n=t.map(s=>({x1:Math.min(e.groupPositions.get(s.group1)??0,e.groupPositions.get(s.group2)??0),x2:Math.max(e.groupPositions.get(s.group1)??0,e.groupPositions.get(s.group2)??0),p:s.pValueAdj,label:Za(s.pValueAdj,e.numericP!==!1),level:0})).sort((s,d)=>s.x2-s.x1-(d.x2-d.x1)),i=[];for(const s of n){let d=0;for(;(i[d]??-1/0)>=s.x1-5;)d++;s.level=d,i[d]=s.x2}for(const s of n){const d=e.yBase-s.level*e.bracketHeight-12,l=6,f=s.label==="ns"?r.textMuted:r.text;a.append("line").attr("x1",s.x1).attr("x2",s.x2).attr("y1",d).attr("y2",d).attr("stroke",f).attr("stroke-width",1.2),a.append("line").attr("x1",s.x1).attr("x2",s.x1).attr("y1",d).attr("y2",d+l).attr("stroke",f).attr("stroke-width",1.2),a.append("line").attr("x1",s.x2).attr("x2",s.x2).attr("y1",d).attr("y2",d+l).attr("stroke",f).attr("stroke-width",1.2),a.append("text").attr("x",(s.x1+s.x2)/2).attr("y",d-3).attr("text-anchor","middle").attr("font-family",r.fontFamily).attr("font-size",r.fontSizeSmall).attr("fill",f).text(s.label)}}const tr="modulepreload",er=function(a){return"/Carm/"+a},Ae={},K=function(o,e,r){let t=Promise.resolve();if(e&&e.length>0){let i=function(l){return Promise.all(l.map(f=>Promise.resolve(f).then(c=>({status:"fulfilled",value:c}),c=>({status:"rejected",reason:c}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),d=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));t=i(e.map(l=>{if(l=er(l),l in Ae)return;Ae[l]=!0;const f=l.endsWith(".css"),c=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const y=document.createElement("link");if(y.rel=f?"stylesheet":tr,f||(y.as="script"),y.crossOrigin="",y.href=l,d&&y.setAttribute("nonce",d),document.head.appendChild(y),f)return new Promise((g,w)=>{y.addEventListener("load",g),y.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${l}`)))})}))}function n(i){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=i,window.dispatchEvent(s),!s.defaultPrevented)throw i}return t.then(i=>{for(const s of i||[])s.status==="rejected"&&n(s.reason);return o().catch(n)})};function Ge(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>ar(r,a,o,e))}function ar(a,o,e,r){var k,x;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop+(((k=e.pairwise)==null?void 0:k.length)??0)*20,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);(r.title||e.testResult)&&Z(f,r.title??"Group Comparison",((x=e.testResult)==null?void 0:x.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.groups.map(p=>p.label),g=a.scaleBand().domain(y).range([0,d]).padding(.2),w=e.groups.flatMap(p=>[...p.values]),[u,F]=a.extent(w),v=(F-u)*.1,h=a.scaleLinear().domain([u-v,F+v]).range([l,0]).nice();if(c.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",p=>h(p)).attr("y2",p=>h(p)).attr("stroke",t.gridLine).attr("stroke-width",1),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(g)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),e.groups.forEach((p,b)=>{const S=(g(p.label)??0)+g.bandwidth()/2,m=H(b,t),M=r.violinBandwidth??(F-u)/20,z=rr(p.values,h.ticks(60),M),E=Math.max(...z.map(I=>I[1])),$=g.bandwidth()*.45,L=E>0?$/E:1,_=a.area().x0(I=>S-I[1]*L).x1(I=>S+I[1]*L).y(I=>h(I[0])).curve(a.curveCatmullRom);c.append("path").datum(z).attr("d",_).attr("fill",m).attr("opacity",t.violinOpacity).attr("stroke",m).attr("stroke-width",1);const A=ft(p.values,.25),B=ft(p.values,.5),D=ft(p.values,.75),P=D-A,C=Math.min(...p.values.filter(I=>I>=A-1.5*P)),R=Math.max(...p.values.filter(I=>I<=D+1.5*P)),T=g.bandwidth()*.2;if(c.append("line").attr("x1",S).attr("x2",S).attr("y1",h(C)).attr("y2",h(A)).attr("stroke",m).attr("stroke-width",1.5),c.append("line").attr("x1",S).attr("x2",S).attr("y1",h(D)).attr("y2",h(R)).attr("stroke",m).attr("stroke-width",1.5),c.append("rect").attr("x",S-T/2).attr("width",T).attr("y",h(D)).attr("height",h(A)-h(D)).attr("fill",t.background).attr("stroke",m).attr("stroke-width",2),r.showMedian!==!1&&(c.append("line").attr("x1",S-T/2).attr("x2",S+T/2).attr("y1",h(B)).attr("y2",h(B)).attr("stroke",m).attr("stroke-width",2.5),c.append("text").attr("x",S+T/2+4).attr("y",h(B)+3.5).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textAnnotation).text(B.toFixed(2))),r.showMean){const I=p.values.reduce((X,et)=>X+et,0)/p.values.length,q=h(I),j=5;c.append("polygon").attr("points",`${S},${q-j} ${S+j},${q} ${S},${q+j} ${S-j},${q}`).attr("fill","white").attr("stroke",m).attr("stroke-width",1.5);const W=h(B);r.showMedian!==!1&&Math.abs(q-W)<14||c.append("text").attr("x",S+j+4).attr("y",q+3.5).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textAnnotation).text(I.toFixed(2))}if(r.showJitter!==!1){const I=(r.jitterWidth??.15)*g.bandwidth(),q=b*12345;p.values.forEach((j,W)=>{const O=S+(nr(q+W)-.5)*I;c.append("circle").attr("cx",O).attr("cy",h(j)).attr("r",3).attr("fill",m).attr("opacity",t.pointOpacity).attr("stroke","none").on("mouseover",X=>{U(X,[V("Group",p.label),V("Value",j.toFixed(3))].join(""),t)}).on("mouseout",Y)})}r.showN!==!1&&Ne(c,p.values.length,S,l+60,t)}),r.showBrackets!==!1&&e.pairwise&&e.pairwise.length>0){const p=new Map(e.groups.map(b=>[b.label,(g(b.label)??0)+g.bandwidth()/2]));Ja(c,e.pairwise,{groupPositions:p,yBase:0,bracketHeight:22,significantOnly:r.significantBracketsOnly??!1,...r.numericP!==void 0&&{numericP:r.numericP}},t)}r.caption&&J(f,r.caption,n,i,t)}function rr(a,o,e){return o.map(r=>{const t=a.reduce((n,i)=>n+or((r-i)/e),0)/(a.length*e);return[r,t]})}function or(a){return Math.exp(-.5*a*a)/Math.sqrt(2*Math.PI)}function nr(a){const o=Math.sin(a)*1e4;return o-Math.floor(o)}function sr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>ir(r,a,o,e))}function ir(a,o,e,r){var p,b,S;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight+40,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Scatter Plot",((p=e.correlationResult)==null?void 0:p.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),[y,g]=a.extent(e.x),[w,u]=a.extent(e.y),F=(g-y)*.05,v=(u-w)*.05,h=a.scaleLinear().domain([y-F,g+F]).range([0,d]).nice(),k=a.scaleLinear().domain([w-v,u+v]).range([l,0]).nice();if(c.selectAll(".grid-h").data(k.ticks(6)).join("line").attr("class","grid-h").attr("x1",0).attr("x2",d).attr("y1",m=>k(m)).attr("y2",m=>k(m)).attr("stroke",t.gridLine).attr("stroke-width",1),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(k).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"X"),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Y"),e.regressionResult){const m=e.regressionResult.coefficients,M=((b=m[0])==null?void 0:b.estimate)??0,z=((S=m[1])==null?void 0:S.estimate)??1,E=e.regressionResult.r2,$=h.domain(),L=[[$[0],M+z*$[0]],[$[1],M+z*$[1]]];if(r.showCI!==!1){const _=e.x.length,A=Math.sqrt(e.regressionResult.residuals.reduce((R,T)=>R+T*T,0)/(_-2)),B=e.x.reduce((R,T)=>R+T,0)/_,D=e.x.reduce((R,T)=>R+(T-B)**2,0),P=h.ticks(50).map(R=>{const T=M+z*R,I=1/_+(R-B)**2/D,q=1.96*A*Math.sqrt(I);return{x:R,lo:T-q,hi:T+q}}),C=a.area().x(R=>h(R.x)).y0(R=>k(R.lo)).y1(R=>k(R.hi)).curve(a.curveBasis);c.append("path").datum(P).attr("d",C).attr("fill",H(0,t)).attr("opacity",t.ciOpacity)}c.append("line").attr("x1",h(L[0][0])).attr("x2",h(L[1][0])).attr("y1",k(L[0][1])).attr("y2",k(L[1][1])).attr("stroke",H(0,t)).attr("stroke-width",2),r.showEquation!==!1&&Ka(c,M,z,E,10,20,t)}const x=H(0,t);e.x.forEach((m,M)=>{const z=e.y[M]??0;c.append("circle").attr("cx",h(m)).attr("cy",k(z)).attr("r",r.pointSize??4).attr("fill",x).attr("opacity",t.pointOpacity).attr("stroke",t.background).attr("stroke-width",.5).on("mouseover",E=>{var L;const $=[V(r.xLabel??"X",m.toFixed(3)),V(r.yLabel??"Y",z.toFixed(3))];(L=e.labels)!=null&&L[M]&&$.unshift(`<strong>${e.labels[M]}</strong>`),U(E,$.join(""),t)}).on("mouseout",Y)}),r.caption&&J(f,r.caption,n,i,t)}function lr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>cr(r,a,o,e))}function cr(a,o,e,r){var p,b;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??400,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Distribution",e.descriptives?`M = ${e.descriptives.mean.toFixed(2)}, SD = ${e.descriptives.sd.toFixed(2)}, n = ${e.descriptives.n}`:"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),[y,g]=a.extent(e.values),w=a.scaleLinear().domain([y,g]).range([0,d]).nice(),u=r.bins??Math.ceil(Math.sqrt(e.values.length)),v=a.bin().domain(w.domain()).thresholds(u)(e.values),h=Math.max(...v.map(S=>S.length)),k=a.scaleLinear().domain([0,h*1.1]).range([l,0]);c.selectAll(".grid").data(k.ticks(5)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",S=>k(S)).attr("y2",S=>k(S)).attr("stroke",t.gridLine).attr("stroke-width",1);const x=r.color??H(0,t);if(c.selectAll(".bar").data(v).join("rect").attr("class","bar").attr("x",S=>w(S.x0)).attr("y",S=>k(S.length)).attr("width",S=>Math.max(0,w(S.x1)-w(S.x0)-1)).attr("height",S=>l-k(S.length)).attr("fill",x).attr("opacity",.7).attr("stroke",t.background).attr("stroke-width",.5),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(w).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(k).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"Value"),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("Count"),r.showNormalCurve!==!1&&e.descriptives){const S=e.descriptives.mean,m=e.descriptives.sd,M=e.descriptives.n,z=((p=v[0])==null?void 0:p.x1)-((b=v[0])==null?void 0:b.x0),E=M*z,L=a.range(y,g,(g-y)/100).map(A=>({x:A,y:E*Math.exp(-.5*((A-S)/m)**2)/(m*Math.sqrt(2*Math.PI))})),_=a.line().x(A=>w(A.x)).y(A=>k(A.y)).curve(a.curveBasis);c.append("path").datum(L).attr("d",_).attr("fill","none").attr("stroke",H(4,t)).attr("stroke-width",2).attr("stroke-dasharray","6,3")}r.caption&&J(f,r.caption,n,i,t)}function dr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>mr(r,a,o,e))}function mr(a,o,e,r){var F;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??400,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Frequency",((F=e.testResult)==null?void 0:F.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.rows.map(v=>String(v.value)),g=Math.max(...e.rows.map(v=>v.count)),w=a.scaleBand().domain(y).range([0,d]).padding(.25),u=a.scaleLinear().domain([0,g*1.15]).range([l,0]).nice();c.selectAll(".grid").data(u.ticks(5)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",v=>u(v)).attr("y2",v=>u(v)).attr("stroke",t.gridLine).attr("stroke-width",1),c.selectAll(".bar").data(e.rows).join("rect").attr("class","bar").attr("x",v=>w(String(v.value))??0).attr("y",v=>u(v.count)).attr("width",w.bandwidth()).attr("height",v=>l-u(v.count)).attr("fill",(v,h)=>H(h,t)).attr("rx",2),r.showCounts!==!1&&c.selectAll(".label-count").data(e.rows).join("text").attr("class","label-count").attr("x",v=>(w(String(v.value))??0)+w.bandwidth()/2).attr("y",v=>u(v.count)-4).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(v=>`${v.count}`),r.showPercentages!==!1&&c.selectAll(".label-pct").data(e.rows).join("text").attr("class","label-pct").attr("x",v=>(w(String(v.value))??0)+w.bandwidth()/2).attr("y",v=>u(v.count)-16).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text(v=>`(${(v.relative*100).toFixed(1)}%)`),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(w)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(u).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"Category"),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Count"),r.caption&&J(f,r.caption,n,i,t)}function hr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>fr(r,a,o,e))}function fr(a,o,e,r){var g,w;const t=r.theme??G,n=e.labels.length,i=Math.min(Math.floor((r.width??500)/(n+2)),Math.floor((r.height??500)/(n+2)),70),s=i*n+120,d=i*n+100;o.innerHTML="",Q(o,t);const l=a.select(o).append("svg").attr("width",s).attr("height",d).style("background",t.background);Z(l,r.title??"Correlation Matrix","",s,t);const f={top:60,left:80},c=l.append("g").attr("transform",`translate(${f.left},${f.top})`),y=a.scaleSequential().domain([-1,1]).interpolator(a.interpolateRdBu);for(let u=0;u<n;u++)for(let F=0;F<n;F++){const v=((g=e.r[u])==null?void 0:g[F])??0,h=((w=e.pValues[u])==null?void 0:w[F])??1;if(c.append("rect").attr("x",F*i).attr("y",u*i).attr("width",i-2).attr("height",i-2).attr("rx",3).attr("fill",u===F?t.surface:y(v)).on("mouseover",k=>{u!==F&&U(k,[V(`${e.labels[u]} × ${e.labels[F]}`,""),V("r",v.toFixed(3)),V("p",h<.001?"< .001":h.toFixed(3))].join(""),t)}).on("mouseout",Y),r.showValues!==!1&&u!==F&&c.append("text").attr("x",F*i+i/2).attr("y",u*i+i/2+1).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-family",t.fontFamilyMono).attr("font-size",Math.min(t.fontSizeSmall,i/3)).attr("fill",Math.abs(v)>.6?"#fff":t.text).text(v.toFixed(2)),r.showSignificance!==!1&&u!==F&&!isNaN(h)){const k=h<.001?"***":h<.01?"**":h<.05?"*":"";k&&c.append("text").attr("x",F*i+i/2).attr("y",u*i+i-4).attr("text-anchor","middle").attr("font-size",8).attr("fill",Math.abs(v)>.6?"#fff":t.textMuted).text(k)}}if(e.labels.forEach((u,F)=>{c.append("text").attr("x",-6).attr("y",F*i+i/2).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(u)}),e.labels.forEach((u,F)=>{c.append("text").attr("x",F*i+i/2).attr("y",-8).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(u)}),r.showLegend!==!1){const v=s-120,h=d-35,k=l.append("defs"),x="corr-grad-"+Math.random().toString(36).slice(2),p=k.append("linearGradient").attr("id",x);[-1,-.5,0,.5,1].forEach(S=>{p.append("stop").attr("offset",`${((S+1)/2*100).toFixed(0)}%`).attr("stop-color",y(S))}),l.append("rect").attr("x",v).attr("y",h).attr("width",80).attr("height",12).attr("fill",`url(#${x})`),l.append("text").attr("x",v).attr("y",h+12+10).attr("font-size",9).attr("fill",t.textMuted).text("−1"),l.append("text").attr("x",v+80/2).attr("y",h+12+10).attr("text-anchor","middle").attr("font-size",9).attr("fill",t.textMuted).text("0"),l.append("text").attr("x",v+80).attr("y",h+12+10).attr("text-anchor","end").attr("font-size",9).attr("fill",t.textMuted).text("+1")}r.caption&&J(l,r.caption,s,d,t)}function pr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>ur(r,a,o,e))}function ur(a,o,e,r){const t=r.theme??G,n=r.excludeIntercept!==!1?e.filter(x=>x.name!=="(Intercept)"):e,i=n.length,s=r.width??500,d=r.height??Math.max(i*40+100,200),l={top:t.marginTop,right:t.marginRight+60,bottom:t.marginBottom,left:120},f=s-l.left-l.right,c=d-l.top-l.bottom;o.innerHTML="",Q(o,t);const y=a.select(o).append("svg").attr("width",s).attr("height",d).style("background",t.background);Z(y,r.title??"Coefficient Plot","",s,t);const g=y.append("g").attr("transform",`translate(${l.left},${l.top})`),w=n.flatMap(x=>[x.ci[0],x.ci[1],x.estimate]),[u,F]=a.extent(w),v=(F-u)*.1,h=a.scaleLinear().domain([u-v,F+v]).range([0,f]).nice(),k=a.scaleBand().domain([...n].reverse().map(x=>x.name)).range([0,c]).padding(.3);if(r.showZeroLine!==!1){const x=h(0);g.append("line").attr("x1",x).attr("x2",x).attr("y1",0).attr("y2",c).attr("stroke",t.axisLine).attr("stroke-dasharray","4,2").attr("stroke-width",1)}g.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",x=>h(x)).attr("x2",x=>h(x)).attr("y1",0).attr("y2",c).attr("stroke",t.gridLine).attr("stroke-width",1),n.forEach((x,p)=>{const b=(k(x.name)??0)+k.bandwidth()/2,m=x.pValue<.05?H(0,t):t.textMuted;g.append("line").attr("x1",h(x.ci[0])).attr("x2",h(x.ci[1])).attr("y1",b).attr("y2",b).attr("stroke",m).attr("stroke-width",2.5).attr("opacity",.6),g.append("circle").attr("cx",h(x.estimate)).attr("cy",b).attr("r",5).attr("fill",m);const M=x.pValue<.001?"p < .001":`p = ${x.pValue.toFixed(3)}`;g.append("text").attr("x",f+5).attr("y",b+4).attr("font-family",t.fontFamilyMono).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textMuted).text(M)}),g.append("g").attr("transform",`translate(0,${c})`).call(a.axisBottom(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("g").call(a.axisLeft(k)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("text").attr("x",f/2).attr("y",c+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"Estimate (95% CI)"),r.caption&&J(y,r.caption,s,d,t)}function xr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>gr(r,a,o,e))}function gr(a,o,e,r){const t=r.theme??G,n=r.width??400,i=r.height??400,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom,f=e.length,c=Rt(e),y=c.reduce((z,E)=>z+E,0)/f,g=Math.sqrt(c.reduce((z,E)=>z+(E-y)**2,0)/(f-1)),w=c.map((z,E)=>{const $=(E+1-.375)/(f+.25);return{x:Nt(Math.max(1e-4,Math.min(.9999,$))),y:z}});o.innerHTML="",Q(o,t);const u=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(u,r.title??"QQ Plot","Normal probability plot",n,t);const F=u.append("g").attr("transform",`translate(${s.left},${s.top})`),v=a.extent(w.map(z=>z.x)),h=a.extent(w.map(z=>z.y)),k=(v[1]-v[0])*.05,x=(h[1]-h[0])*.05,p=a.scaleLinear().domain([v[0]-k,v[1]+k]).range([0,d]).nice(),b=a.scaleLinear().domain([h[0]-x,h[1]+x]).range([l,0]).nice();F.selectAll(".grid").data(b.ticks(5)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",z=>b(z)).attr("y2",z=>b(z)).attr("stroke",t.gridLine).attr("stroke-width",1);const S=p.domain(),m=S[0]??0,M=S[1]??1;if(F.append("line").attr("x1",p(m)).attr("x2",p(M)).attr("y1",b(y+g*m)).attr("y2",b(y+g*M)).attr("stroke",H(4,t)).attr("stroke-width",2).attr("stroke-dasharray","6,3"),r.showCI!==!1){const z=1.36/Math.sqrt(f),E=w.map(L=>({x:L.x,lo:y+g*L.x-z*g*Math.sqrt(f),hi:y+g*L.x+z*g*Math.sqrt(f)})),$=a.area().x(L=>p(L.x)).y0(L=>b(L.lo)).y1(L=>b(L.hi));F.append("path").datum(E).attr("d",$).attr("fill",H(4,t)).attr("opacity",t.ciOpacity)}F.selectAll(".qq-point").data(w).join("circle").attr("class","qq-point").attr("cx",z=>p(z.x)).attr("cy",z=>b(z.y)).attr("r",3).attr("fill",H(0,t)).attr("opacity",t.pointOpacity),F.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(p).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),F.append("g").call(a.axisLeft(b).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),F.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("Theoretical Quantiles"),F.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("Sample Quantiles"),r.caption&&J(u,r.caption,n,i,t)}function yr(a,o,e,r={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(t=>br(t,a,o,e,r))}function br(a,o,e,r,t){const n=t.theme??G,i=t.width??700,s=t.height??600,d=i/2,l=s/2;o.innerHTML="",Q(o,n);const f=a.select(o).append("svg").attr("width",i).attr("height",s).style("background",n.background);f.append("text").attr("x",i/2).attr("y",18).attr("text-anchor","middle").attr("font-family",n.fontFamily).attr("font-size",n.fontSizeTitle).attr("font-weight","600").attr("fill",n.text).text(t.title??"Regression Diagnostics");const c=H(0,n),y=[{title:"Residuals vs Fitted",row:0,col:0},{title:"Normal Q-Q",row:0,col:1},{title:"Scale-Location",row:1,col:0},{title:"Residuals vs Leverage",row:1,col:1}],g={top:40,right:20,bottom:50,left:50},w=d-g.left-g.right,u=l-g.top-g.bottom;y.forEach((F,v)=>{const h=F.col*d+g.left,k=F.row*l+g.top+25,x=f.append("g").attr("transform",`translate(${h},${k})`);x.append("text").attr("x",w/2).attr("y",-18).attr("text-anchor","middle").attr("font-family",n.fontFamily).attr("font-size",n.fontSize).attr("font-weight","600").attr("fill",n.text).text(F.title);let p,b;if(v===0)p=e.fitted,b=e.residuals;else if(v===1){const L=Rt(e.residuals),_=L.length;b=L,p=L.map((A,B)=>{const D=(B+1-.375)/(_+.25);return Nt(Math.max(1e-4,Math.min(.9999,D)))})}else v===2?(p=e.fitted,b=e.residuals.map(L=>Math.sqrt(Math.abs(L)))):(p=r,b=e.residuals);const S=a.extent([...p]),m=a.extent([...b]),M=(S[1]-S[0])*.05,z=(m[1]-m[0])*.05,E=a.scaleLinear().domain([S[0]-M,S[1]+M]).range([0,w]).nice(),$=a.scaleLinear().domain([m[0]-z,m[1]+z]).range([u,0]).nice();if(x.selectAll(".grid").data($.ticks(4)).join("line").attr("class","grid").attr("x1",0).attr("x2",w).attr("y1",L=>$(L)).attr("y2",L=>$(L)).attr("stroke",n.gridLine).attr("stroke-width",1),(v===0||v===2)&&x.append("line").attr("x1",0).attr("x2",w).attr("y1",$(0)).attr("y2",$(0)).attr("stroke",n.axisLine).attr("stroke-dasharray","4,2"),v===1){const L=ct(e.residuals),_=Math.sqrt(e.residuals.reduce((P,C)=>P+(C-L)**2,0)/(e.residuals.length-1)),A=E.domain(),B=A[0]??0,D=A[1]??1;x.append("line").attr("x1",E(B)).attr("x2",E(D)).attr("y1",$(L+_*B)).attr("y2",$(L+_*D)).attr("stroke",H(4,n)).attr("stroke-width",1.5).attr("stroke-dasharray","5,2")}p.forEach((L,_)=>{x.append("circle").attr("cx",E(L)).attr("cy",$(b[_]??0)).attr("r",2.5).attr("fill",c).attr("opacity",n.pointOpacity)}),x.append("g").attr("transform",`translate(0,${u})`).call(a.axisBottom(E).ticks(4)).selectAll("text").attr("fill",n.text).attr("font-family",n.fontFamily).attr("font-size",n.fontSizeSmall),x.append("g").call(a.axisLeft($).ticks(4)).selectAll("text").attr("fill",n.text).attr("font-family",n.fontFamily).attr("font-size",n.fontSizeSmall)})}function wr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>vr(r,a,o,e))}function vr(a,o,e,r){var k;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Raincloud Plot",((k=e.testResult)==null?void 0:k.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.groups.map(x=>x.label),g=e.groups.flatMap(x=>[...x.values]),[w,u]=a.extent(g),F=(u-w)*.1,v=a.scaleBand().domain(y).range([0,d]).padding(.3),h=a.scaleLinear().domain([w-F,u+F]).range([l,0]).nice();c.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",x=>h(x)).attr("y2",x=>h(x)).attr("stroke",t.gridLine).attr("stroke-width",1),e.groups.forEach((x,p)=>{const b=H(p,t),S=(v(x.label)??0)+v.bandwidth()/2,m=(u-w)/20,M=v.bandwidth()*.35,z=Mr(x.values,h.ticks(60),m),E=Math.max(...z.map(I=>I[1])),$=E>0?M/E:1,L=a.area().x0(S).x1(I=>S+I[1]*$).y(I=>h(I[0])).curve(a.curveCatmullRom);c.append("path").datum(z).attr("d",L).attr("fill",b).attr("opacity",t.violinOpacity).attr("stroke",b).attr("stroke-width",1);const _=ft(x.values,.25),A=ft(x.values,.5),B=ft(x.values,.75),D=B-_,P=Math.min(...x.values.filter(I=>I>=_-1.5*D)),C=Math.max(...x.values.filter(I=>I<=B+1.5*D)),R=v.bandwidth()*.12,T=S-M*.5;if(c.append("line").attr("x1",T).attr("x2",T).attr("y1",h(P)).attr("y2",h(C)).attr("stroke",b).attr("stroke-width",1.5),c.append("rect").attr("x",T-R/2).attr("width",R).attr("y",h(B)).attr("height",h(_)-h(B)).attr("fill",t.background).attr("stroke",b).attr("stroke-width",2),c.append("line").attr("x1",T-R/2).attr("x2",T+R/2).attr("y1",h(A)).attr("y2",h(A)).attr("stroke",b).attr("stroke-width",2.5),r.showMean){const I=x.values.reduce((W,O)=>W+O,0)/x.values.length,q=h(I),j=5;c.append("polygon").attr("points",`${T},${q-j} ${T+j},${q} ${T},${q+j} ${T-j},${q}`).attr("fill","white").attr("stroke",b).attr("stroke-width",1.5),c.append("text").attr("x",T+j+4).attr("y",q+3.5).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textAnnotation).text(I.toFixed(2))}if(r.showJitter!==!1){const I=T-R-4,q=p*99991;x.values.forEach((j,W)=>{const O=(Sr(q+W)-.5)*v.bandwidth()*.12;c.append("circle").attr("cx",I+O).attr("cy",h(j)).attr("r",2.5).attr("fill",b).attr("opacity",t.pointOpacity).on("mouseover",X=>{U(X,[V("Group",x.label),V("Value",j.toFixed(3))].join(""),t)}).on("mouseout",Y)})}r.showN!==!1&&Ne(c,x.values.length,S,l+60,t)}),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(v)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),r.caption&&J(f,r.caption,n,i,t)}function Mr(a,o,e){return o.map(r=>{const t=a.reduce((n,i)=>n+Math.exp(-.5*((r-i)/e)**2)/(Math.sqrt(2*Math.PI)*e),0)/a.length;return[r,t]})}function Sr(a){const o=Math.sin(a)*1e4;return o-Math.floor(o)}function kr(a,o,e,r={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(t=>Lr(t,a,o,e,r))}function Lr(a,o,e,r,t){const n=t.theme??G,i=t.width??600,s=t.height??Math.max(r.length*20+150,300),d={top:n.marginTop,right:80,bottom:n.marginBottom,left:100},l=i-d.left-d.right,f=s-d.top-d.bottom;o.innerHTML="",Q(o,n);const c=a.select(o).append("svg").attr("width",i).attr("height",s).style("background",n.background);Z(c,t.title??"Random Effects (BLUPs)",e.formatted,i,n);const y=c.append("g").attr("transform",`translate(${d.left},${d.top})`),g=[...r].sort((x,p)=>x.blup-p.blup),w=g.map(x=>String(x.group)),u=g.map(x=>x.blup),F=a.extent(u),v=Math.max(Math.abs(F[0]),Math.abs(F[1]))*.2,h=a.scaleLinear().domain([F[0]-v,F[1]+v]).range([0,l]).nice(),k=a.scaleBand().domain(w).range([f,0]).padding(.3);y.append("line").attr("x1",h(0)).attr("x2",h(0)).attr("y1",0).attr("y2",f).attr("stroke",n.axisLine).attr("stroke-dasharray","4,2").attr("stroke-width",1.5),y.selectAll(".grid").data(h.ticks(5)).join("line").attr("class","grid").attr("x1",x=>h(x)).attr("x2",x=>h(x)).attr("y1",0).attr("y2",f).attr("stroke",n.gridLine).attr("stroke-width",1),g.forEach((x,p)=>{const b=(k(String(x.group))??0)+k.bandwidth()/2,S=x.blup>=0?H(0,n):H(5,n);y.append("circle").attr("cx",h(x.blup)).attr("cy",b).attr("r",4).attr("fill",S),y.append("line").attr("x1",h(0)).attr("x2",h(x.blup)).attr("y1",b).attr("y2",b).attr("stroke",S).attr("stroke-width",1.5).attr("opacity",.5)}),y.append("g").attr("transform",`translate(0,${f})`).call(a.axisBottom(h).ticks(5)).selectAll("text").attr("fill",n.text).attr("font-family",n.fontFamily).attr("font-size",n.fontSize),y.append("g").call(a.axisLeft(k)).selectAll("text").attr("fill",n.text).attr("font-family",n.fontFamily).attr("font-size",n.fontSizeSmall),y.append("text").attr("x",l/2).attr("y",f+44).attr("text-anchor","middle").attr("font-family",n.fontFamily).attr("font-size",n.fontSize).attr("fill",n.text).text("BLUP (random intercept)"),c.append("text").attr("x",i-10).attr("y",s-10).attr("text-anchor","end").attr("font-family",n.fontFamilyMono).attr("font-size",n.fontSizeSmall).attr("fill",n.textMuted).text(`ICC = ${e.icc.toFixed(3)}`),t.caption&&J(c,t.caption,i,s,n)}function Xe(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>{const t=e.type??"biplot";t==="biplot"?Fr(r,a,o,e):t==="scree"?$r(r,a,o,e):zr(r,a,o,e)})}function Fr(a,o,e,r){const t=r.theme??G,n=r.width??500,i=r.height??500,s={top:t.marginTop,right:60,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=((e.varianceExplained[0]??0)*100).toFixed(1),c=((e.varianceExplained[1]??0)*100).toFixed(1),y=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(y,r.title??"PCA Biplot",`PC1 (${f}%) × PC2 (${c}%)`,n,t);const g=y.append("g").attr("transform",`translate(${s.left},${s.top})`),w=e.scores,u=w.map(m=>m[0]??0),F=w.map(m=>m[1]??0),v=a.extent(u),h=a.extent(F),k=(v[1]-v[0])*.1,x=(h[1]-h[0])*.1,p=a.scaleLinear().domain([v[0]-k,v[1]+k]).range([0,d]).nice(),b=a.scaleLinear().domain([h[0]-x,h[1]+x]).range([l,0]).nice();g.selectAll(".grid-h").data(b.ticks(5)).join("line").attr("x1",0).attr("x2",d).attr("y1",m=>b(m)).attr("y2",m=>b(m)).attr("stroke",t.gridLine).attr("stroke-width",1),g.append("line").attr("x1",p(0)).attr("x2",p(0)).attr("y1",0).attr("y2",l).attr("stroke",t.axisLine).attr("stroke-dasharray","4,2"),g.append("line").attr("x1",0).attr("x2",d).attr("y1",b(0)).attr("y2",b(0)).attr("stroke",t.axisLine).attr("stroke-dasharray","4,2"),w.forEach((m,M)=>{var z;g.append("circle").attr("cx",p(m[0]??0)).attr("cy",b(m[1]??0)).attr("r",3.5).attr("fill",H(0,t)).attr("opacity",t.pointOpacity),(z=r.observationLabels)!=null&&z[M]&&g.append("text").attr("x",p(m[0]??0)+5).attr("y",b(m[1]??0)+4).attr("font-size",t.fontSizeSmall-2).attr("fill",t.textMuted).text(r.observationLabels[M])});const S=Math.min(d,l)*.4;e.loadings.forEach((m,M)=>{var A;const z=(m[0]??0)*S,E=(m[1]??0)*S,$=p(0),L=b(0),_=H(M%8+1,t);g.append("line").attr("x1",$).attr("y1",L).attr("x2",$+z).attr("y2",L-E).attr("stroke",_).attr("stroke-width",1.5).attr("marker-end","url(#arrow)"),g.append("text").attr("x",$+z+5).attr("y",L-E+4).attr("font-size",t.fontSizeSmall).attr("fill",_).text(((A=r.variableLabels)==null?void 0:A[M])??`Var${M+1}`)}),g.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(p).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("g").call(a.axisLeft(b).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(`PC1 (${f}%)`),g.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(`PC2 (${c}%)`),r.caption&&J(y,r.caption,n,i,t)}function $r(a,o,e,r){const t=r.theme??G,n=r.width??500,i=r.height??350,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Scree Plot","Eigenvalue by component",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.eigenvalues.map((u,F)=>F+1),g=a.scaleBand().domain(y).range([0,d]).padding(.3),w=a.scaleLinear().domain([0,Math.max(...e.eigenvalues)*1.1]).range([l,0]).nice();c.selectAll(".grid").data(w.ticks(5)).join("line").attr("x1",0).attr("x2",d).attr("y1",u=>w(u)).attr("y2",u=>w(u)).attr("stroke",t.gridLine).attr("stroke-width",1),c.append("line").attr("x1",0).attr("x2",d).attr("y1",w(1)).attr("y2",w(1)).attr("stroke",t.axisLine).attr("stroke-dasharray","6,3").attr("stroke-width",1.5),e.eigenvalues.forEach((u,F)=>{const v=g(F+1)??0;c.append("rect").attr("x",v).attr("y",w(u)).attr("width",g.bandwidth()).attr("height",l-w(u)).attr("fill",H(F,t)).attr("opacity",.8).attr("rx",2),c.append("text").attr("x",v+g.bandwidth()/2).attr("y",w(u)-4).attr("text-anchor","middle").attr("font-size",t.fontSizeSmall-1).attr("fill",t.text).text(u.toFixed(2))}),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(g)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(w).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("Component"),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("Eigenvalue"),r.caption&&J(f,r.caption,n,i,t)}function zr(a,o,e,r){const t=r.theme??G,n=e.loadings.length,i=e.nComponents,s=50,d=r.width??i*s+120,l=r.height??n*s+100,f={top:60,left:100};o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",d).attr("height",l).style("background",t.background);Z(c,r.title??"PCA Loadings","",d,t);const y=c.append("g").attr("transform",`translate(${f.left},${f.top})`),g=a.scaleSequential().domain([-1,1]).interpolator(a.interpolateRdBu);e.loadings.forEach((w,u)=>{var v;w.forEach((h,k)=>{y.append("rect").attr("x",k*s).attr("y",u*s).attr("width",s-2).attr("height",s-2).attr("rx",3).attr("fill",g(h)),y.append("text").attr("x",k*s+s/2).attr("y",u*s+s/2+4).attr("text-anchor","middle").attr("font-size",t.fontSizeSmall-1).attr("fill",Math.abs(h)>.6?"#fff":t.text).text(h.toFixed(2))});const F=((v=r.variableLabels)==null?void 0:v[u])??`Var${u+1}`;y.append("text").attr("x",-6).attr("y",u*s+s/2+4).attr("text-anchor","end").attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(F)}),Array.from({length:i},(w,u)=>{y.append("text").attr("x",u*s+s/2).attr("y",-8).attr("text-anchor","middle").attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(`PC${u+1}`)}),r.caption&&J(c,r.caption,d,l,t)}function Qe(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Ar(r,a,o,e))}function Ar(a,o,e,r){const t=r.theme??G,n=r.width??550,i=r.height??350,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const{xMin:f,xMax:c,pdf:y,cdf:g}=Er(e),w=200,u=Array.from({length:w},(M,z)=>f+(c-f)*z/(w-1)),F=u.map(M=>y(M)),v=u.map(M=>g(M)),h=_r(e),k=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(k,r.title??`${e.distribution} distribution`,h,n,t);const x=k.append("g").attr("transform",`translate(${s.left},${s.top})`),p=a.scaleLinear().domain([f,c]).range([0,d]),b=Math.max(...F.filter(isFinite)),S=a.scaleLinear().domain([0,b*1.1]).range([l,0]);x.selectAll(".grid").data(S.ticks(5)).join("line").attr("x1",0).attr("x2",d).attr("y1",M=>S(M)).attr("y2",M=>S(M)).attr("stroke",t.gridLine).attr("stroke-width",1);const m=u.map((M,z)=>({x:M,y:F[z]??0})).filter(M=>isFinite(M.y));if(e.highlightX!==void 0){const M=e.highlightX,z=m.filter(L=>L.x<=M),E=a.area().x(L=>p(L.x)).y0(l).y1(L=>S(L.y));x.append("path").datum(z).attr("d",E).attr("fill",H(0,t)).attr("opacity",.25);const $=g(M);x.append("text").attr("x",p(M)).attr("y",20).attr("text-anchor","middle").attr("font-family",t.fontFamilyMono).attr("font-size",t.fontSizeSmall).attr("fill",t.textAnnotation).text(`P(X ≤ ${M.toFixed(2)}) = ${$.toFixed(4)}`)}if(e.showPDF!==!1){const M=a.line().x(z=>p(z.x)).y(z=>S(z.y)).curve(a.curveBasis);x.append("path").datum(m).attr("d",M).attr("fill","none").attr("stroke",H(0,t)).attr("stroke-width",2.5)}if(e.showCDF===!0){const M=u.map((E,$)=>({x:E,y:(v[$]??0)*b})).filter(E=>isFinite(E.y)),z=a.line().x(E=>p(E.x)).y(E=>S(E.y)).curve(a.curveBasis);x.append("path").datum(M).attr("d",z).attr("fill","none").attr("stroke",H(1,t)).attr("stroke-width",2).attr("stroke-dasharray","6,3")}x.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(p).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),x.append("g").call(a.axisLeft(S).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),x.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("x"),x.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text("Density"),r.caption&&J(k,r.caption,n,i,t)}function Er(a){const o=a.params;switch(a.distribution){case"normal":{const e=o.mean??0,r=o.sd??1;return{xMin:e-4*r,xMax:e+4*r,pdf:t=>Math.exp(-.5*((t-e)/r)**2)/(r*Math.sqrt(2*Math.PI)),cdf:t=>ie((t-e)/r)}}case"t":{const e=o.df??5;return{xMin:-5,xMax:5,pdf:r=>Math.exp(bt((e+1)/2)-bt(e/2))/Math.sqrt(e*Math.PI)*Math.pow(1+r*r/e,-(e+1)/2),cdf:r=>Cr(r,e)}}case"chi-square":{const e=o.df??5;return{xMin:0,xMax:e+5*Math.sqrt(2*e),pdf:r=>r<=0?0:Math.exp((e/2-1)*Math.log(r)-r/2-e/2*Math.log(2)-bt(e/2)),cdf:r=>Pr(r,e)}}case"uniform":{const e=o.min??0,r=o.max??1;return{xMin:e-.2*(r-e),xMax:r+.2*(r-e),pdf:t=>t>=e&&t<=r?1/(r-e):0,cdf:t=>t<e?0:t>r?1:(t-e)/(r-e)}}case"exponential":{const e=o.rate??1;return{xMin:0,xMax:5/e,pdf:r=>r<0?0:e*Math.exp(-e*r),cdf:r=>r<0?0:1-Math.exp(-e*r)}}case"F":{const e=o.df1??2,r=o.df2??10;return{xMin:0,xMax:6,pdf:t=>{if(t<=0)return 0;const n=Math.pow(e*t,e)*Math.pow(r,r),i=Math.pow(e*t+r,e+r);return Math.sqrt(n/i)/(t*Math.exp(Ye(e/2,r/2)))},cdf:t=>t<=0?0:he(e*t/(e*t+r),e/2,r/2)}}default:throw new Error(`Unknown distribution: ${a.distribution}`)}}function _r(a){const o=Object.entries(a.params).map(([e,r])=>`${e} = ${r}`).join(", ");return`${a.distribution}(${o})`}function bt(a){const o=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,15056327351493116e-23],e=a-1;let r=o[0];for(let n=1;n<9;n++)r+=(o[n]??0)/(e+n);const t=e+7.5;return .5*Math.log(2*Math.PI)+(e+.5)*Math.log(t)-t+Math.log(r)}function Cr(a,o){const e=o/(o+a*a),r=he(e,o/2,.5)/2;return a>=0?1-r:r}function Pr(a,o){return a<=0?0:Rr(o/2,a/2)}function Rr(a,o){if(o<a+1){let i=1/a,s=i;for(let d=1;d<200&&(i*=o/(a+d),s+=i,!(Math.abs(i)<Math.abs(s)*3e-7));d++);return s*Math.exp(-o+a*Math.log(o)-bt(a))}let e=o+1-a;const r=1e-30;Math.abs(e)<r&&(e=r);let t=e,n=0;for(let i=1;i<=200;i++){const s=-i*(i-a),d=o+2*i+1-a;n=d+s*n,Math.abs(n)<r&&(n=r),t=d+s/t,Math.abs(t)<r&&(t=r),n=1/n;const l=t*n;if(e*=l,Math.abs(l-1)<3e-7)break}return 1-Math.exp(-o+a*Math.log(o)-bt(a))/e}function Ye(a,o){return bt(a)+bt(o)-bt(a+o)}function he(a,o,e){if(a<=0)return 0;if(a>=1)return 1;if(a>(o+1)/(o+e+2))return 1-he(1-a,e,o);const r=Math.exp(Math.log(a)*o+Math.log(1-a)*e-Ye(o,e))/o,t=1e-30;let n=1,i=1,s=1-(o+e)*a/(o+1);Math.abs(s)<t&&(s=t),s=1/s,n=s;for(let d=1;d<=200;d++){let l=d*(e-d)*a/((o+2*d-1)*(o+2*d));s=1+l*s,Math.abs(s)<t&&(s=t),i=1+l/i,Math.abs(i)<t&&(i=t),s=1/s,n*=i*s,l=-(o+d)*(o+e+d)*a/((o+2*d)*(o+2*d+1)),s=1+l*s,Math.abs(s)<t&&(s=t),i=1+l/i,Math.abs(i)<t&&(i=t),s=1/s;const f=i*s;if(n*=f,Math.abs(f-1)<3e-7)break}return r*n}function Vr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Dr(r,a,o,e))}function Br(a){const o=a.length;if(o<2)return 1;const e=a.reduce((t,n)=>t+n,0)/o;return 1.06*Math.sqrt(a.reduce((t,n)=>t+(n-e)**2,0)/(o-1))*Math.pow(o,-.2)}function Ir(a,o,e){return o.map(r=>{const t=a.reduce((n,i)=>n+Math.exp(-.5*((r-i)/e)**2)/(Math.sqrt(2*Math.PI)*e),0)/a.length;return[r,t]})}function Dr(a,o,e,r){var S;if(e.series.length===0||e.series.every(m=>m.values.length===0))return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??420,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom,f=r.showRug??!0;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(c,r.title??"Density Plot",((S=e.testResult)==null?void 0:S.formatted)??"",n,t);const y=c.append("g").attr("transform",`translate(${s.left},${s.top})`),g=e.series.flatMap(m=>[...m.values]),[w,u]=a.extent(g),F=(u-w)*.1,v=a.scaleLinear().domain([w-F,u+F]).range([0,d]).nice(),h=v.ticks(100),k=e.series.map(m=>{const M=r.bandwidth??Br(m.values);return Ir(m.values,h,M)}),x=Math.max(...k.flatMap(m=>m.map(M=>M[1]))),p=f?l-12:l,b=a.scaleLinear().domain([0,x*1.1]).range([p,0]).nice();y.selectAll(".grid").data(b.ticks(5)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",m=>b(m)).attr("y2",m=>b(m)).attr("stroke",t.gridLine).attr("stroke-width",1),k.forEach((m,M)=>{const z=H(M,t),E=a.line().x(L=>v(L[0])).y(L=>b(L[1])).curve(a.curveCatmullRom),$=a.area().x(L=>v(L[0])).y0(b(0)).y1(L=>b(L[1])).curve(a.curveCatmullRom);y.append("path").datum(m).attr("d",$).attr("fill",z).attr("opacity",t.ciOpacity),y.append("path").datum(m).attr("d",E).attr("fill","none").attr("stroke",z).attr("stroke-width",2)}),f&&e.series.forEach((m,M)=>{const z=H(M,t),E=l-10;m.values.forEach($=>{y.append("line").attr("x1",v($)).attr("x2",v($)).attr("y1",E).attr("y2",E+6).attr("stroke",z).attr("stroke-width",1).attr("opacity",.5).on("mouseover",L=>{U(L,[V("Series",m.label),V("Value",$.toFixed(3))].join(""),t)}).on("mouseout",Y)})}),y.append("g").attr("transform",`translate(0,${p})`).call(a.axisBottom(v)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("g").call(a.axisLeft(b).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),y.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Density"),r.showLegend!==!1&&e.series.length>1&&e.series.forEach((m,M)=>{const z=H(M,t),E=d-120,$=M*18+8;y.append("line").attr("x1",E).attr("x2",E+20).attr("y1",$).attr("y2",$).attr("stroke",z).attr("stroke-width",2),y.append("text").attr("x",E+24).attr("y",$+4).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(m.label)}),r.caption&&J(c,r.caption,n,i,t)}function Tr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Wr(r,a,o,e))}function Hr(a){const o=ft(a,.25),e=ft(a,.5),r=ft(a,.75),t=r-o,n=o-1.5*t,i=r+1.5*t,s=Math.min(...a.filter(f=>f>=n)),d=Math.max(...a.filter(f=>f<=i)),l=a.filter(f=>f<n||f>i);return{q1:o,med:e,q3:r,whisker_lo:s,whisker_hi:d,outliers:l}}function Wr(a,o,e,r){var k;if(e.groups.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??440,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Box Plot",((k=e.testResult)==null?void 0:k.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.groups.map(x=>x.label),g=e.groups.flatMap(x=>[...x.values]),[w,u]=a.extent(g),F=(u-w)*.1,v=a.scaleBand().domain(y).range([0,d]).padding(.3),h=a.scaleLinear().domain([w-F,u+F]).range([l,0]).nice();c.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",x=>h(x)).attr("y2",x=>h(x)).attr("stroke",t.gridLine).attr("stroke-width",1),e.groups.forEach((x,p)=>{if(x.values.length===0)return;const b=H(p,t),S=(v(x.label)??0)+v.bandwidth()/2,m=v.bandwidth()*.5,{q1:M,med:z,q3:E,whisker_lo:$,whisker_hi:L,outliers:_}=Hr(x.values);c.append("line").attr("x1",S).attr("x2",S).attr("y1",h($)).attr("y2",h(M)).attr("stroke",b).attr("stroke-width",1.5).attr("stroke-dasharray","3,2"),c.append("line").attr("x1",S).attr("x2",S).attr("y1",h(E)).attr("y2",h(L)).attr("stroke",b).attr("stroke-width",1.5).attr("stroke-dasharray","3,2");const A=m*.4;if(c.append("line").attr("x1",S-A/2).attr("x2",S+A/2).attr("y1",h($)).attr("y2",h($)).attr("stroke",b).attr("stroke-width",1.5),c.append("line").attr("x1",S-A/2).attr("x2",S+A/2).attr("y1",h(L)).attr("y2",h(L)).attr("stroke",b).attr("stroke-width",1.5),c.append("rect").attr("x",S-m/2).attr("width",m).attr("y",h(E)).attr("height",Math.max(1,h(M)-h(E))).attr("fill",b).attr("opacity",t.violinOpacity).attr("stroke",b).attr("stroke-width",2).attr("rx",2).on("mouseover",B=>{U(B,[V("Group",x.label),V("Median",z.toFixed(3)),V("Q1",M.toFixed(3)),V("Q3",E.toFixed(3))].join(""),t)}).on("mouseout",Y),r.showMedian!==!1&&(c.append("line").attr("x1",S-m/2).attr("x2",S+m/2).attr("y1",h(z)).attr("y2",h(z)).attr("stroke",t.background).attr("stroke-width",2.5),c.append("text").attr("x",S+m/2+4).attr("y",h(z)+3.5).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textAnnotation).text(z.toFixed(2))),r.showMean){const B=x.values.reduce((C,R)=>C+R,0)/x.values.length,D=h(B),P=5;c.append("polygon").attr("points",`${S},${D-P} ${S+P},${D} ${S},${D+P} ${S-P},${D}`).attr("fill","white").attr("stroke",b).attr("stroke-width",1.5),c.append("text").attr("x",S+P+4).attr("y",D+3.5).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textAnnotation).text(B.toFixed(2))}r.showOutliers!==!1&&_.forEach(B=>{c.append("circle").attr("cx",S).attr("cy",h(B)).attr("r",3.5).attr("fill","none").attr("stroke",b).attr("stroke-width",1.5).on("mouseover",D=>{U(D,[V("Group",x.label),V("Outlier",B.toFixed(3))].join(""),t)}).on("mouseout",Y)}),r.showN!==!1&&c.append("text").attr("x",S).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text(`n = ${x.values.length}`)}),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(v)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+60).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),r.caption&&J(f,r.caption,n,i,t)}function jr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>qr(r,a,o,e))}function qr(a,o,e,r){var S;if(e.labels.length===0||e.values.length===0)return;const t=r.theme??G,n=e.labels.length,i=r.width??Math.max(o.clientWidth||600,400),s=r.height??Math.max(200,n*36+t.marginTop+t.marginBottom),d={top:t.marginTop,right:t.marginRight+20,bottom:t.marginBottom,left:t.marginLeft+40},l=i-d.left-d.right,f=s-d.top-d.bottom;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",i).attr("height",s).style("background",t.background);Z(c,r.title??"Lollipop Chart",((S=e.testResult)==null?void 0:S.formatted)??"",i,t);const y=c.append("g").attr("transform",`translate(${d.left},${d.top})`);let g=e.labels.map((m,M)=>M);r.sorted&&(g=[...g].sort((m,M)=>(e.values[M]??0)-(e.values[m]??0)));const w=g.map(m=>e.labels[m]??""),u=g.map(m=>e.values[m]??0),[F,v]=a.extent(u),h=Math.min(0,F),k=Math.max(0,v),x=(k-h)*.1,p=a.scaleLinear().domain([h-x,k+x]).range([0,l]).nice(),b=a.scaleBand().domain(w).range([0,f]).padding(.35);y.selectAll(".grid").data(p.ticks(5)).join("line").attr("class","grid").attr("x1",m=>p(m)).attr("x2",m=>p(m)).attr("y1",0).attr("y2",f).attr("stroke",t.gridLine).attr("stroke-width",1),y.append("line").attr("x1",p(0)).attr("x2",p(0)).attr("y1",0).attr("y2",f).attr("stroke",t.axisLine).attr("stroke-width",1.5),w.forEach((m,M)=>{const z=u[M]??0,E=(b(m)??0)+b.bandwidth()/2,$=H(0,t);y.append("line").attr("x1",p(0)).attr("x2",p(z)).attr("y1",E).attr("y2",E).attr("stroke",$).attr("stroke-width",2).attr("opacity",.7),y.append("circle").attr("cx",p(z)).attr("cy",E).attr("r",6).attr("fill",$).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",L=>{U(L,[V("Label",m),V("Value",z.toFixed(3))].join(""),t)}).on("mouseout",Y)}),y.append("g").attr("transform",`translate(0,${f})`).call(a.axisBottom(p).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("g").call(a.axisLeft(b)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("text").attr("x",l/2).attr("y",f+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"Value"),y.append("text").attr("transform","rotate(-90)").attr("x",-f/2).attr("y",-d.left+12).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??""),r.caption&&J(c,r.caption,i,s,t)}function Or(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Nr(r,a,o,e))}function Nr(a,o,e,r){var b;if(e.labels.length===0||e.values.length===0)return;const t=r.theme??G,n=e.labels.length,i=r.width??Math.max(o.clientWidth||600,400),s=r.height??Math.max(200,n*36+t.marginTop+t.marginBottom),d={top:t.marginTop,right:t.marginRight+20,bottom:t.marginBottom,left:t.marginLeft+40},l=i-d.left-d.right,f=s-d.top-d.bottom,c=e.group2!=null&&e.group2.length===e.labels.length;o.innerHTML="",Q(o,t);const y=a.select(o).append("svg").attr("width",i).attr("height",s).style("background",t.background);Z(y,r.title??"Dot Plot",((b=e.testResult)==null?void 0:b.formatted)??"",i,t);const g=y.append("g").attr("transform",`translate(${d.left},${d.top})`),w=[...e.values];c&&w.push(...e.group2);const[u,F]=a.extent(w),v=(F-u)*.1,h=a.scaleLinear().domain([u-v,F+v]).range([0,l]).nice(),k=a.scaleBand().domain([...e.labels]).range([0,f]).padding(.35);g.selectAll(".grid").data(h.ticks(5)).join("line").attr("class","grid").attr("x1",S=>h(S)).attr("x2",S=>h(S)).attr("y1",0).attr("y2",f).attr("stroke",t.gridLine).attr("stroke-width",1);const x=H(0,t),p=H(1,t);if(e.labels.forEach((S,m)=>{const M=e.values[m]??0,z=c?e.group2[m]??0:null,E=(k(S)??0)+k.bandwidth()/2;c&&z!==null&&g.append("line").attr("x1",h(M)).attr("x2",h(z)).attr("y1",E).attr("y2",E).attr("stroke",t.gridLine).attr("stroke-width",2),g.append("circle").attr("cx",h(M)).attr("cy",E).attr("r",6).attr("fill",x).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",$=>{U($,[V("Label",S),V(e.group1Label??"Value",M.toFixed(3))].join(""),t)}).on("mouseout",Y),c&&z!==null&&g.append("circle").attr("cx",h(z)).attr("cy",E).attr("r",6).attr("fill",p).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",$=>{U($,[V("Label",S),V(e.group2Label??"Group 2",z.toFixed(3))].join(""),t)}).on("mouseout",Y)}),g.append("g").attr("transform",`translate(0,${f})`).call(a.axisBottom(h).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("g").call(a.axisLeft(k)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("text").attr("x",l/2).attr("y",f+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"Value"),g.append("text").attr("transform","rotate(-90)").attr("x",-f/2).attr("y",-d.left+12).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??""),c){const S=l-140,m=e.group1Label??"Group 1",M=e.group2Label??"Group 2";g.append("circle").attr("cx",S+6).attr("cy",8).attr("r",5).attr("fill",x),g.append("text").attr("x",S+16).attr("y",12).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(m),g.append("circle").attr("cx",S+6).attr("cy",26).attr("r",5).attr("fill",p),g.append("text").attr("x",S+16).attr("y",30).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(M)}r.caption&&J(y,r.caption,i,s,t)}function Ue(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Gr(r,a,o,e))}function Gr(a,o,e,r){var x;if(e.categories.length===0||e.series.length===0)return;const t=r.theme??G,n=r.type??"grouped",i=r.width??Math.max(o.clientWidth||600,400),s=r.height??440,d={top:t.marginTop,right:t.marginRight+20,bottom:t.marginBottom,left:t.marginLeft},l=i-d.left-d.right,f=s-d.top-d.bottom;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",i).attr("height",s).style("background",t.background);Z(c,r.title??(n==="stacked"?"Stacked Bar Chart":"Grouped Bar Chart"),((x=e.testResult)==null?void 0:x.formatted)??"",i,t);const y=c.append("g").attr("transform",`translate(${d.left},${d.top})`),g=[...e.categories],w=e.series.map(p=>p.label),u=g.map((p,b)=>{const S={cat:p};return e.series.forEach(m=>{S[m.label]=m.values[b]??0}),S});let F;n==="stacked"?F=Math.max(...u.map(p=>e.series.reduce((b,S)=>b+p[S.label],0))):F=Math.max(...e.series.flatMap(p=>[...p.values].map(b=>Math.abs(b))));const v=a.scaleBand().domain(g).range([0,l]).padding(.2),h=a.scaleBand().domain(w).range([0,v.bandwidth()]).padding(.05),k=a.scaleLinear().domain([0,F*1.1]).range([f,0]).nice();y.selectAll(".grid").data(k.ticks(5)).join("line").attr("class","grid").attr("x1",0).attr("x2",l).attr("y1",p=>k(p)).attr("y2",p=>k(p)).attr("stroke",t.gridLine).attr("stroke-width",1),n==="stacked"?a.stack().keys(w).value((S,m)=>S[m]??0)(u).forEach((S,m)=>{const M=H(m,t);S.forEach((z,E)=>{const $=g[E]??"",L=v($)??0,_=v.bandwidth();y.append("rect").attr("x",L).attr("width",_).attr("y",k(z[1])).attr("height",Math.max(0,k(z[0])-k(z[1]))).attr("fill",M).attr("opacity",t.violinOpacity).attr("stroke",t.background).attr("stroke-width",.5).on("mouseover",A=>{U(A,[V("Category",$),V("Series",w[m]??""),V("Value",(z[1]-z[0]).toFixed(3))].join(""),t)}).on("mouseout",Y)})}):g.forEach(p=>{const b=v(p)??0;e.series.forEach((S,m)=>{const M=H(m,t),z=S.values[g.indexOf(p)]??0,E=b+(h(S.label)??0),$=h.bandwidth();y.append("rect").attr("x",E).attr("width",$).attr("y",k(Math.max(0,z))).attr("height",Math.abs(k(0)-k(z))).attr("fill",M).attr("opacity",t.violinOpacity).attr("stroke",M).attr("stroke-width",.5).attr("rx",2).on("mouseover",L=>{U(L,[V("Category",p),V("Series",S.label),V("Value",z.toFixed(3))].join(""),t)}).on("mouseout",Y)})}),y.append("g").attr("transform",`translate(0,${f})`).call(a.axisBottom(v)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("g").call(a.axisLeft(k).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("text").attr("x",l/2).attr("y",f+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),y.append("text").attr("transform","rotate(-90)").attr("x",-f/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),e.series.forEach((p,b)=>{const S=H(b,t),m=l-130,M=b*18+8;y.append("rect").attr("x",m).attr("y",M-9).attr("width",14).attr("height",10).attr("fill",S).attr("opacity",t.violinOpacity).attr("rx",2),y.append("text").attr("x",m+18).attr("y",M).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(p.label)}),r.caption&&J(c,r.caption,i,s,t)}function Xr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Qr(r,a,o,e))}function Qr(a,o,e,r){var S;if(e.series.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??420,s={top:t.marginTop,right:t.marginRight+20,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom,f=r.showArea??!1;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(c,r.title??"Line Chart",((S=e.testResult)==null?void 0:S.formatted)??"",n,t);const y=c.append("g").attr("transform",`translate(${s.left},${s.top})`),g=e.series.flatMap(m=>[...m.x]),w=e.series.flatMap(m=>[...m.y]),[u,F]=a.extent(g),[v,h]=a.extent(w),k=(F-u)*.05,x=(h-v)*.1,p=a.scaleLinear().domain([u-k,F+k]).range([0,d]).nice(),b=a.scaleLinear().domain([Math.min(0,v-x),h+x]).range([l,0]).nice();y.selectAll(".grid").data(b.ticks(5)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",m=>b(m)).attr("y2",m=>b(m)).attr("stroke",t.gridLine).attr("stroke-width",1),e.series.forEach((m,M)=>{if(m.x.length===0||m.y.length===0)return;const z=H(M,t),E=m.x.map((L,_)=>[L,m.y[_]??0]).sort((L,_)=>L[0]-_[0]);if(f){const L=a.area().x(_=>p(_[0])).y0(b(0)).y1(_=>b(_[1])).curve(a.curveCatmullRom);y.append("path").datum(E).attr("d",L).attr("fill",z).attr("opacity",t.ciOpacity)}const $=a.line().x(L=>p(L[0])).y(L=>b(L[1])).curve(a.curveCatmullRom);y.append("path").datum(E).attr("d",$).attr("fill","none").attr("stroke",z).attr("stroke-width",2),E.forEach(([L,_])=>{y.append("circle").attr("cx",p(L)).attr("cy",b(_)).attr("r",4).attr("fill",z).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",A=>{U(A,[V("Series",m.label),V("x",L.toFixed(3)),V("y",_.toFixed(3))].join(""),t)}).on("mouseout",Y)})}),y.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(p).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("g").call(a.axisLeft(b).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"x"),y.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"y"),e.series.length>1&&e.series.forEach((m,M)=>{const z=H(M,t),E=d-130,$=M*18+8;y.append("line").attr("x1",E).attr("x2",E+20).attr("y1",$).attr("y2",$).attr("stroke",z).attr("stroke-width",2),y.append("circle").attr("cx",E+10).attr("cy",$).attr("r",3).attr("fill",z).attr("stroke",t.background).attr("stroke-width",1),y.append("text").attr("x",E+24).attr("y",$+4).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(m.label)}),r.caption&&J(c,r.caption,n,i,t)}function Yr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Ur(r,a,o,e))}function Ur(a,o,e,r){var _;if(e.points.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??460,s={top:t.marginTop,right:t.marginRight+20,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Bubble Chart",((_=e.testResult)==null?void 0:_.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.points.map(A=>A.x),g=e.points.map(A=>A.y),w=e.points.map(A=>A.r),[u,F]=a.extent(y),[v,h]=a.extent(g),[k,x]=a.extent(w),p=(F-u)*.1,b=(h-v)*.1,S=a.scaleLinear().domain([u-p,F+p]).range([0,d]).nice(),m=a.scaleLinear().domain([v-b,h+b]).range([l,0]).nice(),M=x===k?A=>12:a.scaleSqrt().domain([k,x]).range([4,30]),z=[...new Set(e.points.map(A=>A.group??"__default__"))],E=A=>z.indexOf(A),$=!(z.length===1&&z[0]==="__default__");if(c.selectAll(".gridH").data(m.ticks(5)).join("line").attr("class","gridH").attr("x1",0).attr("x2",d).attr("y1",A=>m(A)).attr("y2",A=>m(A)).attr("stroke",t.gridLine).attr("stroke-width",1),[...e.points].sort((A,B)=>B.r-A.r).forEach(A=>{const B=A.group??"__default__",D=H(E(B),t),P=S(A.x),C=m(A.y),R=M(A.r);c.append("circle").attr("cx",P).attr("cy",C).attr("r",R).attr("fill",D).attr("opacity",t.pointOpacity).attr("stroke",D).attr("stroke-width",1.5).attr("stroke-opacity",.8).on("mouseover",T=>{const I=[V("x",A.x.toFixed(3)),V("y",A.y.toFixed(3)),V("size",A.r.toFixed(3))];A.label&&I.unshift(V("Label",A.label)),$&&A.group&&I.push(V("Group",A.group)),U(T,I.join(""),t)}).on("mouseout",Y),A.label&&R>16&&c.append("text").attr("x",P).attr("y",C+4).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.background).attr("pointer-events","none").text(A.label.slice(0,6))}),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(S).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(m).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"x"),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"y"),$&&z.forEach((A,B)=>{const D=H(B,t),P=d-130,C=B*18+8;c.append("circle").attr("cx",P+6).attr("cy",C).attr("r",5).attr("fill",D).attr("opacity",t.pointOpacity),c.append("text").attr("x",P+16).attr("y",C+4).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(A)}),x>k){const A=[k,(k+x)/2,x],B=16;let D=l-70;c.append("text").attr("x",B).attr("y",D-6).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text("Size:"),A.forEach(P=>{const C=M(P);c.append("circle").attr("cx",B+16).attr("cy",D+C).attr("r",C).attr("fill","none").attr("stroke",t.textMuted).attr("stroke-width",1),c.append("text").attr("x",B+36).attr("y",D+C+4).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textMuted).text(P.toFixed(1)),D+=C*2+10})}r.caption&&J(f,r.caption,n,i,t)}function Kr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Zr(r,a,o,e))}function Zr(a,o,e,r){var z,E;if(e.labels.length===0||e.values.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:64,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Pareto Chart",((z=e.testResult)==null?void 0:z.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=Array.from({length:e.labels.length},($,L)=>L).sort(($,L)=>(e.values[L]??0)-(e.values[$]??0)),g=y.reduce(($,L)=>$+(e.values[L]??0),0);let w=0;const u=y.map(($,L)=>{const _=e.values[$]??0,A=e.labels[$]??"";return w+=_,{label:A,value:_,cumPct:w/g*100,index:L}}),F=u.map($=>$.label),v=a.scaleBand().domain(F).range([0,d]).padding(.25),h=a.scaleLinear().domain([0,(((E=u[0])==null?void 0:E.value)??0)*1.1]).range([l,0]).nice(),k=a.scaleLinear().domain([0,100]).range([l,0]);c.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",$=>h($)).attr("y2",$=>h($)).attr("stroke",t.gridLine).attr("stroke-width",1);const x=H(0,t),p=H(1,t);c.selectAll(".bar").data(u).join("rect").attr("class","bar").attr("x",$=>v($.label)??0).attr("y",$=>h($.value)).attr("width",v.bandwidth()).attr("height",$=>l-h($.value)).attr("fill",x).attr("opacity",.85).on("mouseover",function($,L){U($,[V("Category",L.label),V("Value",L.value.toFixed(2)),V("Cumulative %",L.cumPct.toFixed(1)+"%")].join(""),t)}).on("mouseout",Y);const b=a.line().x($=>(v($.label)??0)+v.bandwidth()/2).y($=>k($.cumPct)).curve(a.curveMonotoneX);c.append("path").datum(u).attr("d",b).attr("fill","none").attr("stroke",p).attr("stroke-width",2.5),c.selectAll(".cum-dot").data(u).join("circle").attr("class","cum-dot").attr("cx",$=>(v($.label)??0)+v.bandwidth()/2).attr("cy",$=>k($.cumPct)).attr("r",4).attr("fill",p).attr("stroke",t.background).attr("stroke-width",1.5),c.append("line").attr("x1",0).attr("x2",d).attr("y1",k(80)).attr("y2",k(80)).attr("stroke","#D55E00").attr("stroke-width",1.5).attr("stroke-dasharray","6,4"),c.append("text").attr("x",d+4).attr("y",k(80)+4).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill","#D55E00").text("80%"),c.append("g").call(a.axisLeft(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").attr("transform",`translate(${d},0)`).call(a.axisRight(k).ticks(5).tickFormat($=>`${$}%`)).selectAll("text").attr("fill",p).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(v)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("text-anchor","end").attr("transform","rotate(-35)"),c.append("text").attr("x",d/2).attr("y",l+60).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Frequency"),c.append("text").attr("transform",`translate(${d+56},${l/2}) rotate(90)`).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",p).text("Cumulative %"),r.caption&&J(f,r.caption,n,i,t)}function Jr(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>to(r,a,o,e))}function to(a,o,e,r){var S;if(e.stages.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f="http://www.w3.org/2000/svg",c=document.createElementNS(f,"svg");c.setAttribute("width",String(n)),c.setAttribute("height",String(i)),c.style.background=t.background,o.appendChild(c);const y=document.createElementNS(f,"text");y.setAttribute("x",String(n/2)),y.setAttribute("y","20"),y.setAttribute("text-anchor","middle"),y.setAttribute("font-family",t.fontFamily),y.setAttribute("font-size",String(t.fontSizeTitle)),y.setAttribute("font-weight","600"),y.setAttribute("fill",t.text),y.textContent=r.title??"Funnel Chart",c.appendChild(y);const g=document.createElementNS(f,"text");g.setAttribute("x",String(n/2)),g.setAttribute("y","38"),g.setAttribute("text-anchor","middle"),g.setAttribute("font-family",t.fontFamilyMono??t.fontFamily),g.setAttribute("font-size",String(t.fontSizeSmall)),g.setAttribute("fill",t.textMuted),g.textContent=((S=e.testResult)==null?void 0:S.formatted)??"",c.appendChild(g);const w=Math.max(...e.stages.map(m=>m.value)),u=e.stages.length,F=l/u,v=2,h=110,x=d-h-110,p=s.left+h,b=s.top;if(e.stages.forEach((m,M)=>{const z=H(M,t),E=m.value/w*x,$=M+1<e.stages.length?e.stages[M+1]:void 0,L=$!=null?$.value/w*x:E*.6,_=b+M*F,A=b+(M+1)*F-v,B=p+(x-E)/2,D=p+(x+E)/2,P=p+(x-L)/2,C=p+(x+L)/2,R=`M ${B},${_} L ${D},${_} L ${C},${A} L ${P},${A} Z`,T=document.createElementNS(f,"path");T.setAttribute("d",R),T.setAttribute("fill",z),T.setAttribute("opacity","0.85"),T.addEventListener("mouseover",et=>{const rt=(m.value/w*100).toFixed(1),st=M>0?e.stages[M-1]:void 0,ht=st!=null?((st.value-m.value)/st.value*100).toFixed(1):"—";U(et,[V("Stage",m.label),V("Value",m.value.toFixed(0)),V("% of Max",rt+"%"),V("Drop from prev",ht==="—"?ht:ht+"%")].join(""),t)}),T.addEventListener("mouseout",Y),c.appendChild(T);const I=_+F/2,q=document.createElementNS(f,"text");q.setAttribute("x",String(s.left+h-8)),q.setAttribute("y",String(I)),q.setAttribute("text-anchor","end"),q.setAttribute("dominant-baseline","middle"),q.setAttribute("font-family",t.fontFamily),q.setAttribute("font-size",String(t.fontSize)),q.setAttribute("fill",t.text),q.textContent=m.label,c.appendChild(q);const j=(m.value/w*100).toFixed(0),W=M>0?e.stages[M-1]:void 0,O=W!=null?`−${((W.value-m.value)/W.value*100).toFixed(0)}%`:"",X=document.createElementNS(f,"text");if(X.setAttribute("x",String(p+x+8)),X.setAttribute("y",String(I-(O?7:0))),X.setAttribute("dominant-baseline","middle"),X.setAttribute("font-family",t.fontFamilyMono??t.fontFamily),X.setAttribute("font-size",String(t.fontSize)),X.setAttribute("fill",t.text),X.textContent=`${m.value.toLocaleString()} (${j}%)`,c.appendChild(X),O){const et=document.createElementNS(f,"text");et.setAttribute("x",String(p+x+8)),et.setAttribute("y",String(I+9)),et.setAttribute("dominant-baseline","middle"),et.setAttribute("font-family",t.fontFamily),et.setAttribute("font-size",String(t.fontSizeSmall)),et.setAttribute("fill","#D55E00"),et.textContent=O,c.appendChild(et)}}),r.caption){const m=document.createElementNS(f,"text");m.setAttribute("x",String(n/2)),m.setAttribute("y",String(i-6)),m.setAttribute("text-anchor","middle"),m.setAttribute("font-family",t.fontFamily),m.setAttribute("font-size",String(t.fontSizeSmall-1)),m.setAttribute("fill",t.textMuted),m.style.fontStyle="italic",m.textContent=r.caption,c.appendChild(m)}}function Ke(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>eo(r,a,o,e))}function eo(a,o,e,r){var m;if(e.slices.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft};o.innerHTML="",Q(o,t);const d=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(d,r.title??"Pie Chart",((m=e.testResult)==null?void 0:m.formatted)??"",n,t);const l=Math.ceil(e.slices.length/3)*22,f=i-s.top-s.bottom-l,c=n/2,y=s.top+f/2,g=Math.min(n/2,f/2)*.72,w=r.donut??!1?g*.55:0,u=e.slices.reduce((M,z)=>M+z.value,0),F=a.pie().value(M=>M.value).sort(null),v=a.arc().innerRadius(w).outerRadius(g),h=a.arc().innerRadius(g*1.15).outerRadius(g*1.15),k=a.arc().innerRadius(g*.85).outerRadius(g*.85),x=F(e.slices),p=d.append("g").attr("transform",`translate(${c},${y})`);x.forEach((M,z)=>{const E=H(z,t),$=(M.data.value/u*100).toFixed(1);p.append("path").attr("d",v(M)??"").attr("fill",E).attr("opacity",.88).attr("stroke",t.background).attr("stroke-width",2).on("mouseover",function(P){U(P,[V("Label",M.data.label),V("Value",M.data.value.toFixed(2)),V("Percentage",$+"%")].join(""),t)}).on("mouseout",Y);const _=(M.startAngle+M.endAngle)/2<Math.PI,A=h.centroid(M),B=k.centroid(M),D=_?g*1.35:-g*1.35;if(M.data.value/u>.03){p.append("polyline").attr("points",[B,A,[D,A[1]]].map(C=>C.join(",")).join(" ")).attr("fill","none").attr("stroke",t.textMuted).attr("stroke-width",1);const P=r.showPercentages??!0?`${M.data.label} (${$}%)`:M.data.label;p.append("text").attr("x",_?D+4:D-4).attr("y",A[1]).attr("dominant-baseline","middle").attr("text-anchor",_?"start":"end").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(P)}}),(r.donut??!1)&&p.append("text").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize+2).attr("font-weight","600").attr("fill",t.text).text(`n = ${u.toFixed(0)}`);const b=s.top+f+12,S=n/3;e.slices.forEach((M,z)=>{const E=z%3,$=Math.floor(z/3),L=E*S+16,_=b+$*22;d.append("rect").attr("x",L).attr("y",_).attr("width",12).attr("height",12).attr("fill",H(z,t)).attr("rx",2),d.append("text").attr("x",L+16).attr("y",_+9).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(M.label)}),r.caption&&J(d,r.caption,n,i,t)}function ao(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>ro(r,a,o,e))}function ro(a,o,e,r){var k;if(e.series.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Area Chart",((k=e.testResult)==null?void 0:k.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.series.flatMap(x=>[...x.x]),g=Math.min(...y),w=Math.max(...y),u=a.scaleLinear().domain([g,w]).range([0,d]),F=r.stacked??!1;let v;if(F){const p=[...new Set(y)].sort((b,S)=>b-S).map(b=>e.series.reduce((S,m)=>{const M=m.x.indexOf(b);return S+(M>=0?m.y[M]??0:0)},0));v=Math.max(...p)}else v=Math.max(...e.series.flatMap(x=>[...x.y]));const h=a.scaleLinear().domain([0,v*1.1]).range([l,0]).nice();if(c.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",x=>h(x)).attr("y2",x=>h(x)).attr("stroke",t.gridLine).attr("stroke-width",1),F){const x=[...new Set(y)].sort((b,S)=>b-S),p=new Map;x.forEach(b=>p.set(b,0)),e.series.forEach((b,S)=>{const m=H(S,t),M=b.x.map((E,$)=>({xVal:E,top:(p.get(E)??0)+(b.y[$]??0),bot:p.get(E)??0})),z=a.area().x(E=>u(E.xVal)).y0(E=>h(E.bot)).y1(E=>h(E.top)).curve(a.curveMonotoneX);c.append("path").datum(M).attr("d",z).attr("fill",m).attr("opacity",.75).attr("stroke",m).attr("stroke-width",1.5),b.x.forEach((E,$)=>{p.set(E,(p.get(E)??0)+(b.y[$]??0))})})}else e.series.forEach((x,p)=>{const b=H(p,t),S=x.x.map((z,E)=>({xVal:z,yVal:x.y[E]})).filter(z=>z.yVal!==void 0),m=a.area().x(z=>u(z.xVal)).y0(h(0)).y1(z=>h(z.yVal)).curve(a.curveMonotoneX),M=a.line().x(z=>u(z.xVal)).y(z=>h(z.yVal)).curve(a.curveMonotoneX);c.append("path").datum(S).attr("d",m).attr("fill",b).attr("opacity",.22),c.append("path").datum(S).attr("d",M).attr("fill","none").attr("stroke",b).attr("stroke-width",2.5),c.selectAll(`.dot-s${p}`).data(S).join("circle").attr("class",`dot-s${p}`).attr("cx",z=>u(z.xVal)).attr("cy",z=>h(z.yVal)).attr("r",3.5).attr("fill",b).attr("opacity",.7).on("mouseover",function(z,E){U(z,[V("Series",x.label),V("x",E.xVal.toFixed(3)),V("y",E.yVal.toFixed(3))].join(""),t)}).on("mouseout",Y)});c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(u).ticks(8)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"x"),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),e.series.forEach((x,p)=>{const b=s.left+p*130,S=i-18;f.append("rect").attr("x",b).attr("y",S-9).attr("width",12).attr("height",12).attr("fill",H(p,t)).attr("rx",2),f.append("text").attr("x",b+16).attr("y",S).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(x.label)}),r.caption&&J(f,r.caption,n,i,t)}function oo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>no(r,a,o,e))}function no(a,o,e,r){var L;if(e.studies.length===0)return;const t=r.theme??G,n=e.studies.length+(e.pooled!=null?2:0),i=28,s=t.marginTop+t.marginBottom+20,d=r.height??Math.max(n*i+s,320),l=r.width??Math.max(o.clientWidth||700,500),f=160,c=140,y=f+8,g=c+16,w={top:t.marginTop,right:g,bottom:t.marginBottom,left:y},u=l-w.left-w.right,F=n*i;o.innerHTML="",Q(o,t);const v=a.select(o).append("svg").attr("width",l).attr("height",d+w.top+w.bottom).style("background",t.background);Z(v,r.title??"Forest Plot",((L=e.testResult)==null?void 0:L.formatted)??"",l,t);const h=v.append("g").attr("transform",`translate(${w.left},${w.top})`),k=e.studies.map(_=>_.ciLow).concat(e.pooled!=null?[e.pooled.ciLow]:[]),x=e.studies.map(_=>_.ciHigh).concat(e.pooled!=null?[e.pooled.ciHigh]:[]),p=Math.min(...k),b=Math.max(...x),S=(b-p)*.12,m=a.scaleLinear().domain([p-S,b+S]).range([0,u]).nice(),M=e.studies.reduce((_,A)=>Math.max(_,A.weight??1),0),[z,E]=m.domain();z<=0&&E>=0&&h.append("line").attr("x1",m(0)).attr("x2",m(0)).attr("y1",0).attr("y2",F).attr("stroke",t.axisLine).attr("stroke-width",1).attr("stroke-dasharray","4,3"),v.append("text").attr("x",w.left-8).attr("y",w.top-6).attr("text-anchor","end").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-weight","600").attr("fill",t.textMuted).text("Study"),v.append("text").attr("x",l-g+8).attr("y",w.top-6).attr("text-anchor","start").attr("font-family",t.fontFamilyMono??t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-weight","600").attr("fill",t.textMuted).text("Estimate [95% CI]");const $=H(0,t);if(e.studies.forEach((_,A)=>{const B=A*i+i/2;h.append("line").attr("x1",m(_.ciLow)).attr("x2",m(_.ciHigh)).attr("y1",B).attr("y2",B).attr("stroke",$).attr("stroke-width",1.5);const D=5;[_.ciLow,_.ciHigh].forEach(R=>{h.append("line").attr("x1",m(R)).attr("x2",m(R)).attr("y1",B-D).attr("y2",B+D).attr("stroke",$).attr("stroke-width",1.5)});const P=_.weight!=null&&M>0?4+_.weight/M*6:6;h.append("rect").attr("x",m(_.estimate)-P/2).attr("y",B-P/2).attr("width",P).attr("height",P).attr("fill",$).on("mouseover",function(R){U(R,[V("Study",_.label),V("Estimate",_.estimate.toFixed(3)),V("95% CI",`[${_.ciLow.toFixed(3)}, ${_.ciHigh.toFixed(3)}]`),..._.weight!=null?[V("Weight",_.weight.toFixed(2))]:[]].join(""),t)}).on("mouseout",Y),v.append("text").attr("x",w.left-8).attr("y",w.top+B).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(_.label);const C=`${_.estimate.toFixed(2)} [${_.ciLow.toFixed(2)}, ${_.ciHigh.toFixed(2)}]`;v.append("text").attr("x",l-g+8).attr("y",w.top+B).attr("dominant-baseline","middle").attr("font-family",t.fontFamilyMono??t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(C)}),e.pooled!=null){const _=e.pooled,A=e.studies.length*i;h.append("line").attr("x1",0).attr("x2",u).attr("y1",A).attr("y2",A).attr("stroke",t.axisLine).attr("stroke-width",1);const B=A+i*1,D=H(4,t),P=m(_.ciLow),C=m(_.ciHigh),R=m(_.estimate),T=9,I=[`M ${R},${B-T}`,`L ${C},${B}`,`L ${R},${B+T}`,`L ${P},${B}`,"Z"].join(" ");h.append("path").attr("d",I).attr("fill",D).attr("opacity",.88).attr("stroke",D).attr("stroke-width",1).on("mouseover",function(j){U(j,[V("Pooled estimate",_.estimate.toFixed(3)),V("95% CI",`[${_.ciLow.toFixed(3)}, ${_.ciHigh.toFixed(3)}]`)].join(""),t)}).on("mouseout",Y),v.append("text").attr("x",w.left-8).attr("y",w.top+B).attr("text-anchor","end").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("font-weight","600").attr("fill",t.text).text("Pooled");const q=`${_.estimate.toFixed(2)} [${_.ciLow.toFixed(2)}, ${_.ciHigh.toFixed(2)}]`;v.append("text").attr("x",l-g+8).attr("y",w.top+B).attr("dominant-baseline","middle").attr("font-family",t.fontFamilyMono??t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-weight","600").attr("fill",t.text).text(q)}h.append("g").attr("transform",`translate(0,${F+8})`).call(a.axisBottom(m).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),h.append("text").attr("x",u/2).attr("y",F+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"Effect Size"),r.caption&&J(v,r.caption,l,d+w.top+w.bottom,t)}function so(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>io(r,a,o,e))}function io(a,o,e,r){var x;if(e.fpr.length===0||e.tpr.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||520,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background),c=`AUC = ${e.auc.toFixed(4)}`,y=(x=e.testResult)!=null&&x.formatted?`${e.testResult.formatted}   ${c}`:c;Z(f,r.title??"ROC Curve",y,n,t);const g=f.append("g").attr("transform",`translate(${s.left},${s.top})`),w=a.scaleLinear().domain([0,1]).range([0,d]),u=a.scaleLinear().domain([0,1]).range([l,0]);g.selectAll(".grid-h").data(u.ticks(5)).join("line").attr("class","grid-h").attr("x1",0).attr("x2",d).attr("y1",p=>u(p)).attr("y2",p=>u(p)).attr("stroke",t.gridLine).attr("stroke-width",1),g.append("line").attr("x1",w(0)).attr("y1",u(0)).attr("x2",w(1)).attr("y2",u(1)).attr("stroke",t.axisLine).attr("stroke-width",1.5).attr("stroke-dasharray","6,4");const F=e.fpr.map((p,b)=>({fprVal:p,tprVal:e.tpr[b]??0})).sort((p,b)=>p.fprVal-b.fprVal),v=H(0,t),h=a.area().x(p=>w(p.fprVal)).y0(u(0)).y1(p=>u(p.tprVal)).curve(a.curveLinear);g.append("path").datum(F).attr("d",h).attr("fill",v).attr("opacity",t.ciOpacity);const k=a.line().x(p=>w(p.fprVal)).y(p=>u(p.tprVal)).curve(a.curveLinear);g.append("path").datum(F).attr("d",k).attr("fill","none").attr("stroke",v).attr("stroke-width",2.5),g.selectAll(".roc-dot").data(F).join("circle").attr("class","roc-dot").attr("cx",p=>w(p.fprVal)).attr("cy",p=>u(p.tprVal)).attr("r",3).attr("fill",v).attr("opacity",.6).on("mouseover",function(p,b){U(p,[V("FPR",b.fprVal.toFixed(4)),V("TPR",b.tprVal.toFixed(4)),V("Specificity",(1-b.fprVal).toFixed(4)),V("Sensitivity",b.tprVal.toFixed(4))].join(""),t)}).on("mouseout",Y),g.append("rect").attr("x",8).attr("y",8).attr("width",130).attr("height",28).attr("fill",t.surface).attr("stroke",t.gridLine).attr("rx",4).attr("opacity",.9),g.append("text").attr("x",16).attr("y",26).attr("font-family",t.fontFamilyMono??t.fontFamily).attr("font-size",t.fontSize+1).attr("font-weight","600").attr("fill",v).text(`AUC = ${e.auc.toFixed(4)}`),g.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(w).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("g").call(a.axisLeft(u).ticks(5)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),g.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??"False Positive Rate"),g.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"True Positive Rate"),r.caption&&J(f,r.caption,n,i,t)}function lo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>co(r,a,o,e))}function co(a,o,e,r){var k;if(e.groups.length===0)return;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(f,r.title??"Strip Plot",((k=e.testResult)==null?void 0:k.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.groups.map(x=>x.label),g=e.groups.flatMap(x=>[...x.values]),w=Math.min(...g),u=Math.max(...g),F=(u-w)*.1,v=a.scaleBand().domain(y).range([0,d]).padding(.3),h=a.scaleLinear().domain([w-F,u+F]).range([l,0]).nice();c.selectAll(".grid").data(h.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",x=>h(x)).attr("y2",x=>h(x)).attr("stroke",t.gridLine).attr("stroke-width",1),e.groups.forEach((x,p)=>{if(x.values.length===0)return;const b=H(p,t),S=(v(x.label)??0)+v.bandwidth()/2,m=v.bandwidth()*.38,M=p*77773,z=x.values.reduce(($,L)=>$+L,0)/x.values.length;x.values.forEach(($,L)=>{const _=(mo(M+L*13+p)-.5)*m;c.append("circle").attr("cx",S+_).attr("cy",h($)).attr("r",3.5).attr("fill",b).attr("opacity",t.pointOpacity).on("mouseover",function(A){U(A,[V("Group",x.label),V("Value",$.toFixed(4)),V("Group mean",z.toFixed(4))].join(""),t)}).on("mouseout",Y)});const E=v.bandwidth()*.32;c.append("line").attr("x1",S-E).attr("x2",S+E).attr("y1",h(z)).attr("y2",h(z)).attr("stroke",b).attr("stroke-width",2.5).attr("opacity",.9),r.showN!==!1&&c.append("text").attr("x",S).attr("y",l+52).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text(`n = ${x.values.length}`)}),c.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(v)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("g").call(a.axisLeft(h).ticks(6)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),c.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),c.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),r.caption&&J(f,r.caption,n,i,t)}function mo(a){const o=Math.sin(a)*1e4;return o-Math.floor(o)}function ho(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>fo(r,a,o,e))}function fo(a,o,e,r){var x;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom,f=r.pointRadius??4;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(c,r.title??"Beeswarm Plot",((x=e.testResult)==null?void 0:x.formatted)??"",n,t);const y=c.append("g").attr("transform",`translate(${s.left},${s.top})`),g=e.groups.map(p=>p.label),w=a.scaleBand().domain(g).range([0,d]).padding(.3),u=e.groups.flatMap(p=>[...p.values]),[F,v]=a.extent(u),h=(v-F)*.08||1,k=a.scaleLinear().domain([F-h,v+h]).range([l,0]).nice();y.selectAll(".grid").data(k.ticks(6)).join("line").attr("class","grid").attr("x1",0).attr("x2",d).attr("y1",p=>k(p)).attr("y2",p=>k(p)).attr("stroke",t.gridLine).attr("stroke-width",1),y.append("g").attr("transform",`translate(0,${l})`).call(a.axisBottom(w)).call(p=>p.select(".domain").attr("stroke",t.axisLine)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("g").call(a.axisLeft(k).ticks(6)).call(p=>p.select(".domain").attr("stroke",t.axisLine)).selectAll("text").attr("fill",t.text).attr("font-family",t.fontFamily).attr("font-size",t.fontSize),y.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel??""),y.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel??"Value"),e.groups.forEach((p,b)=>{const S=H(b,t),m=(w(p.label)??0)+w.bandwidth()/2,M=w.bandwidth()/2-f;if(po([...p.values],k,f,M).forEach(({value:E,xOffset:$})=>{y.append("circle").attr("cx",m+$).attr("cy",k(E)).attr("r",f).attr("fill",S).attr("opacity",t.pointOpacity).attr("stroke",t.background).attr("stroke-width",.5).on("mouseover",L=>{U(L,[V("Group",p.label),V("Value",E.toFixed(4))].join(""),t)}).on("mouseout",Y)}),r.showMean){const E=p.values.reduce((_,A)=>_+A,0)/p.values.length,$=k(E),L=5;y.append("polygon").attr("points",`${m},${$-L} ${m+L},${$} ${m},${$+L} ${m-L},${$}`).attr("fill","white").attr("stroke",S).attr("stroke-width",1.5),y.append("text").attr("x",m+L+4).attr("y",$+3.5).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textAnnotation).text(E.toFixed(2))}r.showN!==!1&&c.append("text").attr("x",s.left+m).attr("y",i-t.marginBottom+28).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text(`n = ${p.values.length}`)}),r.caption&&J(c,r.caption,n,i,t)}function po(a,o,e,r){const t=a.slice().sort((d,l)=>d-l),n=[],i=e*2+.5;return t.map(d=>{const l=o(d);let f=0,c=!1;for(let y=0;y<=Math.ceil(r/i)+1;y++){const g=y===0?[0]:[y*i,-y*i];for(const w of g){if(Math.abs(w)>r)continue;if(!n.some(F=>{const v=w-F.xOffset,h=l-F.y;return Math.sqrt(v*v+h*h)<i})){f=w,c=!0;break}}if(c)break}return n.push({y:l,xOffset:f}),{value:d,xOffset:f}})}const Ht=[{lo:4,hi:1/0,fill:"#2166ac",label:"> 4",borderStyle:"thick"},{lo:2,hi:4,fill:"#74add1",label:"2 : 4",borderStyle:"dashed"},{lo:0,hi:2,fill:"#d1e5f0",label:"0 : 2",borderStyle:"none"},{lo:-2,hi:0,fill:"#fddbc7",label:"−2 : 0",borderStyle:"none"},{lo:-4,hi:-2,fill:"#d6604d",label:"−4 : −2",borderStyle:"dashed"},{lo:-1/0,hi:-4,fill:"#b2182b",label:"< −4",borderStyle:"thick"}];function uo(a){return Ht.find(o=>a>=o.lo&&a<o.hi)??Ht[2]}function xo(a){return["#2166ac","#b2182b","#d6604d"].includes(a)?"#ffffff":"#212529"}function go(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>yo(r,a,o,e))}function yo(a,o,e,r){var M,z;const t=r.theme??G,n=110,i=r.width??Math.max(o.clientWidth||620,420),s=r.height??480,d={top:t.marginTop,right:t.marginRight+n,bottom:t.marginBottom,left:t.marginLeft},l=i-d.left-d.right,f=s-d.top-d.bottom;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",i).attr("height",s).attr("viewBox",`0 0 ${i} ${s}`).style("background",t.background);Z(c,r.title??"Mosaic Plot",((M=e.testResult)==null?void 0:M.formatted)??"",i,t);const y=c.append("g").attr("transform",`translate(${d.left},${d.top})`),g=e.table.length,w=((z=e.table[0])==null?void 0:z.length)??0;if(g===0||w===0)return;const u=Array.from({length:w},(E,$)=>e.table.reduce((L,_)=>L+(_[$]??0),0)),F=u.reduce((E,$)=>E+$,0),v=e.table.map(E=>E.reduce(($,L)=>$+L,0)),h=e.table.map((E,$)=>E.map((L,_)=>{const A=v[$]*u[_]/F;return A>0?(L-A)/Math.sqrt(A):0})),k=3,x=u.map(E=>E/F*l),p=[];x.reduce((E,$,L)=>(p[L]=E,E+$),0),e.table.forEach((E,$)=>{E.forEach((L,_)=>{const A=u[_]??1,B=A>0?L/A*f:0,D=e.table.slice(0,$).reduce((X,et)=>X+(et[_]??0),0),P=A>0?D/A*f:0,C=p[_]??0,R=x[_]??0,T=h[$][_],I=uo(T),q=C+k/2,j=P+k/2,W=Math.max(R-k,0),O=Math.max(B-k,0);if(y.append("rect").attr("x",q).attr("y",j).attr("width",W).attr("height",O).attr("fill",I.fill).attr("stroke","none"),I.borderStyle!=="none"){const X=I.borderStyle==="thick";y.append("rect").attr("x",q).attr("y",j).attr("width",W).attr("height",O).attr("fill","none").attr("stroke",X?T>0?"#08519c":"#a50f15":T>0?"#4292c6":"#cb181d").attr("stroke-width",X?2.5:1.5).attr("stroke-dasharray",X?"none":"5,2")}y.append("rect").attr("x",q).attr("y",j).attr("width",W).attr("height",O).attr("fill","transparent").on("mouseover",X=>{U(X,[V("Row",e.rowLabels[$]??`Row ${$}`),V("Column",e.colLabels[_]??`Col ${_}`),V("Count",L),V("Residual",T.toFixed(2)),V("Bin",I.label)].join(""),t)}).on("mouseout",Y),W>30&&O>16&&y.append("text").attr("x",q+W/2).attr("y",j+O/2+4).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",Math.min(t.fontSizeSmall,O*.38,W*.22)).attr("fill",xo(I.fill)).attr("pointer-events","none").text(String(L))})}),p.forEach((E,$)=>{const L=x[$]??0;y.append("text").attr("x",E+L/2).attr("y",f+18).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(e.colLabels[$]??`Col ${$}`)}),e.table.forEach((E,$)=>{const L=u[0]??1,_=e.table.slice(0,$).reduce((D,P)=>D+(P[0]??0),0),A=L>0?_/L*f:0,B=L>0?(E[0]??0)/L*f:0;y.append("text").attr("x",-8).attr("y",A+B/2+4).attr("text-anchor","end").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(e.rowLabels[$]??`Row ${$}`)}),r.xLabel&&y.append("text").attr("x",l/2).attr("y",f+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel),r.yLabel&&y.append("text").attr("transform","rotate(-90)").attr("x",-f/2).attr("y",-52).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel);const b=l+20,S=f/2-Ht.length*22/2,m=14;y.append("text").attr("x",b).attr("y",S-14).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("font-weight","600").attr("fill",t.text).text("Standardised"),y.append("text").attr("x",b).attr("y",S-2).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("font-weight","600").attr("fill",t.text).text("residual"),Ht.forEach((E,$)=>{const L=S+$*22;y.append("rect").attr("x",b).attr("y",L).attr("width",m).attr("height",m).attr("fill",E.fill).attr("rx",2),E.borderStyle!=="none"&&y.append("rect").attr("x",b).attr("y",L).attr("width",m).attr("height",m).attr("fill","none").attr("rx",2).attr("stroke",E.fill==="#2166ac"||E.fill==="#74add1"?"#4292c6":"#cb181d").attr("stroke-width",E.borderStyle==="thick"?2:1.5).attr("stroke-dasharray",E.borderStyle==="thick"?"none":"4,2"),y.append("text").attr("x",b+m+6).attr("y",L+m-3).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.text).text(E.label)}),r.caption&&J(c,r.caption,i,s,t)}function bo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>wo(r,a,o,e))}function wo(a,o,e,r){var x;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??Math.max(n,480),s=52,d=r.caption?28:16,l=16;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(f,r.title??"Scatter Matrix",((x=e.testResult)==null?void 0:x.formatted)??"",n,t);const c=e.labels.length;if(c<2)return;const y=n-l*2,g=i-s-d,w=y/c,u=g/c,F=6,v=e.data.map(p=>{const[b,S]=a.extent(p),m=(S-b)*.08||.5;return a.scaleLinear().domain([b-m,S+m]).range([F,w-F]).nice()}),h=e.data.map(p=>{const[b,S]=a.extent(p),m=(S-b)*.08||.5;return a.scaleLinear().domain([b-m,S+m]).range([u-F,F]).nice()}),k=f.append("g").attr("transform",`translate(${l},${s})`);for(let p=0;p<c;p++)for(let b=0;b<c;b++){const S=b*w,m=p*u,M=k.append("g").attr("transform",`translate(${S},${m})`);if(M.append("rect").attr("width",w).attr("height",u).attr("fill",p===b?t.surface:t.background).attr("stroke",t.gridLine).attr("stroke-width",.5),p===b)vo(a,M,e.data[p],v[b],w,u,F,H(p,t)),M.append("text").attr("x",w/2).attr("y",F+10).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",Math.min(t.fontSizeSmall,w/8)).attr("font-weight","600").attr("fill",t.text).text(e.labels[p]??"");else{const z=e.data[b],E=e.data[p],$=v[b],L=h[p],_=Math.min(z.length,E.length);for(let B=0;B<_;B++){const D=z[B],P=E[B];M.append("circle").attr("cx",$(D)).attr("cy",L(P)).attr("r",Math.min(2.5,w/40)).attr("fill",H(b,t)).attr("opacity",t.pointOpacity).on("mouseover",C=>{U(C,[V(e.labels[b]??`Var ${b}`,D.toFixed(3)),V(e.labels[p]??`Var ${p}`,P.toFixed(3))].join(""),t)}).on("mouseout",Y)}const A=Mo(z.slice(0,_),E.slice(0,_));M.append("text").attr("x",w-F-2).attr("y",u-F-2).attr("text-anchor","end").attr("font-family",t.fontFamilyMono).attr("font-size",Math.min(t.fontSizeSmall-1,w/9)).attr("fill",t.textMuted).text(`r=${A.toFixed(2)}`)}}r.caption&&J(f,r.caption,n,i,t)}function vo(a,o,e,r,t,n,i,s,d){const l=a.bin().domain(r.domain()).thresholds(8)([...e]),f=Math.max(...l.map(y=>y.length)),c=a.scaleLinear().domain([0,f]).range([n-i-14,i+14]);l.forEach(y=>{const g=r(y.x0??0),w=r(y.x1??0),u=Math.max(w-g-1,1);o.append("rect").attr("x",g).attr("y",c(y.length)).attr("width",u).attr("height",Math.max(n-i-14-c(y.length),0)).attr("fill",s).attr("opacity",.6)})}function Mo(a,o){const e=a.length;if(e<2)return 0;const r=a.reduce((l,f)=>l+f,0)/e,t=o.reduce((l,f)=>l+f,0)/e;let n=0,i=0,s=0;for(let l=0;l<e;l++){const f=a[l]-r,c=o[l]-t;n+=f*c,i+=f*f,s+=c*c}const d=Math.sqrt(i*s);return d===0?0:n/d}function So(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>ko(r,a,o,e))}function ko(a,o,e,r){var p;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s=r.levels??5;o.innerHTML="",Q(o,t);const d=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(d,r.title??"Radar Chart",((p=e.testResult)==null?void 0:p.formatted)??"",n,t);const l=e.axes.length;if(l<3||e.series.length===0)return;const f=120,c=(n-f)/2,y=(i-t.marginTop-32)/2+t.marginTop+8,g=Math.min((n-f)/2,(i-t.marginTop-48)/2)*.72,w=d.append("g"),u=Array.from({length:l},(b,S)=>Math.min(...e.series.map(m=>m.values[S]??0))),F=Array.from({length:l},(b,S)=>Math.max(...e.series.map(m=>m.values[S]??0))),v=(b,S)=>{const m=u[S],M=F[S];return M===m?.5:(b-m)/(M-m)},h=b=>b/l*2*Math.PI-Math.PI/2,k=(b,S)=>{const m=h(S);return[c+g*b*Math.cos(m),y+g*b*Math.sin(m)]};for(let b=1;b<=s;b++){const S=b/s,m=Array.from({length:l},(M,z)=>k(S,z));w.append("polygon").attr("points",m.map(([M,z])=>`${M},${z}`).join(" ")).attr("fill","none").attr("stroke",t.gridLine).attr("stroke-width",1)}Array.from({length:l},(b,S)=>{const[m,M]=k(1,S);w.append("line").attr("x1",c).attr("y1",y).attr("x2",m).attr("y2",M).attr("stroke",t.gridLine).attr("stroke-width",1)}),e.axes.forEach((b,S)=>{const m=h(S),M=g*1.15,z=c+M*Math.cos(m),E=y+M*Math.sin(m);let $="middle";Math.cos(m)>.1?$="start":Math.cos(m)<-.1&&($="end"),w.append("text").attr("x",z).attr("y",E+4).attr("text-anchor",$).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(b)}),e.series.forEach((b,S)=>{const m=H(S,t),M=e.axes.map((z,E)=>{const $=v(b.values[E]??0,E);return k($,E)});w.append("polygon").attr("points",M.map(([z,E])=>`${z},${E}`).join(" ")).attr("fill",m).attr("fill-opacity",t.ciOpacity+.05).attr("stroke",m).attr("stroke-width",2),M.forEach(([z,E],$)=>{w.append("circle").attr("cx",z).attr("cy",E).attr("r",4).attr("fill",m).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",L=>{U(L,[V("Series",b.label),V("Axis",e.axes[$]??`Axis ${$}`),V("Value",(b.values[$]??0).toFixed(3))].join(""),t)}).on("mouseout",Y)})});const x=n-f+8;e.series.forEach((b,S)=>{const m=H(S,t),M=t.marginTop+S*22;w.append("rect").attr("x",x).attr("y",M).attr("width",12).attr("height",12).attr("fill",m).attr("opacity",.8).attr("rx",2),w.append("text").attr("x",x+16).attr("y",M+10).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(b.label.length>14?b.label.slice(0,13)+"…":b.label)}),r.caption&&J(d,r.caption,n,i,t)}function Lo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Fo(r,a,o,e))}function Fo(a,o,e,r){var u;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||700,400),i=r.height??480,s={top:t.marginTop+16,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(f,r.title??"Parallel Coordinates",((u=e.testResult)==null?void 0:u.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`),y=e.axes.length;if(y<2||e.rows.length===0)return;const g=F=>F/(y-1)*d,w=e.axes.map((F,v)=>{const h=e.rows.map(b=>b[v]??0),[k,x]=a.extent(h),p=(x-k)*.05||.5;return a.scaleLinear().domain([k-p,x+p]).range([l,0]).nice()});e.rows.forEach((F,v)=>{var p;const h=((p=e.groups)==null?void 0:p[v])??0,k=H(h,t),x=e.axes.map((b,S)=>{const m=F[S]??0;return[g(S),w[S](m)]});c.append("path").attr("d",$o(x)).attr("fill","none").attr("stroke",k).attr("stroke-width",1.2).attr("opacity",Math.max(.1,Math.min(.55,30/e.rows.length))).on("mouseover",b=>{const S=e.axes.map((m,M)=>V(m,(F[M]??0).toFixed(3)));U(b,S.join(""),t)}).on("mouseout",Y)}),e.axes.forEach((F,v)=>{const h=g(v),k=w[v];c.append("line").attr("x1",h).attr("x2",h).attr("y1",0).attr("y2",l).attr("stroke",t.axisLine).attr("stroke-width",1.5),k.ticks(5).forEach(p=>{c.append("line").attr("x1",h-4).attr("x2",h+4).attr("y1",k(p)).attr("y2",k(p)).attr("stroke",t.axisLine).attr("stroke-width",1),c.append("text").attr("x",h-6).attr("y",k(p)+4).attr("text-anchor","end").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textMuted).text(p.toFixed(1))}),c.append("text").attr("x",h).attr("y",-10).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-weight","600").attr("fill",t.text).text(F)}),e.groups&&Array.from(new Set(e.groups)).sort((v,h)=>v-h).forEach((v,h)=>{const x=l+32+h*18;c.append("rect").attr("x",0).attr("y",x).attr("width",10).attr("height",10).attr("fill",H(v,t)).attr("rx",2),c.append("text").attr("x",14).attr("y",x+9).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(`Group ${v}`)}),r.caption&&J(f,r.caption,n,i,t)}function $o(a){return a.length===0?"":a.map(([o,e],r)=>`${r===0?"M":"L"}${o.toFixed(2)},${e.toFixed(2)}`).join(" ")}function zo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Ao(r,a,o,e))}function Ao(a,o,e,r){var h;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??480,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom;o.innerHTML="",Q(o,t);const f=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(f,r.title??"Treemap",((h=e.testResult)==null?void 0:h.formatted)??"",n,t);const c=f.append("g").attr("transform",`translate(${s.left},${s.top})`);if(e.children.length===0)return;const y=Array.from(new Set(e.children.map(k=>k.group??""))).filter(Boolean),g=new Map(y.map((k,x)=>[k,H(x,t)])),w=e.children.reduce((k,x)=>k+x.value,0),u=a.hierarchy({children:e.children}).sum(k=>k.value??0).sort((k,x)=>(x.value??0)-(k.value??0));a.treemap().size([d,l]).paddingInner(2).paddingOuter(0).round(!0)(u),u.leaves().forEach((k,x)=>{const p=k.data,b=k.x0,S=k.y0,m=k.x1,M=k.y1,z=m-b,E=M-S,$=p.group&&g.has(p.group)?g.get(p.group):H(x,t),L=w>0?p.value/w*100:0,_=c.append("g").attr("transform",`translate(${b},${S})`);if(_.append("rect").attr("width",z).attr("height",E).attr("fill",$).attr("opacity",.75).attr("stroke",t.background).attr("stroke-width",2).attr("rx",2).on("mouseover",A=>{U(A,[V("Label",p.label),V("Value",p.value.toFixed(2)),V("Share",`${L.toFixed(1)}%`),...p.group?[V("Group",p.group)]:[]].join(""),t)}).on("mouseout",Y),z>30&&E>16){const A=Math.max(3,Math.floor(z/7)),B=p.label.length>A?p.label.slice(0,A-1)+"…":p.label;_.append("text").attr("x",5).attr("y",14).attr("font-family",t.fontFamily).attr("font-size",Math.min(t.fontSizeSmall,E/3)).attr("font-weight","600").attr("fill","#fff").attr("pointer-events","none").text(B),E>28&&_.append("text").attr("x",5).attr("y",26).attr("font-family",t.fontFamily).attr("font-size",Math.min(t.fontSizeSmall-2,E/4)).attr("fill","rgba(255,255,255,0.75)").attr("pointer-events","none").text(`${L.toFixed(1)}%`)}}),y.length>0&&y.forEach((k,x)=>{const b=l+24+x*18;b+12>i-s.top-4||(c.append("rect").attr("x",0).attr("y",b).attr("width",12).attr("height",12).attr("fill",g.get(k)??t.gridLine).attr("rx",2),c.append("text").attr("x",16).attr("y",b+10).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(k))}),r.caption&&J(f,r.caption,n,i,t)}function Eo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>_o(r,a,o,e))}function _o(a,o,e,r){var $;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||400,300),i=r.height??420;o.innerHTML="",Q(o,t);const s=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);if(Z(s,r.title??"Waffle Chart",(($=e.testResult)==null?void 0:$.formatted)??"",n,t),e.slices.length===0)return;const d=e.slices.reduce((L,_)=>L+_.value,0);if(d===0)return;const l=e.slices.map(L=>L.value/d*100),f=l.map(L=>Math.floor(L)),c=l.map((L,_)=>L-f[_]);let y=100-f.reduce((L,_)=>L+_,0);const g=Array.from({length:e.slices.length},(L,_)=>_).sort((L,_)=>c[_]-c[L]),w=[...f];for(let L=0;L<y;L++)w[g[L%g.length]]+=1;const u=[];w.forEach((L,_)=>{for(let A=0;A<L;A++)u.push(_)});const F=Math.ceil(e.slices.length/3)*22+12,v=i-t.marginTop-F-16,h=n-t.marginLeft-t.marginRight,k=Math.min(Math.floor(v/10),Math.floor(h/10)),x=Math.max(2,Math.floor(k/8)),p=k*10+x*9,b=k*10+x*9,S=(n-p)/2,m=t.marginTop+8,M=s.append("g");for(let L=0;L<10;L++)for(let _=0;_<10;_++){const A=L*10+_,B=u[A]??0,D=H(B,t),P=S+_*(k+x),C=m+L*(k+x),R=e.slices[B];M.append("rect").attr("x",P).attr("y",C).attr("width",k).attr("height",k).attr("fill",D).attr("opacity",.85).attr("rx",Math.max(1,k/8)).on("mouseover",T=>{U(T,[V("Slice",R.label),V("Value",R.value.toFixed(2)),V("Share",`${(R.value/d*100).toFixed(1)}%`)].join(""),t)}).on("mouseout",Y)}const z=m+b+20,E=Math.floor(n/3);e.slices.forEach((L,_)=>{const A=Math.floor(_/3),D=_%3*E+12,P=z+A*22,C=H(_,t),R=(L.value/d*100).toFixed(1);M.append("rect").attr("x",D).attr("y",P).attr("width",12).attr("height",12).attr("fill",C).attr("opacity",.85).attr("rx",2);const T=L.label.length>14?L.label.slice(0,13)+"…":L.label;M.append("text").attr("x",D+16).attr("y",P+10).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.text).text(`${T} (${R}%)`)}),r.caption&&J(s,r.caption,n,i,t)}function fe(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Co(r,a,o,e))}function Co(a,o,e,r){const t=r.theme??G,n=r.width??Math.max(o.clientWidth||200,80),i=r.height??80,s=8;o.innerHTML="",Q(o,t);const d=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background),l=[...e.values];if(l.length<2){if(l.length===1){const k=H(0,t);d.append("circle").attr("cx",n/2).attr("cy",i/2).attr("r",3).attr("fill",k)}return}const f=H(0,t),[c,y]=a.extent(l),g=(y-c)*.1||1,w=a.scaleLinear().domain([0,l.length-1]).range([s,n-s]),u=a.scaleLinear().domain([c-g,y+g]).range([i-s,s]),F=l.map((k,x)=>[x,k]);if(r.showArea!==!1){const k=a.area().x(x=>w(x[0])).y0(i-s).y1(x=>u(x[1])).curve(a.curveCatmullRom);d.append("path").datum(F).attr("d",k).attr("fill",f).attr("opacity",t.ciOpacity)}const v=a.line().x(k=>w(k[0])).y(k=>u(k[1])).curve(a.curveCatmullRom);d.append("path").datum(F).attr("d",v).attr("fill","none").attr("stroke",f).attr("stroke-width",1.5);const h=l[l.length-1];d.append("circle").attr("cx",w(l.length-1)).attr("cy",u(h)).attr("r",3).attr("fill",f).attr("stroke",t.background).attr("stroke-width",1.5)}function Po(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Ro(r,a,o,e))}function Ro(a,o,e,r){var _;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||640,400),i=r.height??520,s=r.maxDepth??4,d=r.innerRadius??.25;o.innerHTML="",Q(o,t);const l=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(l,r.title??"Sunburst Chart",((_=e.testResult)==null?void 0:_.formatted)??"",n,t);const f=r.caption?24:0,y=n-150-8,g=i-t.marginTop-t.marginBottom-f,w=t.marginLeft+(y-t.marginLeft)/2,u=t.marginTop+g/2,F=Math.min(y-t.marginLeft,g)/2-4,v=F*d;if(F<=0)return;const h=a.hierarchy(e.root,A=>A.children).sum(A=>A.value??0),k=h.value??0,p=a.partition().size([2*Math.PI,F])(h),b=p.descendants(),S=new Map;p.eachBefore(A=>{const B=A,D=B.parent;if(D!==null){const C=(D.children??[]).indexOf(B);S.set(B,C>=0?C:0)}});const m=a.arc().startAngle(A=>A.x0).endAngle(A=>A.x1).innerRadius(A=>Math.max(A.y0,v)).outerRadius(A=>A.y1).padAngle(.005).padRadius(F/2),M=l.append("g").attr("transform",`translate(${w},${u})`),z=b.filter(A=>A.depth===1);b.forEach(A=>{var W;if(A.depth===0||A.depth>s||A.y0<v)return;const B=S.get(A)??0,D=(A.depth-1+B)%8,P=H(D,t),C=Math.max(.4,1-A.depth*.15),R=A.x1-A.x0,T=A.y1-A.y0,I=A.value??0,q=((W=A.parent)==null?void 0:W.value)??0,j=q>0?(I/q*100).toFixed(1):"—";if(M.append("path").datum(A).attr("d",m).attr("fill",P).attr("opacity",C).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",O=>{U(O,[V("Name",A.data.name),V("Value",I.toLocaleString()),V("% of parent",j+"%"),V("Depth",String(A.depth))].join(""),t)}).on("mouseout",Y),R>.15&&T>20){const O=(A.x0+A.x1)/2,X=(Math.max(A.y0,v)+A.y1)/2,et=O*180/Math.PI-90,rt=O>Math.PI,st=rt?et+180:et,ht=Math.max(2,Math.floor(R*X/7)),$t=A.data.name.length>ht?A.data.name.slice(0,ht-1)+"…":A.data.name;M.append("text").attr("transform",`rotate(${st}) translate(${X},0) rotate(${rt?180:0})`).attr("text-anchor","middle").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",Math.min(t.fontSizeSmall,T*.5)).attr("fill","#fff").attr("pointer-events","none").text($t)}}),v>12&&(M.append("text").attr("text-anchor","middle").attr("dominant-baseline","auto").attr("y",-4).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeTitle).attr("font-weight","700").attr("fill",t.text).text(k.toLocaleString()),M.append("text").attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("y",6).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text("total"));const E=w+F+16,$=t.marginTop+8,L=20;z.forEach((A,B)=>{const P=(S.get(A)??0)%8,C=H(P,t),R=$+B*L;if(R+L>i-t.marginBottom-f)return;l.append("rect").attr("x",E).attr("y",R).attr("width",12).attr("height",12).attr("fill",C).attr("rx",2);const T=Math.max(3,Math.floor((n-E-28)/7)),I=A.data.name,q=I.length>T?I.slice(0,T-1)+"…":I;l.append("text").attr("x",E+16).attr("y",R+10).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(q)}),r.caption&&J(l,r.caption,n,i,t)}function Vo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Bo(r,a,o,e))}function Bo(a,o,e,r){var $;if(e.categories.length===0||e.series.length===0)return;const t=r.theme??G,n=r.showPercentLabels!==!1,i=r.showValueLabels===!0,s=130,d=6,l=44,f=l+d+18,c=r.width??Math.max(o.clientWidth||640,420),y=r.height??500,g={top:t.marginTop,right:t.marginRight+s,bottom:t.marginBottom+d+20,left:t.marginLeft},w=c-g.left-g.right,u=y-g.top-g.bottom,F=e.categories.length,v=Array.from({length:F},(L,_)=>e.series.reduce((A,B)=>A+(B.values[_]??0),0)),h=v.reduce((L,_)=>L+_,0);if(h===0)return;const k=3,x=v.map(L=>L/h*w),p=[];x.reduce((L,_,A)=>(p[A]=L,L+_),0),o.innerHTML="",Q(o,t);const b=a.select(o).append("svg").attr("width",c).attr("height",y).attr("viewBox",`0 0 ${c} ${y}`).style("background",t.background);Z(b,r.title??"Marimekko Chart",(($=e.testResult)==null?void 0:$.formatted)??"",c,t);const S=b.append("g").attr("transform",`translate(${g.left},${g.top})`);[0,25,50,75,100].forEach(L=>{const _=u*(1-L/100);S.append("line").attr("x1",0).attr("x2",w).attr("y1",_).attr("y2",_).attr("stroke",t.gridLine).attr("stroke-width",1).attr("stroke-dasharray","3,3"),S.append("text").attr("x",-8).attr("y",_+4).attr("text-anchor","end").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.textMuted).text(`${L}%`)}),r.yLabel?S.append("text").attr("transform","rotate(-90)").attr("x",-u/2).attr("y",-52).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel):S.append("text").attr("transform","rotate(-90)").attr("x",-u/2).attr("y",-52).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.textMuted).text("Percentage (%)"),e.categories.forEach((L,_)=>{const A=v[_]??0;if(A===0)return;const B=p[_]??0,D=x[_]??0;let P=0;e.series.forEach((C,R)=>{const T=C.values[_]??0,I=T/A,q=I*u,j=B+k/2,W=u-(P+I)*u,O=Math.max(D-k,0),X=Math.max(q-k/2,0),et=H(R,t);S.append("rect").attr("x",j).attr("y",W).attr("width",O).attr("height",X).attr("fill",et).attr("opacity",t.violinOpacity);const rt=i?String(T):`${(I*100).toFixed(1)}%`;if(X>18&&O>30&&(n||i)){const ht=Io(et);S.append("text").attr("x",j+O/2).attr("y",W+X/2+4).attr("text-anchor","middle").attr("font-family",t.fontFamilyMono).attr("font-size",Math.min(t.fontSizeSmall,X*.38,O*.18)).attr("fill",ht?"#ffffff":"#212529").attr("pointer-events","none").text(rt)}const st=(A/h*100).toFixed(1);S.append("rect").attr("x",j).attr("y",W).attr("width",O).attr("height",X).attr("fill","transparent").on("mouseover",ht=>{U(ht,[V("Category",L),V("Series",C.label),V("Value",T),V("% of column",`${(I*100).toFixed(1)}%`),V("Column total",`${A} (${st}% of total)`)].join(""),t)}).on("mouseout",Y),P+=I})}),e.categories.forEach((L,_)=>{const A=p[_]??0,B=x[_]??0,D=A+B/2;S.append("text").attr("x",D).attr("y",u+18).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(L),S.append("text").attr("x",D).attr("y",u+30).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.textMuted).text(`(N=${v[_]??0})`)}),e.categories.forEach((L,_)=>{const A=p[_]??0,B=x[_]??0;S.append("rect").attr("x",A+k/2).attr("y",u+l).attr("width",Math.max(B-k,0)).attr("height",d).attr("fill",H(0,t)).attr("opacity",.4).attr("rx",1)}),r.xLabel&&S.append("text").attr("x",w/2).attr("y",u+f).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel);const M=12,z=w+20,E=Math.max(0,u/2-e.series.length*20/2);S.append("text").attr("x",z).attr("y",E-12).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("font-weight","600").attr("fill",t.text).text("Series"),e.series.forEach((L,_)=>{const A=H(_,t),B=E+_*20;S.append("rect").attr("x",z).attr("y",B).attr("width",M).attr("height",M).attr("fill",A).attr("opacity",t.violinOpacity).attr("rx",2),S.append("text").attr("x",z+M+6).attr("y",B+M-2).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-1).attr("fill",t.text).text(L.label)}),r.caption&&J(b,r.caption,c,y,t)}function Io(a){const o=parseInt(a.slice(1,3),16)/255,e=parseInt(a.slice(3,5),16)/255,r=parseInt(a.slice(5,7),16)/255;return .2126*o+.7152*e+.0722*r<.35}function Do(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>To(r,a,o,e))}function To(a,o,e,r){var E;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||600,400),i=r.height??Math.max(o.clientHeight||500,400);o.innerHTML="",Q(o,t);const s=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(s,r.title??"Chord Diagram",((E=e.testResult)==null?void 0:E.formatted)??"",n,t);const d=r.caption?24:0,l=i-t.marginTop-d-8,f=n/2,c=t.marginTop+l/2,y=Math.min(n,l),g=r.innerRadius!=null?r.innerRadius+20:y/2*.82,w=r.innerRadius!=null?r.innerRadius:g-20,u=r.padAngle??.02,F=e.matrix.map($=>[...$]),h=a.chord().padAngle(u).sortSubgroups(a.descending)(F),k=a.arc().innerRadius(w).outerRadius(g),x=a.ribbon().startAngle($=>$.startAngle).endAngle($=>$.endAngle).radius($=>w),p=s.append("g").attr("transform",`translate(${f},${c})`),b=[...h].sort(($,L)=>L.source.value+L.target.value-($.source.value+$.target.value));p.selectAll(".ribbon").data(b).join("path").attr("class","ribbon").attr("d",$=>x($)??"").attr("fill",$=>H($.source.index,t)).attr("opacity",.65).attr("stroke",t.background).attr("stroke-width",.5).on("mouseover",($,L)=>{const _=e.labels[L.source.index]??`Group ${L.source.index}`,A=e.labels[L.target.index]??`Group ${L.target.index}`,B=[V("From",_),V("To",A),V("Flow",L.source.value)].join("");U($,B,t)}).on("mouseout",Y),p.selectAll(".group").data(h.groups).join("g").attr("class","group").append("path").attr("d",$=>k($)??"").attr("fill",$=>H($.index,t)).attr("stroke",t.background).attr("stroke-width",1).on("mouseover",($,L)=>{var P;const _=e.labels[L.index]??`Group ${L.index}`,A=((P=e.matrix[L.index])==null?void 0:P.reduce((C,R)=>C+R,0))??0,B=e.matrix.reduce((C,R)=>C+(R[L.index]??0),0),D=[V("Group",_),V("Outflow",A),V("Inflow",B)].join("");U($,D,t)}).on("mouseout",Y);const m=e.matrix.reduce(($,L)=>$+L.reduce((_,A)=>_+A,0),0),M=m>0?Ho(m):1;h.groups.forEach($=>{var A;const L=((A=e.matrix[$.index])==null?void 0:A.reduce((B,D)=>B+D,0))??0,_=Math.floor(L/M);for(let B=0;B<=_;B++){const D=B*M,P=$.endAngle-$.startAngle-u,C=$.startAngle+u/2+(L>0?D/L*P:0),R=Math.sin(C-Math.PI/2),T=Math.cos(C-Math.PI/2);p.append("line").attr("x1",w*T).attr("y1",w*R).attr("x2",(g+8)*T).attr("y2",(g+8)*R).attr("stroke",t.axisLine).attr("stroke-width",1),B>0&&p.append("text").attr("x",(g+14)*T).attr("y",(g+14)*R).attr("text-anchor",C>Math.PI?"end":"start").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall-2).attr("fill",t.textMuted).text(Wo(D))}});const z=g+32;h.groups.forEach($=>{const _=($.startAngle+$.endAngle)/2-Math.PI/2,A=z*Math.cos(_),B=z*Math.sin(_),D=Math.cos(_)>0;p.append("text").attr("x",A).attr("y",B).attr("text-anchor",D?"start":"end").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("font-weight","600").attr("fill",t.text).text(e.labels[$.index]??`Group ${$.index}`)}),r.caption&&J(s,r.caption,n,i,t)}function Ho(a){const o=a/8,e=Math.pow(10,Math.floor(Math.log10(o))),r=o/e;return(r<1.5?1:r<3.5?2:r<7.5?5:10)*e}function Wo(a){return a>=1e3?`${(a/1e3).toFixed(a%1e3===0?0:1)}k`:Number.isInteger(a)?String(a):a.toFixed(1)}function jo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>qo(r,a,o,e))}function qo(a,o,e,r){var m;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||700,400),i=r.height??420,s={top:t.marginTop,right:t.marginRight,bottom:t.marginBottom,left:t.marginLeft},d=n-s.left-s.right,l=i-s.top-s.bottom,f=r.nodeRadius??6,c=r.sortByGroup??!0;o.innerHTML="",Q(o,t);const y=a.select(o).append("svg").attr("width",n).attr("height",i).style("background",t.background);Z(y,r.title??"Arc Diagram",((m=e.testResult)==null?void 0:m.formatted)??"",n,t);const g=y.append("g").attr("transform",`translate(${s.left},${s.top})`),w=[];e.nodes.forEach(M=>{const z=M.group??"__none__";w.includes(z)||w.push(z)});const u=M=>w.indexOf(M??"__none__"),F=c?[...e.nodes].sort((M,z)=>{const E=u(M.group)-u(z.group);return E!==0?E:e.nodes.indexOf(M)-e.nodes.indexOf(z)}):[...e.nodes],v=l*.65,h=F.length,k=h>1?d/(h-1):d/2,x=h>1?0:d/2,p=new Map;F.forEach((M,z)=>{p.set(M.id,x+z*k)});const b=new Map;e.nodes.forEach(M=>b.set(M.id,0)),e.edges.forEach(M=>{b.set(M.source,(b.get(M.source)??0)+1),b.set(M.target,(b.get(M.target)??0)+1)}),g.append("line").attr("x1",0).attr("x2",d).attr("y1",v).attr("y2",v).attr("stroke",t.gridLine).attr("stroke-width",1.5),e.edges.forEach(M=>{const z=p.get(M.source),E=p.get(M.target);if(z==null||E==null||M.source===M.target)return;const $=e.nodes.find(T=>T.id===M.source),L=u($==null?void 0:$.group),_=H(L,t),A=Math.abs(E-z)/d*(l*.55),B=(z+E)/2,D=v-A,P=1+(M.value??1)*.5,C=Math.min(P,4),R=`M ${z},${v} Q ${B},${D} ${E},${v}`;g.append("path").attr("d",R).attr("fill","none").attr("stroke",_).attr("stroke-width",C).attr("opacity",.55).on("mouseover",T=>{var W,O;const I=((W=e.nodes.find(X=>X.id===M.source))==null?void 0:W.label)??M.source,q=((O=e.nodes.find(X=>X.id===M.target))==null?void 0:O.label)??M.target,j=[V("From",I),V("To",q),...M.value!=null?[V("Value",M.value)]:[]].join("");U(T,j,t)}).on("mouseout",Y)});const S=8;F.forEach(M=>{const z=p.get(M.id)??0,E=u(M.group),$=H(E,t),L=M.label??M.id,_=b.get(M.id)??0;g.append("circle").attr("cx",z).attr("cy",v).attr("r",f).attr("fill",$).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",A=>{const B=M.group??"none",D=[V("Node",L),V("Group",B),V("Degree",_)].join("");U(A,D,t)}).on("mouseout",Y),h<=S?g.append("text").attr("x",z).attr("y",v+f+14).attr("text-anchor","middle").attr("dominant-baseline","hanging").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(L):g.append("text").attr("transform",`translate(${z},${v+f+8}) rotate(45)`).attr("text-anchor","start").attr("dominant-baseline","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(L)}),r.xLabel&&g.append("text").attr("x",d/2).attr("y",l+44).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel),r.yLabel&&g.append("text").attr("transform","rotate(-90)").attr("x",-l/2).attr("y",-48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel),r.caption&&J(y,r.caption,n,i,t)}function Oo(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>No(r,a,o,e))}function No(a,o,e,r){var B,D;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||700,400),i=r.height??520,s=r.nodePadding??8,d=r.nodeWidth??18,l=(((B=e.stageLabels)==null?void 0:B.length)??0)>0,f={top:t.marginTop+(l?24:0),right:t.marginRight+80,bottom:t.marginBottom,left:t.marginLeft+60},c=n-f.left-f.right,y=i-f.top-f.bottom;o.innerHTML="",Q(o,t);const g=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(g,r.title??"Alluvial Plot",((D=e.testResult)==null?void 0:D.formatted)??"",n,t);const w=g.append("g").attr("transform",`translate(${f.left},${f.top})`);if(e.nodes.length===0||e.flows.length===0)return;const u=Array.from(new Set(e.nodes.map(P=>P.label))),F=new Map(u.map((P,C)=>[P,H(C,t)])),v=Array.from(new Set(e.nodes.map(P=>P.stage))).sort((P,C)=>P-C),h=v.length,k=P=>h<2?c/2:P/(h-1)*(c-d),x=new Map(e.nodes.map(P=>[P.id,P])),p=new Map,b=new Map;e.flows.forEach(P=>{b.set(P.source,(b.get(P.source)??0)+P.value),p.set(P.target,(p.get(P.target)??0)+P.value)});const S=v[0]??0,m=v[h-1]??0,M=P=>{const C=x.get(P);return C?C.stage===S?b.get(P)??0:C.stage===m?p.get(P)??0:Math.max(b.get(P)??0,p.get(P)??0):0},z=new Map;v.forEach(P=>{const C=e.nodes.filter(W=>W.stage===P).sort((W,O)=>M(O.id)-M(W.id)),R=C.reduce((W,O)=>W+M(O.id),0),T=y-s*Math.max(0,C.length-1),I=R>0?T/R:1,q=[];let j=0;C.forEach(W=>{const O=M(W.id),X=Math.max(4,O*I);q.push({id:W.id,stage:W.stage,label:W.label,color:F.get(W.label)??H(0,t),totalValue:O,inValue:p.get(W.id)??0,outValue:b.get(W.id)??0,x:k(v.indexOf(P)),y:j,height:X,outOffset:0,inOffset:0}),j+=X+s}),z.set(P,q)});const E=new Map;z.forEach(P=>P.forEach(C=>E.set(C.id,C)));const $=[];[...e.flows].sort((P,C)=>C.value-P.value).forEach(P=>{const C=E.get(P.source),R=E.get(P.target);if(!C||!R)return;const T=C.outValue>0?C.height/C.outValue:0,I=R.inValue>0?R.height/R.inValue:0,q=Math.max(1,P.value*Math.min(T,I)),j=C.y+C.outOffset,W=R.y+R.inOffset;$.push({sourceNode:C,targetNode:R,value:P.value,ribbonHeight:q,sourceY:j,targetY:W}),C.outOffset+=q,R.inOffset+=q});const _=w.append("g").attr("class","flows"),A=w.append("g").attr("class","nodes");$.forEach(P=>{const C=P.sourceNode.x+d,R=P.targetNode.x,T=C+(R-C)*.4,I=C+(R-C)*.6,q=P.sourceY,j=P.sourceY+P.ribbonHeight,W=P.targetY,O=P.targetY+P.ribbonHeight,X=[`M ${C.toFixed(2)},${q.toFixed(2)}`,`C ${T.toFixed(2)},${q.toFixed(2)} ${I.toFixed(2)},${W.toFixed(2)} ${R.toFixed(2)},${W.toFixed(2)}`,`L ${R.toFixed(2)},${O.toFixed(2)}`,`C ${I.toFixed(2)},${O.toFixed(2)} ${T.toFixed(2)},${j.toFixed(2)} ${C.toFixed(2)},${j.toFixed(2)}`,"Z"].join(" "),et=P.sourceNode.outValue>0?(P.value/P.sourceNode.outValue*100).toFixed(1):"–";_.append("path").attr("d",X).attr("fill",P.sourceNode.color).attr("opacity",.42).attr("stroke",P.sourceNode.color).attr("stroke-width",.5).attr("stroke-opacity",.25).on("mouseover",rt=>{U(rt,[V("From",P.sourceNode.label),V("To",P.targetNode.label),V("Value",P.value.toFixed(2)),V("% of source",`${et}%`)].join(""),t)}).on("mouseout",Y).on("mouseover.highlight",function(rt){a.select(this).attr("opacity",.72),U(rt,[V("From",P.sourceNode.label),V("To",P.targetNode.label),V("Value",P.value.toFixed(2)),V("% of source",`${et}%`)].join(""),t)}).on("mouseout.highlight",function(){a.select(this).attr("opacity",.42),Y()})}),v.forEach(P=>{const C=z.get(P)??[],R=P===S,T=P===m;C.forEach(I=>{A.append("rect").attr("x",I.x).attr("y",I.y).attr("width",d).attr("height",I.height).attr("fill",I.color).attr("rx",3).attr("stroke",t.background).attr("stroke-width",1.5).on("mouseover",O=>{U(O,[V("Label",I.label),V("Stage",I.stage.toString()),V("Total value",I.totalValue.toFixed(2))].join(""),t)}).on("mouseout",Y);const q=R?I.x-6:T?I.x+d+6:I.x+d/2,j=R?"end":T?"start":"middle",W=I.y+I.height/2+4;A.append("text").attr("x",q).attr("y",W).attr("text-anchor",j).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-weight","500").attr("fill",t.text).attr("pointer-events","none").text(I.label)})}),e.stageLabels&&v.forEach((P,C)=>{var I;const R=((I=e.stageLabels)==null?void 0:I[C])??`Stage ${P}`,T=k(C)+d/2;A.append("text").attr("x",T).attr("y",-12).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("font-weight","700").attr("fill",t.textMuted).attr("letter-spacing","0.5").text(R.toUpperCase())}),r.xLabel&&w.append("text").attr("x",c/2).attr("y",y+48).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.xLabel),r.yLabel&&w.append("text").attr("transform","rotate(-90)").attr("x",-y/2).attr("y",-f.left+16).attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.text).text(r.yLabel),r.caption&&J(g,r.caption,n,i,t)}function Go(a,o,e={}){K(()=>import("./index-6PKoUFgn.js"),[]).then(r=>Xo(r,a,o,e))}function Xo(a,o,e,r){var P;const t=r.theme??G,n=r.width??Math.max(o.clientWidth||640,400),i=r.height??Math.max(n,480),s=r.bundlingStrength??.85,d=r.nodeRadius??4,f=Math.min(n,i)/2-90;o.innerHTML="",Q(o,t);const c=a.select(o).append("svg").attr("width",n).attr("height",i).attr("viewBox",`0 0 ${n} ${i}`).style("background",t.background);Z(c,r.title??"Edge Bundling",((P=e.testResult)==null?void 0:P.formatted)??"",n,t);const y=n/2,g=i/2+t.marginTop/2,w=c.append("g").attr("transform",`translate(${y},${g})`);if(e.nodes.length===0)return;const u=C=>C.group??C.parent??"",F=Array.from(new Set(e.nodes.map(u))),v=new Map(F.map((C,R)=>[C,H(R,t)])),h=C=>v.get(u(C))??H(0,t),k=e.nodes.map(C=>({id:C.id,parentId:C.parent===""?void 0:C.parent,data:C}));let x;try{x=a.stratify({id:R=>R.id,parentId:R=>R.parentId})(k)}catch{w.append("text").attr("text-anchor","middle").attr("font-family",t.fontFamily).attr("font-size",t.fontSize).attr("fill",t.textMuted).text("Invalid hierarchy — check node parent ids.");return}const p=a.cluster();p.size([360,f]),p(x);const b=new Map,S=[];(function C(R){var T;S.push(R),b.set(R.data.id,R),(T=R.children)==null||T.forEach(C)})(x);const m=S.filter(C=>!C.children||C.children.length===0);function M(C,R){const T=C.ancestors(),I=R.ancestors(),q=new Set(T.map(rt=>rt.data.id)),j=I.find(rt=>q.has(rt.data.id));if(!j)return[C,R];const W=T.findIndex(rt=>rt.data.id===j.data.id),O=T.slice(0,W+1),X=I.findIndex(rt=>rt.data.id===j.data.id),et=I.slice(0,X).reverse();return[...O,...et]}const z=a.curveBundle.beta(s),E=a.lineRadial().curve(z).angle(C=>C.x*Math.PI/180).radius(C=>C.y),$=w.append("g").attr("class","edges"),L=w.append("g").attr("class","nodes"),_=[];e.edges.forEach(C=>{const R=b.get(C.source),T=b.get(C.target);if(!R||!T)return;const I=M(R,T),q=E(I);if(!q)return;const j=h(R.data),W=$.append("path").attr("d",q).attr("fill","none").attr("stroke",j).attr("stroke-width",1).attr("opacity",.28);_.push({srcId:C.source,tgtId:C.target,el:W,srcColor:j})});let A=null;m.forEach(C=>{const R=C.x*Math.PI/180,T=Math.sin(R)*C.y,I=-Math.cos(R)*C.y,q=h(C.data),j=C.data.label??C.data.id;L.append("circle").attr("cx",T).attr("cy",I).attr("r",d).attr("fill",q).attr("stroke",t.background).attr("stroke-width",1.5).attr("cursor","pointer").on("mouseover",$t=>{A===null&&(B(C.data.id),U($t,[V("Node",j),V("Group",C.data.group??C.data.parent??"—"),V("Connections",e.edges.filter(Et=>Et.source===C.data.id||Et.target===C.data.id).length.toString())].join(""),t))}).on("mouseout",()=>{A===null&&(D(),Y())}).on("click",$t=>{$t.stopPropagation(),A===C.data.id?(A=null,D(),Y()):(A=C.data.id,B(C.data.id),U($t,[V("Node",j),V("Group",C.data.group??C.data.parent??"—"),V("Connections",e.edges.filter(Et=>Et.source===C.data.id||Et.target===C.data.id).length.toString())].join(""),t))});const W=C.x,O=W>180,X=W-90,et=C.y+d+5,rt=Math.sin(R)*et,st=-Math.cos(R)*et,ht=O?`rotate(${X+180},${rt.toFixed(2)},${st.toFixed(2)})`:`rotate(${X},${rt.toFixed(2)},${st.toFixed(2)})`;L.append("text").attr("x",rt).attr("y",st).attr("dy","0.35em").attr("text-anchor",O?"end":"start").attr("transform",ht).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).attr("pointer-events","none").text(j)}),c.on("click",()=>{A!==null&&(A=null,D(),Y())});function B(C){_.forEach(R=>{const T=R.srcId===C||R.tgtId===C;R.el.attr("opacity",T?.9:.05).attr("stroke-width",T?2:.8)})}function D(){_.forEach(C=>{C.el.attr("opacity",.28).attr("stroke-width",1)})}if(F.filter(C=>C!=="").length>1){const C=F.filter(I=>I!==""),R=-n/2+t.marginLeft,T=i/2-t.marginBottom-C.length*18;C.forEach((I,q)=>{w.append("rect").attr("x",R).attr("y",T+q*18).attr("width",10).attr("height",10).attr("fill",v.get(I)??H(q,t)).attr("rx",2),w.append("text").attr("x",R+14).attr("y",T+q*18+9).attr("font-family",t.fontFamily).attr("font-size",t.fontSizeSmall).attr("fill",t.text).text(I)})}r.caption&&J(c,r.caption,n,i,t)}function wt(a){let o=a;const e=()=>(o=o*1664525+1013904223&4294967295,(o>>>0)/4294967295);let r=null;return()=>{if(r!==null){const s=r;return r=null,s}const t=e(),n=e(),i=Math.sqrt(-2*Math.log(t+1e-10));return r=i*Math.sin(2*Math.PI*n),i*Math.cos(2*Math.PI*n)}}function Ze(a){let o=a;return()=>(o=o*1664525+1013904223&4294967295,(o>>>0)/4294967295)}function Qo(a,o,e,r,t,n){const i=Math.sqrt(((e-1)*o**2+(n-1)*t**2)/(e+n-2));return i>0?Math.abs(a-r)/i:0}function Yo(a){return a<.2?"negligible":a<.5?"small":a<.8?"medium":"large"}function ne(a){const o=a.reduce((e,r)=>e+r,0)/a.length;return Math.sqrt(a.reduce((e,r)=>e+(r-o)**2,0)/(a.length-1))}function Ee(a,o){const e=[...a].sort((i,s)=>i-s),r=o*(e.length-1),t=Math.floor(r),n=r-t;return t+1<e.length?e[t]+n*(e[t+1]-e[t]):e[t]}function vt(a){const o=a<.001?"***":a<.01?"**":a<.05?"*":a<.1?"†":"";return o?`<sup class="stat-sig">${o}</sup>`:""}function Ft(a){return a<.001?"&lt;&thinsp;.001":a.toFixed(3).replace(/^0\./,".")}function At(a,o,e=2){return`[${a.toFixed(e)},&thinsp;${o.toFixed(e)}]`}function Wt(a){const o=a.toFixed(3);return a<0?o.replace("-0.","&minus;."):o.replace("0.",".")}function Uo(a){return a.toFixed(2).replace(/^0\./,".")}function mt(a,o){const e=n=>{var i;return((i=o.cols[n])==null?void 0:i.a)??"r"},r=o.cols.map((n,i)=>`<th class="${e(i)}">${n.h}</th>`).join(""),t=o.rows.map(n=>`<tr>${n.map((i,s)=>`<td class="${e(s)}">${i}</td>`).join("")}</tr>`).join("");a.insertAdjacentHTML("beforeend",`
    <div class="stat-table-wrap">
      ${o.title?`<div class="stat-table-title">${o.title}</div>`:""}
      ${o.subtitle?`<div class="stat-table-subtitle">${o.subtitle}</div>`:""}
      <table class="stat-table">
        <thead><tr>${r}</tr></thead>
        <tbody>${t}</tbody>
      </table>
      ${o.note?`<div class="stat-table-note"><em>Note.</em> ${o.note}</div>`:""}
    </div>`)}const Vt=wt(42),pe=wt(99),Je=wt(7),Mt=wt(13),zt=wt(55),Xt=Array.from({length:30},()=>5+Vt()*1.5),Qt=Array.from({length:30},()=>7+Vt()*1.8),Yt=Array.from({length:30},()=>6+Vt()*1.2),Ut=Array.from({length:50},(a,o)=>o*.1+Vt()*.5),ue=Ut.map(a=>2.5+1.8*a+Vt()*.8),Kt=Array.from({length:40},()=>pe()*3),Zt=Array.from({length:40},()=>pe()*2+1),ta=Kt.map((a,o)=>1+2*a+.5*Zt[o]+pe()*.8),Bt=Array.from({length:30},(a,o)=>Math.floor(o/10)+1),xe=Bt.map(()=>Je()*2+1),Ko={1:-2,2:0,3:3},ge=xe.map((a,o)=>(Ko[Bt[o]]??0)+1.2*a+Je()*.5),Jt=Array.from({length:60},()=>{const a=Mt(),o=Mt();return[a+Mt()*.3,a*.8+Mt()*.4,a*-.6+Mt()*.5,o+Mt()*.3,o*.7+Mt()*.4]}),xt=Array.from({length:24},(a,o)=>o),ea=xt.map(a=>10+a*.8+zt()*2),aa=xt.map(a=>15+a*.3+zt()*2.5),ra=xt.map(a=>8+a*1.2+zt()*1.5),ye=["Alpha","Beta","Gamma","Delta","Epsilon","Zeta","Eta","Theta"],te=[42,78,31,91,55,67,23,84],oa=[{label:"Category A",value:35},{label:"Category B",value:28},{label:"Category C",value:18},{label:"Category D",value:12},{label:"Category E",value:7}],Zo=Array.from({length:20},(a,o)=>({x:zt()*10+5,y:zt()*8+4,r:Math.abs(zt())*8+2,label:`P${o+1}`,group:o<7?"Group A":o<14?"Group B":"Group C"})),_e=[{label:"Smith et al. (2018)",estimate:.45,ciLow:.12,ciHigh:.78,weight:3.2},{label:"Jones et al. (2019)",estimate:.62,ciLow:.31,ciHigh:.93,weight:4.1},{label:"Brown et al. (2020)",estimate:.28,ciLow:-.05,ciHigh:.61,weight:2.8},{label:"Davis et al. (2021)",estimate:.71,ciLow:.45,ciHigh:.97,weight:5},{label:"Wilson et al. (2022)",estimate:.53,ciLow:.22,ciHigh:.84,weight:3.7}],Dt={estimate:.54,ciLow:.38,ciHigh:.7},be=[0],we=[0],Ce=Ze(123);for(let a=1;a>=0;a-=.02)be.push(Math.min(1,Math.max(0,Math.pow(a,2.5)*(.9+Ce()*.2)))),we.push(Math.min(1,Math.max(0,1-Math.pow(1-a,1.8)*(.85+Ce()*.1))));be.push(1);we.push(1);const Pe=.82,Jo=["Speed","Strength","Agility","Endurance","Technique"],tn=[{label:"Athlete A",values:[85,72,90,65,88]},{label:"Athlete B",values:[70,91,75,82,77]},{label:"Athlete C",values:[92,68,83,78,71]}],en=["Sepal L","Sepal W","Petal L","Petal W"],an=wt(31),rn=Array.from({length:45},(a,o)=>{const e=Math.floor(o/15);return[[5,3.4,1.5,.2],[5.9,2.8,4.3,1.3],[6.5,3,5.5,2]][e].map(t=>Math.max(.1,t+an()*.6))}),on=Array.from({length:45},(a,o)=>Math.floor(o/15)),nn=[[30,20,10],[25,40,20],[10,25,35]],sn=["Low Ed.","Mid Ed.","High Ed."],ln=["Low Inc.","Mid Inc.","High Inc."],cn=[{label:"Electronics",value:420,group:"Tech"},{label:"Software",value:310,group:"Tech"},{label:"Hardware",value:180,group:"Tech"},{label:"Clothing",value:250,group:"Retail"},{label:"Footwear",value:190,group:"Retail"},{label:"Accessories",value:120,group:"Retail"},{label:"Food",value:200,group:"FMCG"},{label:"Beverages",value:150,group:"FMCG"}],dn=[{label:"Product A",value:35},{label:"Product B",value:28},{label:"Product C",value:20},{label:"Product D",value:17}],mn=[{label:"Awareness",value:1e4},{label:"Interest",value:6500},{label:"Consideration",value:3800},{label:"Intent",value:2100},{label:"Purchase",value:980}],hn=Jt.slice(0,30).map(a=>a.slice(0,4)),fn=["V1","V2","V3","V4"],re=wt(77),na=[{label:"Control",values:Array.from({length:25},()=>5+re()*1.2)},{label:"Treatment",values:Array.from({length:25},()=>6.5+re()*1.4)},{label:"Placebo",values:Array.from({length:25},()=>5.3+re()*1.1)}],Pt=[...Xt,...Qt,...Yt],Ct=We(Pt);lr(document.getElementById("histogram-plot"),{values:Pt,descriptives:Ct},{title:"Distribution of Group Values",xLabel:"Value",showNormalCurve:!0,width:650,height:380,caption:`N = ${Ct.n}. Curve: fitted normal distribution. Shapiro–Wilk W = ${Ct.shapiroWilk.statistic.toFixed(3)}, p = ${Ct.shapiroWilk.pValue.toFixed(3)}.`});xr(document.getElementById("qq-plot"),Pt,{title:"Normal QQ Plot",width:450,height:380,caption:"Points along the diagonal indicate normality. Shaded band: 95% pointwise confidence envelope."});Vr(document.getElementById("density-plot"),{series:[{label:"Group A",values:Xt},{label:"Group B",values:Qt},{label:"Group C",values:Yt}]},{title:"KDE Density by Group",xLabel:"Value",yLabel:"Density",showRug:!0,width:650,height:340,caption:"Kernel density estimation (Silverman bandwidth). Rug marks: individual observations."});Tr(document.getElementById("boxplot-plot"),{groups:[{label:"Group A",values:Xt},{label:"Group B",values:Qt},{label:"Group C",values:Yt}]},{title:"Standalone Box Plot",xLabel:"Group",yLabel:"Value",width:500,height:380,caption:"Box: IQR (Q1–Q3). Whiskers: 1.5 × IQR. Circles: outliers."});const sa=document.getElementById("descriptive-tables"),nt=Ct,pn=nt.shapiroWilk.pValue>.05?'<span style="color:#198754;font-weight:600">Normal</span>':'<span style="color:#dc3545;font-weight:600">Non-normal</span>';mt(sa,{title:"Table 1.  Descriptive Statistics",subtitle:`N = ${nt.n} observations`,cols:[{h:"Statistic",a:"l"},{h:"Value",a:"r"},{h:"Statistic",a:"l"},{h:"Value",a:"r"}],rows:[["Mean (<em>M</em>)",nt.mean.toFixed(3),"Trimmed Mean (5%)",nt.trimmedMean.toFixed(3)],["Standard Deviation (<em>SD</em>)",nt.sd.toFixed(3),"Variance (<em>s</em>&sup2;)",nt.variance.toFixed(3)],["Standard Error (<em>SE</em>)",nt.se.toFixed(3),"95% CI for <em>M</em>",At(nt.ci[0],nt.ci[1])],["Median",nt.median.toFixed(3),"IQR",nt.iqr.toFixed(3)],["Q1 (25th pctile)",nt.q1.toFixed(3),"Q3 (75th pctile)",nt.q3.toFixed(3)],["P5",Ee(Pt,.05).toFixed(3),"P95",Ee(Pt,.95).toFixed(3)],["Min",nt.min.toFixed(3),"Max",nt.max.toFixed(3)],["Skewness (<em>g</em><sub>1</sub>)",nt.skewness.toFixed(3),"Excess Kurtosis (<em>g</em><sub>2</sub>)",nt.kurtosis.toFixed(3)]],note:"Trimmed mean excludes top and bottom 5%. Skewness and kurtosis are moment-based estimators (G1/G2)."});mt(sa,{title:"Table 2.  Normality Assessment",subtitle:"Shapiro–Wilk test of normality",cols:[{h:"Statistic",a:"l"},{h:"Value",a:"r"}],rows:[["<em>W</em>",nt.shapiroWilk.statistic.toFixed(4)],["<em>p</em>-value",Ft(nt.shapiroWilk.pValue)+vt(nt.shapiroWilk.pValue)],["<em>n</em>",`${nt.n}`],["Conclusion",pn]],note:"H₀: data are drawn from a normal distribution. W close to 1 indicates normality. *&thinsp;<em>p</em> &lt; .05, **&thinsp;<em>p</em> &lt; .01, ***&thinsp;<em>p</em> &lt; .001."});const gt=[{label:"Group A",values:Xt},{label:"Group B",values:Qt},{label:"Group C",values:Yt}],ot=Ba(gt),ia=Ia(gt,ot.msWithin,ot.dfWithin),la=gt.map(a=>We([...a.values])),Re=new Map(gt.map((a,o)=>[a.label,la[o]])),ve=gt.reduce((a,o)=>a+o.values.length,0);`${ot.formatted}${ve}`;Ge(document.getElementById("violin-plot"),{groups:gt,testResult:ot,pairwise:ia},{title:"Group Comparison",xLabel:"Group",yLabel:"Value",showBrackets:!0,width:650,height:500,caption:`N = ${ve} (${gt.map(a=>a.values.length).join(" / ")} per group). One-way ANOVA with Tukey HSD post-hoc. Brackets: p < .05.`});wr(document.getElementById("raincloud-plot"),{groups:gt,testResult:ot},{title:"Raincloud Plot",xLabel:"Group",yLabel:"Value",width:650,height:480,caption:"Half-violin (KDE density) + box (IQR, whiskers) + jittered individual points."});Ue(document.getElementById("grouped-bar-plot"),{categories:["Q1","Q2","Q3","Q4"],series:[{label:"Product A",values:[42,58,71,65]},{label:"Product B",values:[35,49,62,78]},{label:"Product C",values:[28,41,55,69]}]},{type:"grouped",title:"Quarterly Sales by Product (Grouped)",xLabel:"Quarter",yLabel:"Units",width:650,height:400});Ue(document.getElementById("stacked-bar-plot"),{categories:["Q1","Q2","Q3","Q4"],series:[{label:"Product A",values:[42,58,71,65]},{label:"Product B",values:[35,49,62,78]},{label:"Product C",values:[28,41,55,69]}]},{type:"stacked",title:"Quarterly Sales by Product (Stacked)",xLabel:"Quarter",yLabel:"Cumulative Units",width:650,height:400});Yr(document.getElementById("bubble-plot"),{points:Zo},{title:"Bubble Chart",xLabel:"X Variable",yLabel:"Y Variable",width:650,height:480});const Me=document.getElementById("comparison-tables");mt(Me,{title:"Table 3.  Descriptive Statistics by Group",subtitle:`N = ${ve} total`,cols:[{h:"Group",a:"l"},{h:"<em>n</em>",a:"c"},{h:"<em>M</em>",a:"r"},{h:"<em>SD</em>",a:"r"},{h:"<em>SE</em>",a:"r"},{h:"95% CI",a:"c"},{h:"Mdn",a:"r"},{h:"Min &ndash; Max",a:"c"},{h:"Skew",a:"r"}],rows:gt.map((a,o)=>{const e=la[o];return[`<strong>${a.label}</strong>`,`${e.n}`,e.mean.toFixed(3),e.sd.toFixed(3),e.se.toFixed(3),At(e.ci[0],e.ci[1]),e.median.toFixed(3),`${e.min.toFixed(2)} &ndash; ${e.max.toFixed(2)}`,e.skewness.toFixed(2)]})});mt(Me,{title:"Table 4.  One-Way ANOVA Summary",cols:[{h:"Source",a:"l"},{h:"<em>SS</em>",a:"r"},{h:"<em>df</em>",a:"c"},{h:"<em>MS</em>",a:"r"},{h:"<em>F</em>",a:"r"},{h:"<em>p</em>",a:"r"},{h:"&eta;&sup2;",a:"r"},{h:"&omega;&sup2;",a:"r"}],rows:[["Between groups",ot.ssBetween.toFixed(3),`${ot.dfBetween}`,ot.msBetween.toFixed(3),ot.statistic.toFixed(3)+vt(ot.pValue),Ft(ot.pValue),(ot.ssBetween/ot.ssTotal).toFixed(3),ot.effectSize.value.toFixed(3)],["Within groups",ot.ssWithin.toFixed(3),`${ot.dfWithin}`,ot.msWithin.toFixed(3),"","","",""],["<strong>Total</strong>",ot.ssTotal.toFixed(3),`${ot.dfBetween+ot.dfWithin}`,"","","","",""]],note:`η² = SS_between / SS_total (unadjusted). ω² = (SS_B − df_B·MS_W) / (SS_T + MS_W) (bias-corrected). Effect size: ω² = ${ot.effectSize.value.toFixed(3)} (${ot.effectSize.interpretation}). &dagger;&thinsp;<em>p</em> &lt; .10, *&thinsp;<em>p</em> &lt; .05, **&thinsp;<em>p</em> &lt; .01, ***&thinsp;<em>p</em> &lt; .001.`});mt(Me,{title:"Table 5.  Post-hoc Pairwise Comparisons (Tukey HSD)",subtitle:"Family-wise error rate controlled at α = .05",cols:[{h:"Comparison",a:"l"},{h:"<em>MD</em>",a:"r"},{h:"<em>SE</em>",a:"r"},{h:"<em>q</em>",a:"r"},{h:"<em>p</em><sub>adj</sub>",a:"r"},{h:"95% CI",a:"c"},{h:"<em>d</em>",a:"r"},{h:"Size",a:"l"},{h:"",a:"c"}],rows:ia.map(a=>{const o=Re.get(a.group1),e=Re.get(a.group2),r=Qo(o.mean,o.sd,o.n,e.mean,e.sd,e.n);return[`${a.group1} vs ${a.group2}`,a.meanDiff.toFixed(3),a.se.toFixed(3),a.statistic.toFixed(3),Ft(a.pValueAdj),At(a.ci[0],a.ci[1]),Uo(r),`<span style="color:#6c757d;font-size:10px">${Yo(r)}</span>`,vt(a.pValueAdj)||'<span class="stat-dim">ns</span>']}),note:"MD = mean difference. d = Cohen's d (pooled SD). Size benchmarks (Cohen 1988): d &lt; .20 negligible, .20 small, .50 medium, .80 large. ns = not significant."});const St=me(Ut,ue),un=qa(Ut,ue),Ve=St.statistic**2;sr(document.getElementById("scatter-plot"),{x:Ut,y:ue,correlationResult:St,regressionResult:un},{title:"Scatter with Regression Line",xLabel:"X",yLabel:"Y",width:650,height:480,caption:`n = ${St.n}. Pearson r = ${St.statistic.toFixed(3)}, p ${St.pValue<.001?"< .001":"= "+St.pValue.toFixed(3)}. R² = ${Ve.toFixed(3)} (${(Ve*100).toFixed(1)}% variance explained). Shaded band: 95% CI.`});const jt=ja(Array.from({length:4},(a,o)=>Jt.map(e=>e[o]??0)),["V1","V2","V3","V4"]);hr(document.getElementById("correlogram-plot"),jt,{title:"Correlation Matrix (V1–V4)",width:500,height:500,caption:"Color scale: red = positive correlation, blue = negative. * p < .05  ** p < .01  *** p < .001"});const ca=document.getElementById("correlation-tables"),it=St,xn=typeof it.df=="number"?it.df:it.df[0],Be=it.statistic**2;mt(ca,{title:"Table 6.  Pearson Correlation",subtitle:"X and Y (n = 50)",cols:[{h:"<em>r</em>",a:"r"},{h:"<em>r</em>&sup2;",a:"r"},{h:"<em>df</em>",a:"c"},{h:"<em>t</em>",a:"r"},{h:"<em>p</em>",a:"r"},{h:"95% CI",a:"c"},{h:"% Var. Explained",a:"r"},{h:"Interpretation",a:"l"}],rows:[[Wt(it.statistic)+vt(it.pValue),Wt(Be),`${xn}`,(it.statistic*Math.sqrt(it.n-2)/Math.sqrt(1-it.statistic**2)).toFixed(3),Ft(it.pValue),At(it.ci[0],it.ci[1],3),`${(Be*100).toFixed(1)}%`,it.effectSize.interpretation.charAt(0).toUpperCase()+it.effectSize.interpretation.slice(1)]],note:"r² = proportion of variance in Y explained by X. Benchmarks (Cohen 1988): |r| &ge; .10 small, .30 medium, .50 large. &dagger;&thinsp;<em>p</em> &lt; .10, *&thinsp;<em>p</em> &lt; .05, **&thinsp;<em>p</em> &lt; .01, ***&thinsp;<em>p</em> &lt; .001."});const oe=jt.labels;mt(ca,{title:"Table 7.  Correlation Matrix",subtitle:"Variables V1–V4 (n = 60). Lower triangle: Pearson r. Upper triangle: r².",cols:[{h:"Variable",a:"l"},...oe.map(a=>({h:`<strong>${a}</strong>`,a:"c"}))],rows:oe.map((a,o)=>[`<strong>${a}</strong>`,...oe.map((e,r)=>{var i,s;if(o===r)return'<span class="stat-dim">—</span>';const t=((i=jt.r[o])==null?void 0:i[r])??0,n=((s=jt.pValues[o])==null?void 0:s[r])??1;return r<o?Wt(t)+vt(n):`<span class="stat-dim">${Wt(t*t)}</span>`})]),note:"Lower triangle: Pearson r. Upper triangle (dim): r² (coefficient of determination). &dagger;&thinsp;<em>p</em> &lt; .10, *&thinsp;<em>p</em> &lt; .05, **&thinsp;<em>p</em> &lt; .01, ***&thinsp;<em>p</em> &lt; .001."});const at=Oe(ta,[{name:"Predictor 1",values:Kt},{name:"Predictor 2",values:Zt}]);pr(document.getElementById("coef-plot"),at.coefficients,{title:"Regression Coefficients (95% CI)",xLabel:"Unstandardised Estimate",width:550,height:280,caption:`R² = ${at.r2.toFixed(3)}, adj. R² = ${at.adjR2.toFixed(3)}, F(${at.fDf[0]},${at.fDf[1]}) = ${at.fStatistic.toFixed(2)}, p ${at.fPValue<.001?"< .001":"= "+at.fPValue.toFixed(3)}.`});const gn=Oa(at,[{name:"Predictor 1",values:Kt},{name:"Predictor 2",values:Zt}]);yr(document.getElementById("residual-plot"),at,gn.leverage,{title:"Regression Diagnostics",width:700,height:580});const Ie=ne(ta),yn={"Predictor 1":ne(Kt),"Predictor 2":ne(Zt)},da=document.getElementById("regression-tables");mt(da,{title:"Table 8.  Model Summary",subtitle:`N = ${at.n}, predictors = 2`,cols:[{h:"Index",a:"l"},{h:"Value",a:"r"},{h:"Index",a:"l"},{h:"Value",a:"r"}],rows:[["<em>R</em>",Math.sqrt(at.r2).toFixed(4),"<em>F</em>",at.fStatistic.toFixed(3)+vt(at.fPValue)],["<em>R</em>&sup2;",at.r2.toFixed(4),"df<sub>1</sub>, df<sub>2</sub>",`${at.fDf[0]},&thinsp;${at.fDf[1]}`],["Adj. <em>R</em>&sup2;",at.adjR2.toFixed(4),"<em>p</em>",Ft(at.fPValue)],["<em>SE</em><sub>est</sub>",Math.sqrt(at.residualVariance??at.ssResidual/(at.n-3)).toFixed(4),"AIC",at.aic.toFixed(2)],["<em>n</em>",`${at.n}`,"BIC",at.bic.toFixed(2)]],note:`Dependent variable: Y. Predictors: Predictor 1, Predictor 2. Method: OLS. R² = ${at.r2.toFixed(4)} indicates ${(at.r2*100).toFixed(1)}% of variance explained.`});mt(da,{title:"Table 9.  Regression Coefficients",subtitle:"Unstandardised and standardised estimates with 95% confidence intervals",cols:[{h:"Predictor",a:"l"},{h:"<em>B</em>",a:"r"},{h:"<em>&beta;</em>*",a:"r"},{h:"<em>SE</em>",a:"r"},{h:"<em>t</em>",a:"r"},{h:"<em>p</em>",a:"r"},{h:"95% CI",a:"c"},{h:"",a:"c"}],rows:at.coefficients.map(a=>{const o=yn[a.name]??null,e=o!==null&&Ie>0?(a.estimate*o/Ie).toFixed(3):"—";return[a.name==="(Intercept)"?"<em>Intercept</em>":`<strong>${a.name}</strong>`,a.estimate.toFixed(3),e,a.se.toFixed(3),a.tValue.toFixed(3),Ft(a.pValue),At(a.ci[0],a.ci[1]),vt(a.pValue)||'<span class="stat-dim">ns</span>']}),note:"<em>B</em> = unstandardised coefficient. <em>&beta;*</em> = standardised coefficient (β × SD_x / SD_y). OLS regression. ns = not significant. &dagger;&thinsp;<em>p</em> &lt; .10, *&thinsp;<em>p</em> &lt; .05, **&thinsp;<em>p</em> &lt; .01, ***&thinsp;<em>p</em> &lt; .001."});const lt=Xa({outcome:ge,fixedPredictors:{x:xe},groupId:Bt}),bn=Qa({outcome:ge,fixedPredictors:{x:xe},groupId:Bt},lt);kr(document.getElementById("lmm-plot"),lt,bn,{title:"Random Effects — BLUPs Caterpillar Plot",width:550,height:280,caption:`k = ${lt.nGroups} groups, N = ${lt.nObs}. BLUPs = Best Linear Unbiased Predictors. Bars: 95% CI.`});const ma=document.getElementById("lmm-tables");mt(ma,{title:"Table 10.  Fixed Effects",subtitle:`Linear Mixed Model (REML). N = ${lt.nObs} observations, k = ${lt.nGroups} groups`,cols:[{h:"Effect",a:"l"},{h:"<em>&beta;</em>",a:"r"},{h:"<em>SE</em>",a:"r"},{h:"<em>t</em>",a:"r"},{h:"<em>p</em>",a:"r"},{h:"95% CI",a:"c"},{h:"",a:"c"}],rows:lt.fixedEffects.map(a=>[a.name==="(Intercept)"?"<em>Intercept</em>":`<strong>${a.name}</strong>`,a.estimate.toFixed(3),a.se.toFixed(3),a.tValue.toFixed(3),Ft(a.pValue),At(a.ci[0],a.ci[1]),vt(a.pValue)||'<span class="stat-dim">ns</span>']),note:"Estimated via REML. Degrees of freedom: approximate (Satterthwaite). ns = not significant."});const dt=lt.varianceComponents,kt=dt.intercept+dt.residual;dr(document.getElementById("lmm-variance-plot"),{rows:[{value:"Random intercept (σ²_b)",count:dt.intercept,relative:dt.intercept/kt,cumulative:dt.intercept/kt},{value:"Residual (σ²_e)",count:dt.residual,relative:dt.residual/kt,cumulative:1}]},{title:"Variance Components",yLabel:"σ²",showPercentages:!0,width:460,height:320});const wn=[1,2,3].map(a=>({label:`Group ${a}`,values:ge.filter((o,e)=>Bt[e]===a)}));Ge(document.getElementById("lmm-groups-plot"),{groups:wn},{title:"Observed Values by Group",xLabel:"Group",yLabel:"Y",width:500,height:320});mt(ma,{title:"Table 11.  Variance Components and Model Fit",cols:[{h:"Component / Index",a:"l"},{h:"&sigma;&sup2;",a:"r"},{h:"&sigma;",a:"r"},{h:"% Total",a:"r"}],rows:[["Between-group (<em>u</em><sub>0</sub>)",dt.intercept.toFixed(4),Math.sqrt(dt.intercept).toFixed(4),`${(100*dt.intercept/kt).toFixed(1)}%`],["Within-group (residual &epsilon;)",dt.residual.toFixed(4),Math.sqrt(dt.residual).toFixed(4),`${(100*dt.residual/kt).toFixed(1)}%`],["<strong>Total</strong>",kt.toFixed(4),Math.sqrt(kt).toFixed(4),"100.0%"],["ICC",lt.icc.toFixed(4),"—","—"],["log<em>L</em>",lt.logLik.toFixed(3),"—","—"],["AIC",lt.aic.toFixed(2),"—","—"],["BIC",lt.bic.toFixed(2),"—","—"]],note:`ICC = σ²_b / (σ²_b + σ²_e) = ${lt.icc.toFixed(4)}: ${(lt.icc*100).toFixed(1)}% of total variance is between groups. AIC/BIC: lower is better. Estimated via REML.`});const ut=Ga(Jt,3),Se=["V1","V2","V3","V4","V5"];Xe(document.getElementById("scree-plot"),ut,{title:"Scree Plot — Eigenvalues",type:"scree",width:500,height:350,variableLabels:Se,caption:"Kaiser criterion: retain components with λ ≥ 1 (above dashed line). Elbow rule: look for the bend."});Xe(document.getElementById("biplot"),ut,{title:"PCA Biplot",type:"biplot",width:550,height:500,variableLabels:Se,caption:"n = 60, p = 5 variables. Arrows: variable loadings on PC1/PC2. Scores: individual observations."});const ha=document.getElementById("pca-tables"),vn=Jt[0].length;mt(ha,{title:"Table 12.  Eigenvalues and Variance Explained",subtitle:`PCA via SVD (n = 60, variables = ${vn})`,cols:[{h:"Component",a:"l"},{h:"&lambda;",a:"r"},{h:"Var%",a:"r"},{h:"Cum%",a:"r"},{h:"&lambda; &ge; 1?",a:"c"}],rows:Array.from({length:ut.nComponents},(a,o)=>{const e=ut.eigenvalues[o]??0,r=((ut.varianceExplained[o]??0)*100).toFixed(1),t=((ut.cumulativeVariance[o]??0)*100).toFixed(1),n=e>=1?'<span style="color:#198754;font-weight:600">&#10003;</span>':'<span style="color:#dc3545">&#10005;</span>';return[`<strong>PC${o+1}</strong>`,e.toFixed(4),`${r}%`,`${t}%`,n]}),note:"Kaiser criterion: retain components with λ ≥ 1. Variance extracted via SVD on the standardised data matrix."});mt(ha,{title:"Table 13.  Component Loadings",subtitle:"Unrotated. Values with |loading| ≥ .30 in bold.",cols:[{h:"Variable",a:"l"},...Array.from({length:ut.nComponents},(a,o)=>({h:`<strong>PC${o+1}</strong>`,a:"r"})),{h:"Communality",a:"r"}],rows:Se.map((a,o)=>{const e=Array.from({length:ut.nComponents},(t,n)=>{var i;return((i=ut.loadings[n])==null?void 0:i[o])??0}),r=e.reduce((t,n)=>t+n**2,0);return[`<strong>${a}</strong>`,...e.map(t=>{const n=t.toFixed(3).replace(/^-0\./,"&minus;.").replace(/^0\./,".");return Math.abs(t)>=.3?`<strong>${n}</strong>`:`<span class="stat-dim">${n}</span>`}),r.toFixed(3)]}),note:"Communality = sum of squared loadings across retained components (h²). Higher values indicate more variance captured by the solution."});Qe(document.getElementById("dist-normal"),{distribution:"normal",params:{mean:0,sd:1},highlightX:1.96},{title:"Standard Normal — N(0,1)",width:550,height:320,caption:"Shaded area: P(Z > 1.96) = .025. Dashed line at z = 1.96 (two-tailed α = .05 critical value)."});Qe(document.getElementById("dist-t"),{distribution:"t",params:{df:10},highlightX:2.228},{title:"t-Distribution (df = 10)",width:550,height:320,caption:"Critical value t(10) = 2.228 at α = .05 (two-tailed). Heavy tails vs. normal: uncertainty from estimating σ."});jr(document.getElementById("lollipop-plot"),{labels:ye,values:te},{title:"Lollipop Chart — Category Scores",xLabel:"Score",sorted:!0,width:600,height:400});const Mn=wt(44),Sn=te.map(a=>a+Mn()*5);Or(document.getElementById("dot-plot-plot"),{labels:ye,values:te,group2:Sn,group1Label:"Before",group2Label:"After"},{title:"Cleveland Dot Plot — Before vs. After",xLabel:"Score",width:600,height:400});Kr(document.getElementById("pareto-plot"),{labels:ye,values:te},{title:"Pareto Chart",xLabel:"Category",yLabel:"Count",width:650,height:420,caption:"Bars: counts (descending). Line: cumulative %. Horizontal rule: 80% threshold (Pareto principle)."});Jr(document.getElementById("funnel-plot"),{stages:mn},{title:"Sales Funnel",width:600,height:440,caption:"Width proportional to value. Labels: stage value + % of previous stage."});Ke(document.getElementById("pie-plot"),{slices:oa},{title:"Market Share — Pie Chart",showPercentages:!0,donut:!1,width:500,height:420});Ke(document.getElementById("donut-plot"),{slices:oa},{title:"Market Share — Donut Chart",showPercentages:!0,donut:!0,width:500,height:420});ao(document.getElementById("area-plot"),{series:[{label:"Series A",x:xt,y:ea},{label:"Series B",x:xt,y:aa},{label:"Series C",x:xt,y:ra}]},{title:"Area Chart — Monthly Trends",xLabel:"Month",yLabel:"Value",stacked:!1,width:700,height:400});zo(document.getElementById("treemap-plot"),{children:cn},{title:"Treemap — Revenue by Category",width:700,height:420,caption:"Cell area proportional to value. Colour by product group."});Eo(document.getElementById("waffle-plot"),{slices:dn},{title:"Waffle Chart — Market Share",width:400,height:380,caption:"10 × 10 grid = 100 cells. Each cell = 1% of total. Largest-remainder rounding."});Xr(document.getElementById("linechart-plot"),{series:[{label:"Series A",x:xt,y:ea},{label:"Series B",x:xt,y:aa},{label:"Series C",x:xt,y:ra}]},{title:"Multi-line Time Series",xLabel:"Month",yLabel:"Value",showArea:!1,width:700,height:400});const ke=Ze(91),kn=Array.from({length:20},(a,o)=>50+o*2+(ke()-.5)*10),Ln=Array.from({length:20},(a,o)=>80-o*1.5+(ke()-.5)*8),Fn=Array.from({length:20},()=>60+(ke()-.5)*20);fe(document.getElementById("sparkline-a"),{values:kn},{showArea:!0,width:300,height:70});fe(document.getElementById("sparkline-b"),{values:Ln},{showArea:!0,width:300,height:70});fe(document.getElementById("sparkline-c"),{values:Fn},{showArea:!1,width:300,height:70});oo(document.getElementById("forest-plot"),{studies:_e,pooled:Dt},{title:"Forest Plot — Meta-Analysis",xLabel:"Effect Size (Hedges g)",width:740,height:420,caption:`k = ${_e.length} studies. Square size proportional to weight. Diamond: pooled estimate ${Dt.estimate.toFixed(2)} [${Dt.ciLow.toFixed(2)}, ${Dt.ciHigh.toFixed(2)}]. Vertical line: null effect (g = 0).`});so(document.getElementById("roc-plot"),{fpr:be,tpr:we,auc:Pe},{title:"ROC Curve — Classifier Performance",width:500,height:500,caption:`AUC = ${Pe} (area under the ROC curve). Diagonal dashed line: random classifier (AUC = 0.50). Higher AUC = better discrimination.`});So(document.getElementById("radar-plot"),{series:tn,axes:Jo},{title:"Radar Chart — Athlete Profiles",width:600,height:500,caption:"Each polygon = one athlete. Values normalised to [0,1] per axis (min–max across athletes)."});Lo(document.getElementById("parallel-plot"),{rows:rn,axes:en,groups:on},{title:"Parallel Coordinates — Iris-like Data",width:700,height:420,caption:"Each polyline = one observation. Colour by species group. Axes independently min–max scaled."});bo(document.getElementById("pair-plot"),{data:hn,labels:fn},{title:"Scatter Matrix (Pair Plot)",width:700,height:700,caption:"Off-diagonal: scatter plots with Pearson r. Diagonal: histogram of each variable."});lo(document.getElementById("strip-plot"),{groups:na},{title:"Strip Plot — Jittered Data Points",xLabel:"Group",yLabel:"Value",width:600,height:420,caption:"Jittered points (seeded pseudo-random). Horizontal line: group mean. n = 25 per group."});ho(document.getElementById("swarm-plot"),{groups:na},{title:"Beeswarm — Collision-free Layout",xLabel:"Group",yLabel:"Value",width:600,height:440,caption:"Greedy collision-avoidance: points displaced left/right to prevent overlap while preserving y = exact value."});go(document.getElementById("mosaic-plot"),{table:nn,rowLabels:sn,colLabels:ln},{title:"Mosaic Plot — Education × Income",width:620,height:460,caption:"Column width ∝ column marginals. Row height ∝ conditional proportion within column. Colour: Pearson residual (blue = positive, red = negative association)."});Po(document.getElementById("sunburst-plot"),{root:{name:"All Publications",children:[{name:"Quantitative",children:[{name:"Experiments",value:142},{name:"Surveys",value:98},{name:"Regression",value:87},{name:"SEM",value:54}]},{name:"Qualitative",children:[{name:"Interviews",value:76},{name:"Case Studies",value:58},{name:"Ethnography",value:34}]},{name:"Mixed Methods",children:[{name:"Sequential",value:61},{name:"Concurrent",value:49},{name:"Transformative",value:23}]},{name:"Reviews",children:[{name:"Systematic",value:88},{name:"Meta-Analysis",value:67},{name:"Scoping",value:41}]}]}},{title:"Publication Methodology Breakdown",caption:"N = 878 publications across 4 methodology families and 12 sub-categories. Ring 1: family, Ring 2: sub-category.",width:520,height:520,innerRadius:.22});Vo(document.getElementById("marimekko-plot"),{categories:["North America","Europe","Asia-Pacific","LatAm","MEA"],series:[{label:"Premium",values:[320,280,190,55,40]},{label:"Mid-range",values:[410,350,520,120,90]},{label:"Budget",values:[180,140,640,180,130]},{label:"Enterprise",values:[290,230,150,45,60]}]},{title:"Market Share by Region & Segment",xLabel:"Region (column width ∝ total market size)",yLabel:"Segment share (%)",caption:"Column width proportional to regional market size. Cell height = segment share within region. N = 5,173 M units.",width:680,height:500,showPercentLabels:!0});Do(document.getElementById("chord-plot"),{labels:["Education","Psychology","Comp Sci","Statistics","Linguistics"],matrix:[[0,42,18,12,8],[42,0,29,31,54],[18,29,0,47,11],[12,31,47,0,22],[8,54,11,22,0]]},{title:"Inter-Disciplinary Collaboration",caption:"Chord width ∝ number of joint publications between departments. N = 5 academic schools, 2019–2024.",width:620,height:540});Oo(document.getElementById("alluvial-plot"),{nodes:[{id:"stem-0",label:"STEM",stage:0},{id:"hum-0",label:"Humanities",stage:0},{id:"bus-0",label:"Business",stage:0},{id:"pass-1",label:"Passing",stage:1},{id:"cond-1",label:"Conditional",stage:1},{id:"fail-1",label:"Failed",stage:1},{id:"hon-2",label:"Honours",stage:2},{id:"ord-2",label:"Ordinary",stage:2},{id:"drop-2",label:"Dropout",stage:2}],flows:[{source:"stem-0",target:"pass-1",value:180},{source:"stem-0",target:"cond-1",value:55},{source:"stem-0",target:"fail-1",value:25},{source:"hum-0",target:"pass-1",value:120},{source:"hum-0",target:"cond-1",value:60},{source:"hum-0",target:"fail-1",value:40},{source:"bus-0",target:"pass-1",value:130},{source:"bus-0",target:"cond-1",value:50},{source:"bus-0",target:"fail-1",value:20},{source:"pass-1",target:"hon-2",value:290},{source:"pass-1",target:"ord-2",value:100},{source:"cond-1",target:"ord-2",value:110},{source:"cond-1",target:"drop-2",value:55},{source:"fail-1",target:"drop-2",value:85}],stageLabels:["Enrolment","Year 2","Graduation"]},{title:"Student Academic Pathway",caption:"N = 680 students tracked across 3 checkpoints. Flow width ∝ number of students following each pathway.",width:700,height:460});jo(document.getElementById("arc-plot"),{nodes:[{id:"Adams",group:"Quant"},{id:"Brown",group:"Qual"},{id:"Chen",group:"Quant"},{id:"Davies",group:"Mixed"},{id:"Evans",group:"Quant"},{id:"Flores",group:"Qual"},{id:"Garcia",group:"Mixed"},{id:"Harris",group:"Quant"},{id:"Ibrahim",group:"Qual"},{id:"Jensen",group:"Mixed"}],edges:[{source:"Adams",target:"Chen",value:3},{source:"Adams",target:"Evans",value:2},{source:"Adams",target:"Harris",value:1},{source:"Brown",target:"Flores",value:4},{source:"Brown",target:"Ibrahim",value:2},{source:"Chen",target:"Davies",value:1},{source:"Chen",target:"Evans",value:3},{source:"Davies",target:"Garcia",value:2},{source:"Davies",target:"Jensen",value:1},{source:"Evans",target:"Harris",value:4},{source:"Flores",target:"Garcia",value:2},{source:"Garcia",target:"Jensen",value:3},{source:"Harris",target:"Jensen",value:1},{source:"Ibrahim",target:"Jensen",value:2}]},{title:"Co-authorship Network",sortByGroup:!0,caption:"Nodes grouped by methodology (Quantitative / Qualitative / Mixed). Arc height ∝ node distance. Arc weight ∝ joint publications.",width:700,height:420});Go(document.getElementById("edge-bundling-plot"),{nodes:[{id:"root",label:"Carm",parent:""},{id:"core",label:"core",parent:"root"},{id:"stats",label:"stats",parent:"root"},{id:"viz",label:"viz",parent:"root"},{id:"types",label:"types",parent:"core",group:"core"},{id:"matrix",label:"matrix",parent:"core",group:"core"},{id:"math",label:"math",parent:"core",group:"core"},{id:"apa",label:"apa",parent:"core",group:"core"},{id:"desc",label:"descriptive",parent:"stats",group:"stats"},{id:"comp",label:"comparison",parent:"stats",group:"stats"},{id:"corr",label:"correlation",parent:"stats",group:"stats"},{id:"reg",label:"regression",parent:"stats",group:"stats"},{id:"mixed",label:"mixed",parent:"stats",group:"stats"},{id:"pca",label:"pca",parent:"stats",group:"stats"},{id:"violin",label:"violin-box",parent:"viz",group:"viz"},{id:"scatter",label:"scatter",parent:"viz",group:"viz"},{id:"hist",label:"histogram",parent:"viz",group:"viz"},{id:"corrgram",label:"correlogram",parent:"viz",group:"viz"}],edges:[{source:"desc",target:"types"},{source:"desc",target:"math"},{source:"comp",target:"types"},{source:"comp",target:"math"},{source:"corr",target:"types"},{source:"corr",target:"math"},{source:"reg",target:"matrix"},{source:"reg",target:"math"},{source:"mixed",target:"matrix"},{source:"mixed",target:"math"},{source:"pca",target:"matrix"},{source:"violin",target:"comp"},{source:"scatter",target:"corr"},{source:"scatter",target:"reg"},{source:"hist",target:"desc"},{source:"corrgram",target:"corr"},{source:"violin",target:"apa"},{source:"scatter",target:"apa"},{source:"hist",target:"types"}]},{title:"Carm Module Dependency Graph",caption:"Hierarchical edge bundling (β = 0.85). Edges routed through lowest common ancestor — shared dependencies cluster visually.",width:620,height:620});

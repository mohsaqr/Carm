{"version":3,"sources":["../src/core/math.ts","../src/core/apa.ts"],"names":["rank","i"],"mappings":"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","file":"chunk-MX4OLB7V.cjs","sourcesContent":["/**\n * Core mathematical utilities for Carm.\n * Beta/Gamma functions, Nelder-Mead optimizer, p-value adjustment.\n * All pure functions — no DOM, no side effects.\n */\n\nimport type { PAdjMethod } from './types.js'\n\n// ─── Gamma / Beta functions ────────────────────────────────────────────────\n\n/**\n * Natural log of the Gamma function via Lanczos approximation.\n * Reference: Press et al., \"Numerical Recipes in C\", 3rd ed., §6.1\n */\nexport function logGamma(z: number): number {\n  if (z <= 0) throw new Error(`logGamma: z must be positive, got ${z}`)\n  if (z < 0.5) {\n    // Reflection formula: Γ(z)Γ(1-z) = π/sin(πz)\n    return Math.log(Math.PI / Math.sin(Math.PI * z)) - logGamma(1 - z)\n  }\n  const g = 7\n  const c = [\n    0.99999999999980993,\n    676.5203681218851,\n    -1259.1392167224028,\n    771.32342877765313,\n    -176.61502916214059,\n    12.507343278686905,\n    -0.13857109526572012,\n    9.9843695780195716e-6,\n    1.5056327351493116e-7,\n  ]\n  const x = z - 1\n  let sum = c[0]!\n  for (let i = 1; i < g + 2; i++) sum += (c[i] ?? 0) / (x + i)\n  const t = x + g + 0.5\n  return 0.5 * Math.log(2 * Math.PI) + (x + 0.5) * Math.log(t) - t + Math.log(sum)\n}\n\n/** Gamma function. */\nexport function gamma(z: number): number {\n  return Math.exp(logGamma(z))\n}\n\n/** Log of Beta function: log B(a, b) = logΓ(a) + logΓ(b) - logΓ(a+b). */\nexport function logBeta(a: number, b: number): number {\n  return logGamma(a) + logGamma(b) - logGamma(a + b)\n}\n\n/** Beta function. */\nexport function betaFn(a: number, b: number): number {\n  return Math.exp(logBeta(a, b))\n}\n\n/**\n * Regularized incomplete beta function I_x(a, b) via continued fraction.\n * Used for t, F, and beta distribution CDFs.\n * Reference: Press et al., §6.4 (Lentz continued fraction algorithm)\n */\nexport function incompleteBeta(x: number, a: number, b: number): number {\n  if (x < 0 || x > 1) throw new Error(`incompleteBeta: x must be in [0,1], got ${x}`)\n  if (x === 0) return 0\n  if (x === 1) return 1\n\n  // Use symmetry when x > (a+1)/(a+b+2) for faster convergence\n  if (x > (a + 1) / (a + b + 2)) {\n    return 1 - incompleteBeta(1 - x, b, a)\n  }\n\n  const lbeta_ab = logBeta(a, b)\n  const front = Math.exp(Math.log(x) * a + Math.log(1 - x) * b - lbeta_ab) / a\n\n  // Lentz continued fraction\n  const MAX_ITER = 200\n  const EPS = 3e-7\n  const FPMIN = 1e-30\n\n  let f = 1\n  let C = 1\n  let D = 1 - (a + b) * x / (a + 1)\n  if (Math.abs(D) < FPMIN) D = FPMIN\n  D = 1 / D\n  f = D\n\n  for (let m = 1; m <= MAX_ITER; m++) {\n    // Even step\n    let num = m * (b - m) * x / ((a + 2 * m - 1) * (a + 2 * m))\n    D = 1 + num * D\n    if (Math.abs(D) < FPMIN) D = FPMIN\n    C = 1 + num / C\n    if (Math.abs(C) < FPMIN) C = FPMIN\n    D = 1 / D\n    f *= C * D\n\n    // Odd step\n    num = -(a + m) * (a + b + m) * x / ((a + 2 * m) * (a + 2 * m + 1))\n    D = 1 + num * D\n    if (Math.abs(D) < FPMIN) D = FPMIN\n    C = 1 + num / C\n    if (Math.abs(C) < FPMIN) C = FPMIN\n    D = 1 / D\n    const delta = C * D\n    f *= delta\n\n    if (Math.abs(delta - 1) < EPS) break\n  }\n  return front * f\n}\n\n/**\n * Regularized incomplete gamma function P(a, x) via series expansion.\n * Used for chi-square and Poisson CDFs.\n * Reference: Press et al., §6.2\n */\nexport function incompleteGamma(a: number, x: number): number {\n  if (x < 0) throw new Error(`incompleteGamma: x must be ≥ 0, got ${x}`)\n  if (x === 0) return 0\n\n  if (x < a + 1) {\n    // Series representation\n    let term = 1 / a\n    let sum = term\n    for (let n = 1; n < 200; n++) {\n      term *= x / (a + n)\n      sum += term\n      if (Math.abs(term) < Math.abs(sum) * 3e-7) break\n    }\n    return sum * Math.exp(-x + a * Math.log(x) - logGamma(a))\n  } else {\n    // Continued fraction (complement)\n    return 1 - incompleteGammaComplement(a, x)\n  }\n}\n\nfunction incompleteGammaComplement(a: number, x: number): number {\n  // Lentz continued fraction for Q(a,x)\n  const FPMIN = 1e-30\n  let f = x + 1 - a\n  if (Math.abs(f) < FPMIN) f = FPMIN\n  let C = f, D = 0\n  for (let i = 1; i <= 200; i++) {\n    const an = -i * (i - a)\n    const bn = x + 2 * i + 1 - a\n    D = bn + an * D\n    if (Math.abs(D) < FPMIN) D = FPMIN\n    C = bn + an / C\n    if (Math.abs(C) < FPMIN) C = FPMIN\n    D = 1 / D\n    const delta = C * D\n    f *= delta\n    if (Math.abs(delta - 1) < 3e-7) break\n  }\n  return Math.exp(-x + a * Math.log(x) - logGamma(a)) / f\n}\n\n// ─── t-distribution CDF ───────────────────────────────────────────────────\n\n/** Two-tailed p-value from t statistic with df degrees of freedom. */\nexport function tDistPValue(t: number, df: number): number {\n  const x = df / (df + t * t)\n  const p = incompleteBeta(x, df / 2, 0.5)\n  return p  // already two-tailed\n}\n\n/** CDF of t-distribution P(T ≤ t | df). */\nexport function tDistCDF(t: number, df: number): number {\n  const x = df / (df + t * t)\n  const p = 0.5 * incompleteBeta(x, df / 2, 0.5)\n  return t >= 0 ? 1 - p : p\n}\n\n/** Quantile (inverse CDF) of t-distribution. Uses bisection. */\nexport function tDistQuantile(p: number, df: number): number {\n  if (p <= 0 || p >= 1) throw new Error(`tDistQuantile: p must be in (0,1), got ${p}`)\n  // Bisection on CDF\n  let lo = -50, hi = 50\n  for (let i = 0; i < 100; i++) {\n    const mid = (lo + hi) / 2\n    if (tDistCDF(mid, df) < p) lo = mid\n    else hi = mid\n    if (hi - lo < 1e-10) break\n  }\n  return (lo + hi) / 2\n}\n\n// ─── F-distribution CDF ──────────────────────────────────────────────────\n\n/** P(F ≤ f | df1, df2) via regularized incomplete beta. */\nexport function fDistCDF(f: number, df1: number, df2: number): number {\n  if (f <= 0) return 0\n  const x = df1 * f / (df1 * f + df2)\n  return incompleteBeta(x, df1 / 2, df2 / 2)\n}\n\n/** Upper tail p-value for F-distribution. */\nexport function fDistPValue(f: number, df1: number, df2: number): number {\n  return 1 - fDistCDF(f, df1, df2)\n}\n\n// ─── Chi-square distribution ─────────────────────────────────────────────\n\n/** P(χ² ≤ x | df). */\nexport function chiSqCDF(x: number, df: number): number {\n  if (x <= 0) return 0\n  return incompleteGamma(df / 2, x / 2)\n}\n\n/** Upper tail p-value for chi-square. */\nexport function chiSqPValue(x: number, df: number): number {\n  return 1 - chiSqCDF(x, df)\n}\n\n/** Quantile of chi-square distribution via bisection. */\nexport function chiSqQuantile(p: number, df: number): number {\n  if (p <= 0) return 0\n  if (p >= 1) return Infinity\n  let lo = 0, hi = df + 10 * Math.sqrt(2 * df)\n  for (let i = 0; i < 100; i++) {\n    const mid = (lo + hi) / 2\n    if (chiSqCDF(mid, df) < p) lo = mid\n    else hi = mid\n    if (hi - lo < 1e-10) break\n  }\n  return (lo + hi) / 2\n}\n\n// ─── Normal distribution ──────────────────────────────────────────────────\n\n/** Standard normal CDF using complementary error function. */\nexport function normalCDF(z: number): number {\n  return 0.5 * (1 + erf(z / Math.SQRT2))\n}\n\n/**\n * Inverse standard normal CDF (quantile function).\n * Peter Acklam's rational approximation — max absolute error ~1.15e-9.\n * Reference: https://web.archive.org/web/20151030215612/http://home.online.no/~pjacklam/notes/invnorm/\n */\nexport function normalQuantile(p: number): number {\n  if (p <= 0 || p >= 1) throw new Error(`normalQuantile: p must be in (0,1), got ${p}`)\n\n  // Coefficients for the rational approximations\n  const a1 = -3.969683028665376e+01, a2 =  2.209460984245205e+02\n  const a3 = -2.759285104469687e+02, a4 =  1.383577518672690e+02\n  const a5 = -3.066479806614716e+01, a6 =  2.506628277459239e+00\n  const b1 = -5.447609879822406e+01, b2 =  1.615858368580409e+02\n  const b3 = -1.556989798598866e+02, b4 =  6.680131188771972e+01\n  const b5 = -1.328068155288572e+01\n  const c1 = -7.784894002430293e-03, c2 = -3.223964580411365e-01\n  const c3 = -2.400758277161838e+00, c4 = -2.549732539343734e+00\n  const c5 =  4.374664141464968e+00, c6 =  2.938163982698783e+00\n  const d1 =  7.784695709041462e-03, d2 =  3.224671290700398e-01\n  const d3 =  2.445134137142996e+00, d4 =  3.754408661907416e+00\n\n  const pLow = 0.02425, pHigh = 1 - pLow\n\n  if (p < pLow) {\n    // Lower tail region\n    const q = Math.sqrt(-2 * Math.log(p))\n    return (((((c1*q+c2)*q+c3)*q+c4)*q+c5)*q+c6) /\n           ((((d1*q+d2)*q+d3)*q+d4)*q+1)\n  } else if (p <= pHigh) {\n    // Central region\n    const q = p - 0.5, r = q * q\n    return (((((a1*r+a2)*r+a3)*r+a4)*r+a5)*r+a6)*q /\n           (((((b1*r+b2)*r+b3)*r+b4)*r+b5)*r+1)\n  } else {\n    // Upper tail region (mirror of lower)\n    const q = Math.sqrt(-2 * Math.log(1 - p))\n    return -(((((c1*q+c2)*q+c3)*q+c4)*q+c5)*q+c6) /\n            ((((d1*q+d2)*q+d3)*q+d4)*q+1)\n  }\n}\n\n/** Error function approximation (Horner's method). */\nfunction erf(x: number): number {\n  // Abramowitz & Stegun formula 7.1.26\n  const t = 1 / (1 + 0.3275911 * Math.abs(x))\n  const poly = t * (0.254829592 + t * (-0.284496736 + t * (1.421413741 + t * (-1.453152027 + t * 1.061405429))))\n  const result = 1 - poly * Math.exp(-x * x)\n  return x >= 0 ? result : -result\n}\n\n// ─── Nelder-Mead Optimizer ────────────────────────────────────────────────\n\nexport interface NelderMeadOptions {\n  readonly maxIter?: number\n  readonly tol?: number\n  readonly alpha?: number   // reflection\n  readonly beta?: number    // contraction\n  readonly gamma?: number   // expansion\n  readonly delta?: number   // shrink\n}\n\nexport interface NelderMeadResult {\n  readonly x: readonly number[]\n  readonly fval: number\n  readonly iterations: number\n  readonly converged: boolean\n}\n\n/**\n * Nelder-Mead simplex optimizer for unconstrained minimization.\n * Reference: Nelder & Mead (1965), The Computer Journal 7(4):308-313\n */\nexport function nelderMead(\n  fn: (x: readonly number[]) => number,\n  x0: readonly number[],\n  opts: NelderMeadOptions = {}\n): NelderMeadResult {\n  const n = x0.length\n  const maxIter = opts.maxIter ?? 1000 * n\n  const tol = opts.tol ?? 1e-8\n  const alpha = opts.alpha ?? 1.0\n  const beta = opts.beta ?? 0.5\n  const gam = opts.gamma ?? 2.0\n  const delta = opts.delta ?? 0.5\n\n  // Initialize simplex: n+1 vertices\n  const simplex: number[][] = Array.from({ length: n + 1 }, (_, i) => {\n    const v = [...x0]\n    if (i > 0) v[i - 1] = (v[i - 1] ?? 0) + ((Math.abs(v[i - 1] ?? 0) > 1e-8) ? 0.05 * (v[i - 1] ?? 0) : 0.00025)\n    return v\n  })\n  let fvals = simplex.map(v => fn(v))\n\n  let iter = 0\n  let converged = false\n\n  for (; iter < maxIter; iter++) {\n    // Sort by function value and keep simplex in sync\n    const order = fvals.map((_, i) => i).sort((a, b) => fvals[a]! - fvals[b]!)\n    const sorted = order.map(i => simplex[i]!)\n    fvals = order.map(i => fvals[i]!)\n    // Critical: sync simplex so simplex[i] corresponds to fvals[i]\n    for (let i = 0; i <= n; i++) simplex[i] = sorted[i]!\n\n    // Check convergence\n    const fRange = (fvals[n] ?? 0) - (fvals[0] ?? 0)\n    if (fRange < tol) { converged = true; break }\n\n    // Centroid of all but worst (simplex[n] is now the worst)\n    const centroid = Array.from({ length: n }, (_, j) =>\n      simplex.slice(0, n).reduce((s, v) => s + (v[j] ?? 0), 0) / n\n    )\n\n    // Reflect worst\n    const worst = simplex[n]!\n    const reflected = centroid.map((c, j) => c + alpha * (c - (worst[j] ?? 0)))\n    const fr = fn(reflected)\n\n    if (fr < (fvals[0] ?? 0)) {\n      // Expansion\n      const expanded = centroid.map((c, j) => c + gam * (reflected[j]! - c))\n      const fe = fn(expanded)\n      simplex[n] = fe < fr ? expanded : reflected\n      fvals[n] = fe < fr ? fe : fr\n    } else if (fr < (fvals[n - 1] ?? 0)) {\n      simplex[n] = reflected\n      fvals[n] = fr\n    } else {\n      // Contraction\n      const contracted = centroid.map((c, j) => c + beta * ((worst[j] ?? 0) - c))\n      const fc = fn(contracted)\n      if (fc < (fvals[n] ?? 0)) {\n        simplex[n] = contracted\n        fvals[n] = fc\n      } else {\n        // Shrink toward best (simplex[0])\n        const best = simplex[0]!\n        for (let i = 1; i <= n; i++) {\n          simplex[i] = simplex[i]!.map((v, j) => (best[j] ?? 0) + delta * (v - (best[j] ?? 0)))\n          fvals[i] = fn(simplex[i]!)\n        }\n      }\n    }\n  }\n\n  const order0 = fvals.map((_, i) => i).sort((a, b) => fvals[a]! - fvals[b]!)\n  return {\n    x: simplex[order0[0]!]!,\n    fval: fvals[order0[0]!]!,\n    iterations: iter,\n    converged,\n  }\n}\n\n// ─── P-value adjustment ──────────────────────────────────────────────────\n\n/**\n * Adjust p-values for multiple comparisons.\n * Methods: 'bonferroni', 'holm', 'BH' (Benjamini-Hochberg), 'BY', 'none'.\n * Reference: R stats::p.adjust\n */\nexport function adjustPValues(pValues: readonly number[], method: PAdjMethod): number[] {\n  const n = pValues.length\n  if (n === 0) return []\n  if (method === 'none') return [...pValues]\n\n  if (method === 'bonferroni') {\n    return pValues.map(p => Math.min(1, p * n))\n  }\n\n  if (method === 'holm') {\n    const order = pValues.map((p, i) => ({ p, i })).sort((a, b) => a.p - b.p)\n    const adj = new Array<number>(n)\n    let running = 0\n    for (let k = 0; k < n; k++) {\n      const { p, i } = order[k]!\n      running = Math.max(running, p * (n - k))\n      adj[i] = Math.min(1, running)\n    }\n    return adj\n  }\n\n  if (method === 'BH') {\n    // Benjamini-Hochberg\n    const order = pValues.map((p, i) => ({ p, i })).sort((a, b) => b.p - a.p) // descending\n    const adj = new Array<number>(n)\n    let minSoFar = Infinity\n    for (let k = 0; k < n; k++) {\n      const { p, i } = order[k]!\n      const rank = n - k  // rank from smallest (1-indexed)\n      const adjusted = p * n / rank\n      minSoFar = Math.min(minSoFar, adjusted)\n      adj[i] = Math.min(1, minSoFar)\n    }\n    return adj\n  }\n\n  if (method === 'BY') {\n    // Benjamini-Yekutieli\n    const cm = pValues.reduce((s, _, k) => s + 1 / (k + 1), 0)\n    const order = pValues.map((p, i) => ({ p, i })).sort((a, b) => b.p - a.p)\n    const adj = new Array<number>(n)\n    let minSoFar = Infinity\n    for (let k = 0; k < n; k++) {\n      const { p, i } = order[k]!\n      const rank = n - k\n      const adjusted = p * n * cm / rank\n      minSoFar = Math.min(minSoFar, adjusted)\n      adj[i] = Math.min(1, minSoFar)\n    }\n    return adj\n  }\n\n  throw new Error(`Unknown p-adjust method: ${method}`)\n}\n\n// ─── Descriptive utilities ────────────────────────────────────────────────\n\n/** Sample mean. */\nexport function mean(x: readonly number[]): number {\n  if (x.length === 0) throw new Error('mean: empty array')\n  // Explicit Number() coercion guards against JS string-concatenation if TypeScript\n  // safety is bypassed (e.g. CSV-sourced data passed without type-checking).\n  return x.reduce((s, v) => s + Number(v), 0) / x.length\n}\n\n/** Sample variance (n-1 denominator). */\nexport function variance(x: readonly number[]): number {\n  if (x.length < 2) throw new Error('variance: need at least 2 observations')\n  const m = mean(x)\n  // If the mean is non-finite (e.g. any value is Infinity), return NaN explicitly\n  // rather than letting Infinity - Infinity produce an opaque NaN mid-loop.\n  if (!isFinite(m)) return NaN\n  return x.reduce((s, v) => s + (v - m) ** 2, 0) / (x.length - 1)\n}\n\n/** Sample standard deviation. */\nexport function sd(x: readonly number[]): number {\n  return Math.sqrt(variance(x))\n}\n\n/** Standard error of the mean. */\nexport function se(x: readonly number[]): number {\n  return sd(x) / Math.sqrt(x.length)\n}\n\n/** Median. */\nexport function median(x: readonly number[]): number {\n  if (x.length === 0) throw new Error('median: empty array')\n  const sorted = [...x].sort((a, b) => a - b)\n  const mid = Math.floor(sorted.length / 2)\n  return sorted.length % 2 === 0\n    ? ((sorted[mid - 1]! + sorted[mid]!) / 2)\n    : sorted[mid]!\n}\n\n/** Quantile (using linear interpolation, same as R type=7). */\nexport function quantile(x: readonly number[], p: number): number {\n  if (p < 0 || p > 1) throw new Error(`quantile: p must be in [0,1], got ${p}`)\n  const sorted = [...x].sort((a, b) => a - b)\n  const n = sorted.length\n  const h = (n - 1) * p\n  const lo = Math.floor(h)\n  const hi = Math.ceil(h)\n  if (lo === hi) return sorted[lo]!\n  return sorted[lo]! + (h - lo) * (sorted[hi]! - sorted[lo]!)\n}\n\n/** Sort array ascending (returns new array). */\nexport function sortAsc(x: readonly number[]): number[] {\n  return [...x].sort((a, b) => a - b)\n}\n\n/** Sum of squared deviations from mean. */\nexport function ss(x: readonly number[]): number {\n  const m = mean(x)\n  return x.reduce((s, v) => s + (v - m) ** 2, 0)\n}\n\n/** Ranks (average ties), 1-indexed. */\nexport function rank(x: readonly number[]): number[] {\n  const n = x.length\n  const order = x.map((v, i) => ({ v, i })).sort((a, b) => a.v - b.v)\n  const ranks = new Array<number>(n)\n\n  let i = 0\n  while (i < n) {\n    let j = i\n    while (j < n && order[j]!.v === order[i]!.v) j++\n    const avgRank = (i + j - 1) / 2 + 1\n    for (let k = i; k < j; k++) ranks[order[k]!.i] = avgRank\n    i = j\n  }\n  return ranks\n}\n\n/** Covariance between two arrays (n-1 denominator). */\nexport function cov(x: readonly number[], y: readonly number[]): number {\n  if (x.length !== y.length) throw new Error('cov: arrays must have equal length')\n  if (x.length < 2) throw new Error('cov: need at least 2 observations')\n  const mx = mean(x), my = mean(y)\n  return x.reduce((s, v, i) => s + (v - mx) * ((y[i] ?? 0) - my), 0) / (x.length - 1)\n}\n\n/** Clamp a number to [lo, hi]. */\nexport function clamp(v: number, lo: number, hi: number): number {\n  return Math.max(lo, Math.min(hi, v))\n}\n\n/** Round to n decimal places. */\nexport function roundTo(v: number, n: number): number {\n  const factor = 10 ** n\n  return Math.round(v * factor) / factor\n}\n","/**\n * APA 7th edition string formatting for statistical results.\n * Every stat function uses these formatters to produce the `formatted` string\n * that gets embedded directly into plots as subtitles/captions.\n */\n\nimport { roundTo } from './math.js'\n\n/**\n * Format a p-value in APA style.\n * < .001 → \"p < .001\"\n * otherwise → \"p = .025\" (leading zero dropped, 3 decimal places)\n */\nexport function formatP(p: number): string {\n  if (p < 0.001) return 'p < .001'\n  const rounded = roundTo(p, 3).toFixed(3).replace('0.', '.')\n  return `p = ${rounded}`\n}\n\n/**\n * Format a statistic value: 2 decimal places, no leading zero for absolute values.\n * Used for t, F, z, χ², etc.\n */\nexport function formatStat(v: number, decimals = 2): string {\n  return roundTo(v, decimals).toFixed(decimals)\n}\n\n/**\n * Format a confidence interval: [lo, hi] → \"[0.08, 1.22]\"\n */\nexport function formatCI(ci: readonly [number, number], decimals = 2): string {\n  return `[${roundTo(ci[0], decimals).toFixed(decimals)}, ${roundTo(ci[1], decimals).toFixed(decimals)}]`\n}\n\n/**\n * Format degrees of freedom — integer if whole number, else 2 decimal places.\n */\nexport function formatDF(df: number | readonly [number, number]): string {\n  if (typeof df === 'number') {\n    return Number.isInteger(df) ? String(df) : df.toFixed(2)\n  }\n  const [df1, df2] = df\n  const f1 = Number.isInteger(df1) ? String(df1) : df1.toFixed(2)\n  const f2 = Number.isInteger(df2) ? String(df2) : df2.toFixed(2)\n  return `${f1}, ${f2}`\n}\n\n/**\n * Full APA string for a t-test result.\n * e.g. \"t(48) = 2.31, p = .025, d = 0.65, 95% CI [0.08, 1.22]\"\n */\nexport function formatTTest(\n  t: number,\n  df: number,\n  pValue: number,\n  effectSize: number,\n  effectName: string,\n  ci: readonly [number, number],\n  ciLevel = 0.95\n): string {\n  const ciPct = Math.round(ciLevel * 100)\n  return `t(${formatDF(df)}) = ${formatStat(t)}, ${formatP(pValue)}, ${effectName} = ${formatStat(effectSize)}, ${ciPct}% CI ${formatCI(ci)}`\n}\n\n/**\n * Full APA string for ANOVA.\n * e.g. \"F(2, 87) = 4.21, p = .018, η² = 0.09\"\n */\nexport function formatANOVA(\n  F: number,\n  df1: number,\n  df2: number,\n  pValue: number,\n  effectSize: number,\n  effectName = 'η²'\n): string {\n  return `F(${formatDF([df1, df2])}) = ${formatStat(F)}, ${formatP(pValue)}, ${effectName} = ${formatStat(effectSize)}`\n}\n\n/**\n * Full APA string for chi-square test.\n * e.g. \"χ²(3) = 8.46, p = .037, V = 0.29\"\n */\nexport function formatChiSq(\n  chiSq: number,\n  df: number,\n  pValue: number,\n  effectSize: number,\n  effectName = \"V\"\n): string {\n  return `χ²(${formatDF(df)}) = ${formatStat(chiSq)}, ${formatP(pValue)}, ${effectName} = ${formatStat(effectSize)}`\n}\n\n/**\n * APA string for Pearson/Spearman/Kendall correlation.\n * e.g. \"r(48) = 0.54, p = .003, 95% CI [0.28, 0.73]\"\n */\nexport function formatCorrelation(\n  r: number,\n  df: number,\n  pValue: number,\n  ci: readonly [number, number],\n  method = 'r',\n  ciLevel = 0.95\n): string {\n  const ciPct = Math.round(ciLevel * 100)\n  return `${method}(${formatDF(df)}) = ${formatStat(r)}, ${formatP(pValue)}, ${ciPct}% CI ${formatCI(ci)}`\n}\n\n/**\n * APA string for linear regression.\n * e.g. \"R² = 0.42, F(3, 96) = 23.2, p < .001\"\n */\nexport function formatRegression(\n  r2: number,\n  adjR2: number,\n  F: number,\n  df1: number,\n  df2: number,\n  pValue: number\n): string {\n  return `R² = ${formatStat(r2)}, adj. R² = ${formatStat(adjR2)}, F(${formatDF([df1, df2])}) = ${formatStat(F)}, ${formatP(pValue)}`\n}\n\n/**\n * APA string for Mann-Whitney / Wilcoxon.\n * e.g. \"W = 423, p = .031, r = 0.27\"\n */\nexport function formatMannWhitney(\n  W: number,\n  pValue: number,\n  r: number\n): string {\n  return `W = ${formatStat(W, 0)}, ${formatP(pValue)}, r = ${formatStat(r)}`\n}\n\n/**\n * APA string for Kruskal-Wallis.\n * e.g. \"H(2) = 12.3, p = .002, η²_H = 0.18\"\n */\nexport function formatKruskalWallis(\n  H: number,\n  df: number,\n  pValue: number,\n  etaSq: number\n): string {\n  return `H(${formatDF(df)}) = ${formatStat(H)}, ${formatP(pValue)}, η²_H = ${formatStat(etaSq)}`\n}\n\n/**\n * APA string for LMM.\n * e.g. \"ICC = 0.42, AIC = 1234.5\"\n */\nexport function formatLMM(icc: number, aic: number, bic: number, logLik: number): string {\n  return `ICC = ${formatStat(icc)}, AIC = ${formatStat(aic, 1)}, BIC = ${formatStat(bic, 1)}, logLik = ${formatStat(logLik, 1)}`\n}\n\n/**\n * Interpret Cohen's d effect size.\n */\nexport function interpretCohensD(d: number): string {\n  const abs = Math.abs(d)\n  if (abs < 0.2) return 'negligible'\n  if (abs < 0.5) return 'small'\n  if (abs < 0.8) return 'medium'\n  return 'large'\n}\n\n/**\n * Interpret eta-squared / omega-squared.\n */\nexport function interpretEtaSq(eta: number): string {\n  if (eta < 0.01) return 'negligible'\n  if (eta < 0.06) return 'small'\n  if (eta < 0.14) return 'medium'\n  return 'large'\n}\n\n/**\n * Interpret Pearson r.\n */\nexport function interpretR(r: number): string {\n  const abs = Math.abs(r)\n  if (abs < 0.1) return 'negligible'\n  if (abs < 0.3) return 'small'\n  if (abs < 0.5) return 'medium'\n  if (abs < 0.7) return 'large'\n  return 'very large'\n}\n\n/**\n * Interpret Cramér's V.\n */\nexport function interpretCramerV(v: number, df: number): string {\n  // Benchmarks depend on df (Cohen 1988 adjusted for contingency tables)\n  const small = df === 1 ? 0.1 : df === 2 ? 0.07 : 0.06\n  const medium = df === 1 ? 0.3 : df === 2 ? 0.21 : 0.17\n  if (v < small) return 'negligible'\n  if (v < medium) return 'small'\n  if (v < medium * 1.5) return 'medium'\n  return 'large'\n}\n\nimport type { EffectInterpretation, FactorFit } from './types.js'\n\n/**\n * APA string for CFA/EFA fit indices.\n * e.g. \"χ²(24) = 28.42, p = .241, RMSEA = 0.042 [0.000, 0.085], CFI = 0.987, TLI = 0.982, SRMR = 0.038\"\n */\nexport function formatCFAFit(fit: FactorFit): string {\n  return `χ²(${formatDF(fit.df)}) = ${formatStat(fit.chiSq)}, ${formatP(fit.pValue)}, RMSEA = ${formatStat(fit.rmsea, 3)} ${formatCI(fit.rmseaCI, 3)}, CFI = ${formatStat(fit.cfi, 3)}, TLI = ${formatStat(fit.tli, 3)}, SRMR = ${formatStat(fit.srmr, 3)}`\n}\n\n/** Generic effect size interpretation helper. */\nexport function interpretEffect(value: number, thresholds: readonly [number, number, number]): EffectInterpretation {\n  const abs = Math.abs(value)\n  if (abs < thresholds[0]) return 'negligible'\n  if (abs < thresholds[1]) return 'small'\n  if (abs < thresholds[2]) return 'medium'\n  return 'large'\n}\n"]}